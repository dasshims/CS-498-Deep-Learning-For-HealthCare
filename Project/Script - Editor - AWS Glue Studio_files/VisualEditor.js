(this["webpackJsonp@amzn/amazon-glue-frontend-asset-server"]=this["webpackJsonp@amzn/amazon-glue-frontend-asset-server"]||[]).push([[35,12,13],{2602:function(e,t){},2604:function(e,t){},2621:function(e,t,n){"use strict";n.r(t);var a=n(2),o=n(0),r=n(41),i=n(396),s=n(76),c=n(137),l=n(52),u=n(30),d=n(761),b=n(500),p=n(888),f=n(3),j=n(351),h=n(210),m=n(2698),g=n(876),O=n(2667),v=n(97);var y=n(919),x=n(254),S=function(){var e=Object(x.a)().data;return Object(o.useMemo)((function(){return Object(y.b)(e)}),[e])},k=n(2796),C=n(208),E=n(124),w=n(2674);function I(e){var t=e.dag,n=Object(E.a)(!0).pushNotification,r=Object(o.useContext)(w.a).onNodeSelected,i=Object(o.useMemo)((function(){for(var e={},n=0,o=Object.entries(t||{});n<o.length;n++){var r=Object(a.a)(o[n],2),i=r[0],s=r[1];"Connector"===s.type&&(e[i]=s)}return e}),[t]),s=Object(C.d)(),c=Object(a.a)(s,2),l=c[0],u=c[1].status,d=Object(o.useMemo)((function(){for(var e=l.map((function(e){return e.Name})),t=[],n=0,o=Object.entries(i||{});n<o.length;n++){var r=Object(a.a)(o[n],2),s=r[0],c=r[1];e.includes(c.connectionName)||t.push(s)}return t}),[l,i]);return Object(o.useEffect)((function(){if("success"===u&&0!==Object.keys(i).length&&d.length>0){var e=n({type:"error",header:"Connections no longer exist",content:"This job contains connections that were previously deleted. Please remove or replace the connection.",dismissLabel:"Dismiss",actionText:"Fix it",onAction:function(){r(d[0]),e()}});return function(){return e()}}}),[i,d,r,n,u]),null}var T=n(42),M=n(295),N=n(2665),L=n(2678),R=n(2818),D=n(46),A=n(1),_=["children","validateOnBlur","validateOnChange"];function P(e){var t=e.children,n=e.validateOnBlur,r=e.validateOnChange,i=Object(T.a)(e,_),s=Object(o.useState)(!0),c=Object(a.a)(s,2),l=c[0],u=c[1],d=Object(D.b)().speedImprovementsEnabled,b=Object(M.useFormik)(Object(f.a)(Object(f.a)({},i),{},{validateOnBlur:!d&&n,validateOnChange:!d&&r})),p=b.setFieldValue,j=Object(o.useCallback)((function(e,t){var n=arguments.length>3?arguments[3]:void 0;u(arguments.length>2&&void 0!==arguments[2]&&arguments[2]),p(e,t,n)}),[p,u]),h=b.setValues,m=Object(o.useCallback)((function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];u(t),h(e,!!t)}),[h,u]),g=Object(f.a)(Object(f.a)({},b),{},{setFieldValue:j,setValues:m});return Object(o.useEffect)((function(){return function(){localStorage.removeItem("PanelGroup:sizes:".concat(R.b)),N.b.setState(N.a,!0)}}),[]),Object(A.jsx)(M.FormikContext.Provider,{value:g,children:Object(A.jsx)(L.b,{pushHistory:l,children:Object(A.jsx)(w.b,{children:t})})})}var U=n(8),G=n(61),F=n(100),B=n(2819),q=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return F.h([].concat(Object(U.a)(B.d),Object(U.a)(B.b)).reduce((function(a,o){var r=o.name,i=o.validations,s=o.internalValidations,c=o.condition,l=s||i;return e.includes(r)&&l&&(!c||c({jobConfig:t,dag:n}))&&(a[r]=l),a}),{}))},J=function(e,t,n){return F.h(Object.keys(e||{}).reduce((function(o,r){var i=e[r],s=Object(O.f)(i),c=s.form,l={};"DataSource"===i.classification&&Object(O.l)(i.type)&&(l.type=F.i().test("single-streaming-source",(function(){return Object(A.jsx)(G.a,{id:"validation.job.streaming.single",defaultMessage:"Glue Studio currently only supports a single streaming source per job.",description:"Validation error message when a job contains more than one streaming source."})}),(function(){return!Object.entries(e).some((function(e){var t=Object(a.a)(e,2),n=t[0],o=t[1];return n!==r&&"DataSource"===o.classification&&Object(O.l)(o.type)}))})));var u=Object.values(e||{}).some((function(e){return"DataSource"===e.classification&&("Kafka"===e.type||"Kinesis"===e.type)&&e.isCatalog&&e.detectSchema}));"ApplyMapping"===i.type&&u&&(l.type=F.i().test("apply-mapping-incompatibility",(function(){return Object(A.jsx)(G.a,{id:"validation.job.streaming.applyMapping.detectSchema",defaultMessage:"ApplyMapping will not work properly since schema detection is turned on. Please either remove ApplyMapping or turn off schema detection",description:"Alert for Apply Mapping node output schema when detect schema is enabled for streaming jobs."})}),(function(){return!1})));var d=Object(O.d)(i,e),b=Object(O.h)(d);if("CustomCode"!==i.type&&"SqlCode"!==i.type){var p=s.inputsShape.total;if(s.inputsShape.variedTotal){l.inputs=F.b().min(1,(function(){return Object(A.jsx)(G.a,{id:"validation.job.node.parents",defaultMessage:"You must choose atleast 1 parent.",description:"Validation error message when a DAG node has the wrong amount of parents."})}))}else if(!s.inputsShape.collection&&p){var j=i.type,h=i.classification,m=function(){return Object(A.jsx)(G.a,{id:"validation.job.node.parents",defaultMessage:"You need to choose exactly {parents} parent(s) for {type} {classification}.",description:"Validation error message when a DAG node has the wrong amount of parents.",values:{parents:p,type:j,classification:h}})};l.inputs=F.b().min(p,m).max(p,m);for(var g=function(e){b[e].outputsShape.collection&&(l.inputs=F.b().test("collection-output",(function(){return Object(A.jsx)(G.a,{id:"validation.job.node.collectionToSingle",defaultMessage:"Parent node {parent} outputs a collection, but node {name} does not accept a collection.",description:"Validation error message when a DAG node has the wrong amount of parents.",values:{parent:d[e].name,name:i.name}})}),(function(){return!1})))},v=0;v<b.length;v++)g(v)}else for(var x=function(e){var t=b[e];t.outputsShape.collection?t.outputsShape.total&&s.inputsShape.total&&t.outputsShape.total!==s.inputsShape.total?l.inputs=F.b().test("collection-output",(function(){return Object(A.jsx)(G.a,{id:"validation.job.node.collectionLength",defaultMessage:"Parent node {parent} outputs a collection of length {parentLength}, but node {name} accepts a collection of length {nodeLength}.",description:"Validation error message when a DAG node has the wrong amount of parents.",values:{parent:d[e].name,parentLength:t.outputsShape.total,name:i.name,nodeLength:s.inputsShape.total}})}),(function(){return!1})):!t.outputsShape.total&&s.inputsShape.total&&(l.inputs=F.b().test("collection-output",(function(){return Object(A.jsx)(G.a,{id:"validation.job.node.collectionLength",defaultMessage:"Parent node {parent} outputs a collection of variable length, but node {name} accepts a collection of length {nodeLength}.",description:"Validation error message when a DAG node has the wrong amount of parents.",values:{parent:d[e].name,name:i.name,nodeLength:s.inputsShape.total}})}),(function(){return!1}))):l.inputs=F.b().test("collection-output",(function(){return Object(A.jsx)(G.a,{id:"validation.job.node.singleToCollection",defaultMessage:"Parent node {parent} does not output a collection, but node {name} only accepts a collection.",description:"Validation error message when a DAG node has the wrong amount of parents.",values:{parent:d[e].name,name:i.name}})}),(function(){return!1}))},S=0;S<b.length;S++)x(S)}return c.fields&&c.fields.length>0&&Object.values(c.fields||{}).forEach((function(e){var a=e.name,o=e.condition,s=Object(y.c)(i,n)||e.validations||e.internalValidations;o&&!o(r,i,t)||(a?l[a]=s:null!==s&&void 0!==s&&s.fields&&(l=Object(f.a)(Object(f.a)({},l),s.fields)))})),o[r]=F.h(l),o}),{}))},V=function(e){return F.e((function(t){var n=t.dag,a=t.jobConfig,o=Object.keys(a);return F.h(Object(f.a)(Object(f.a)({},Object(f.a)({},"DEVELOPER_MODE"===a.jobMode?{}:{dag:J(n,a,e)})),{},{jobConfig:q(o,a,n),script:F.i()}))}))};function W(e){var t,n=e.jobName,r=e.children,i=e.onSave,l=e.clone,u=function(e){var t=Object(v.b)({JobName:e,IncludeTags:!0}),n=Object(a.a)(t,1)[0],r=Object(v.d)(s.f,"getJob",{},n),i=Object(h.a)(r),l=i[0],u=i.slice(1),d=Object(c.a)(l),b=Object(v.b)({JobName:e}),p=Object(a.a)(b,1)[0],j=Object(v.d)(s.f,"getDag",{},p),y=Object(h.a)(j),x=y[0].Dag,S=y.slice(1),k=Object(v.e)(u,S),C=Object(a.a)(k,1)[0],E=Object(a.a)(u,1)[0].status,w=Object(a.a)(S,1)[0].status,I=d.jobMode,T=d.developerMode,M="error"===w&&!x&&"success"===E,N=M&&"error"===C.status?"success":C.status,L=I&&"NOTEBOOK_MODE"===I?"NOTEBOOK_MODE":M||T||(T||M)&&I&&"VISUAL_MODE"===I?"DEVELOPER_MODE":I||"VISUAL_MODE",R=Object(o.useMemo)((function(){return Object(f.a)(Object(f.a)({},d),{},{jobMode:L})}),[d,L]),D=Object(o.useMemo)((function(){if(x){var e=JSON.parse(x);for(var t in e){var n=e[t],a=Object(m.g)(n);JSON.stringify(a)!==JSON.stringify(n)&&(e[t]=a);var o=Object(O.f)(a).backwardCompatibility;o&&(e[t]=o(a))}return e}}),[x]),A=Object(o.useMemo)((function(){return Object(m.a)(D,R)}),[D,R]),_=Object(o.useMemo)((function(){return Object(g.k)(R,A)}),[A,R]);return{job:Object(o.useMemo)((function(){return{jobConfig:_,dag:A,hasBeenSaved:!0}}),[A,_]),status:N,sequence:C,dagless:M}}(n),d=u.job,b=u.sequence,p=u.status,y="error"===b.status?b.errorMessage:"",x="error"===b.status?null===(t=b.reason)||void 0===t?void 0:t.code:"",C=Object(j.a)();if(l){var E=d.jobConfig.name+"-copy";d={dag:d.dag,jobConfig:Object(f.a)(Object(f.a)({},d.jobConfig),{},{name:E,scriptName:E}),hasBeenSaved:!1,originalScriptName:d.jobConfig.scriptName,originalScriptLocation:d.jobConfig.scriptLocation}}var w=Object(o.useMemo)((function(){return{errorJobDeletedHeading:C.formatMessage({id:"job.error.deleted.heading",defaultMessage:"Your job has been deleted",description:"Heading for the error alert that is shown when a job that is deleted is accessed from the monitoring page."}),errorJobDeletedMessage:C.formatMessage({id:"job.error.deleted.message",defaultMessage:"You can view run history for all job runs but the job details are available only for jobs that still exist.",description:"A message to be displayed in error alert when a job that is deleted is accessed from the monitoring page."})}}),[C]),T=S(),M=Object(o.useMemo)((function(){return V(T)}),[T]);return window.location.href.includes("from=monitoring")?Object(A.jsx)(k.a,{resourceStatus:p,alertHeader:w.errorJobDeletedHeading,alertMessage:w.errorJobDeletedMessage,children:Object(A.jsx)(P,{onSubmit:i,initialValues:d,validationSchema:M,children:Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)(I,{dag:d.dag}),r]})})}):Object(A.jsx)(k.a,{resourceStatus:p,alertHeader:x,alertMessage:y,children:Object(A.jsx)(P,{onSubmit:i,initialValues:d,validationSchema:M,children:Object(A.jsxs)(A.Fragment,{children:[d.dag&&Object(A.jsx)(I,{dag:d.dag}),r]})})})}var z=n(757),H=n(2725),K=n(881),Q=n(206),Y=n(2803),X=n(2734),Z=n(2685),$=n(2881),ee=n(2880),te=n(2879),ne=n(2751),ae=function(e){return e&&Object(O.l)(e)?Q.a.gluestreaming:Q.a.glueetl};function oe(e,t){return"None"===t?null:Object(Z.a)(e,t)}var re=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ee.a,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:te.a,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:$.a,a=(arguments.length>3?arguments[3]:void 0)||{},o=a.connectorSourceName,r=a.connectionSourceName,i=a.connectionSourceType,s=a.connectorSinkName,c=a.connectionSinkType,l=o&&"Connector"===e?function(e,t,n){return Object(f.a)(Object(f.a)({},Object(Z.a)("DataSource","Connector")),{},{connectorName:decodeURIComponent(e),connectionName:decodeURIComponent(t||""),connectionType:n||"",name:e})}(o,r,i):oe("DataSource",e),u=s&&"Connector"===n?function(e,t,n){return Object(f.a)(Object(f.a)({},Object(Z.a)("DataSink","Connector")),{},{connectorName:decodeURIComponent(e),connectionName:decodeURIComponent(t||""),connectionType:n||"",name:e})}(s,void 0,c):oe("DataSink",n),d=oe("Transform",t),b=[l,d,u].filter(Boolean);"None"===n&&"None"!==e&&l&&(b=d?[l,d]:[l]);var p=b.reduce((function(e,t,n){var a="node-".concat(n+1),o="node-".concat(n),r=e[o]?[o]:[],i="DataSource"!==t.classification?Object(f.a)(Object(f.a)({},t),{},{inputs:r}):Object(f.a)({},t);return e[a]=i,e}),{}),j=ae("None"===e?void 0:e);return{dag:p,jobDefaults:Object(f.a)(Object(f.a)({},ne.a),{},{connectionsList:[],command:j})}},ie=function(e){return"pythonShell"===e?z.i:"glueray"===e?z.j:ne.a},se=function(e){return"pythonShell"===e?Q.a.pythonshell:"glueray"===e?Q.a.glueray:ae()},ce=function(e,t,n){return"upload"===e?{script:n}:"pythonShell"===t?{script:"import sys"}:"glueray"===t?{script:"import ray"}:{}},le=function(e,t){return"glueray"===e||"pythonShell"===e?"python-3.9":t&&!t.includes("py")?"scala":"python-3"},ue=function(e,t,n){if(Object(X.c)(e)){var a=Y.c[e],o=a.dag,r=a.config;return{dag:o,jobConfig:Object(f.a)(Object(f.a)({},r),{},{name:t,role:n}),hasBeenSaved:!1}}if(Object(X.a)(e)){var i=Y.a[e],s=i.config,c=i.script;return{dag:{},jobConfig:Object(f.a)(Object(f.a)({},s),{},{name:t,role:n,script:c}),hasBeenSaved:!1}}};function de(e){var t=e.source,n=e.sink,a=e.transform,r=e.children,i=e.onSave,s=e.additionalConfigs,c=Object(j.a)(),l=Object(o.useContext)(K.a).userScript,u=Object(H.a)().defaultRoleArn,d=c.formatMessage({id:"job.defaults.name",defaultMessage:"Untitled job",description:"Default name for a new job being created with Glue Studio."}),b=Object(o.useMemo)((function(){if(!t&&!n||"None"===t&&"None"===n){var e=s||{},o=e.dagless,r=e.jobType,i=e.notebookMode,c=e.notebookName,b=e.role,p=e.kernel,j=e.connectionName,h=e.exampleJob;if(h){var m,g=null!==(m=null!==b&&void 0!==b?b:u)&&void 0!==m?m:"",O=ue(h,d,g);if(O)return O}var v="blank"===o||"upload"===o,y=null===l||void 0===l?void 0:l.content,x=null===l||void 0===l?void 0:l.extension,S="glueray"===p?"glueray":r,k=le(S,x),C="jupyter"===i,E=v?"DEVELOPER_MODE":C?"NOTEBOOK_MODE":"VISUAL_MODE",w=Object(f.a)({role:b,name:c,kernel:p},Y.b);return Object(f.a)({dag:{},jobConfig:Object(f.a)(Object(f.a)(Object(f.a)(Object(f.a)(Object(f.a)({},ie(S)),{},{name:d,command:se(S),jobMode:E},u?{role:u}:{}),C?w:{}),"upload"===o||"pythonShell"===S?{language:k}:{}),j?{connectionsList:[j]}:{}),hasBeenSaved:!1},ce(o,S,y))}var I=re(t,a||"None",n,s);return{dag:I.dag,jobConfig:Object(f.a)(Object(f.a)({name:d},I.jobDefaults),u?{role:u}:{}),hasBeenSaved:!1}}),[t,n,a,s,d,u,null===l||void 0===l?void 0:l.content,null===l||void 0===l?void 0:l.extension]),p=S(),h=Object(o.useMemo)((function(){return V(p)}),[p]);return Object(A.jsx)(P,{onSubmit:i,initialValues:b,validationSchema:h,children:r})}var be=n(2885),pe=(n(2959),n(2872)),fe=n(2770),je=n(48);var he=n(2801),me=n(181),ge=n(57),Oe=n(2802),ve=n(195);function ye(){var e,t=Object(o.useRef)(new Set),n=Object(j.a)(),r=Object(D.a)(),i=r.values,s=r.touched,c=r.dirty,l=r.setFieldValue,d=r.setFieldTouched,b=r.setFieldError,p=r.getFieldMeta,f=Object(je.a)("jobConfig.version"),h=Object(a.a)(f,1)[0].value;!function(){var e,t=Object(D.a)(),n=t.values,a=t.touched,r=t.setFieldValue,i=null===(e=a.jobConfig)||void 0===e?void 0:e.scriptName;Object(o.useEffect)((function(){var e,t,a,o=n.jobConfig.scriptName;(!i||null!==(e=o)&&void 0!==e&&e.includes("Untitled job"))&&(n.hasBeenSaved||(o=n.jobConfig.name),(!n.hasBeenSaved||o.endsWith(".scala")||o.endsWith(".py"))&&(null!==(t=n.jobConfig.language)&&void 0!==t&&t.startsWith("scala")&&!o.endsWith(".scala")?o=o.replace(/\.py$/,"")+".scala":null!==(a=n.jobConfig.language)&&void 0!==a&&a.startsWith("python")&&!o.endsWith(".py")&&(o=o.replace(/\.scala$/,"")+".py")),o!==n.jobConfig.scriptName&&r("jobConfig.scriptName",o))}),[i,r,n.hasBeenSaved,n.jobConfig.language,n.jobConfig.name,n.jobConfig.scriptName])}();var m=Object(o.useMemo)((function(){return i.jobConfig.command===Q.a.gluestreaming||Object(fe.a)(i.dag||{})}),[i.dag,i.jobConfig]),g=i.dag,v=Object(E.a)().pushNotification,y=["0.9","1.0","2.0","3.0"].includes(h),x=["0.9","1.0","2.0"].includes(h),S=["0.9","1.0"].includes(h),k=Object(Oe.b)(i.dag),C=k.requireGlue4,w=k.requireGlue3,I=k.requirePython,T=k.getUniqueReasonsForRequirements;(0,k.getNoLongerRequiredList)(t.current).forEach((function(e){t.current.delete(e)}));var M=Object(o.useMemo)((function(){var e=I&&"python-3"!==i.jobConfig.language?["PYTHON"]:[],n="DEVELOPER_MODE"!==i.jobConfig.jobMode&&C&&y?["GLUE4"]:[],a="DEVELOPER_MODE"!==i.jobConfig.jobMode&&w&&x?["GLUE3"]:[];return[].concat(e,n,a).filter((function(e){return!t.current.has(e)}))}),[I,i.jobConfig.language,i.jobConfig.jobMode,C,y,w,x]);Object(o.useEffect)((function(){if((i.jobConfig.command===Q.a.glueray||I)&&l("jobConfig.language","python-3"),"DEVELOPER_MODE"!==i.jobConfig.jobMode&&C&&l("jobConfig.version","4.0"),"DEVELOPER_MODE"!==i.jobConfig.jobMode&&w&&"2.0"===h&&l("jobConfig.version","4.0"),M.length){t.current=new Set([].concat(Object(U.a)(t.current),Object(U.a)(M)));var e=T(M),n=Object(ve.g)(e),a=M.map((function(e){return Oe.a[e].changesExplanation})),o=Object(ve.g)(a);v({type:"success",content:Object(A.jsx)(me.a,{id:"jobConfig.alert.content.autoUpgrades",defaultMessage:"To support ".concat(n,", ").concat(o,"."),description:"Automatic changes to the job"}),dismissLabel:"Dismiss"})}}),[i.jobConfig.command,l,v,M,T,I,C,i.jobConfig.jobMode,w,h]),Object(o.useEffect)((function(){!u.a.isEnabled("feature-job-details-streaming-glue-2")&&m&&"2.0"===h&&l("jobConfig.version","1.0")}),[l,m,h]),Object(o.useEffect)((function(){var e=ge.h[0].value;i.jobConfig.command!==Q.a.glueray||i.jobConfig.runtime||(l("jobConfig.runtime",e),d("jobConfig.runtime",!0),i.hasBeenSaved&&v({type:"warning",header:"Job will be upgraded to Ray 2.4",content:"When you save your Ray job, it will be automatically upgraded to Ray 2.4 runtime. If you experience compatibility issues with your script, please contact support.",dismissLabel:"Dismiss job upgrade warning notification.",persistNotification:!0}))}),[v,d,l,i.hasBeenSaved,i.jobConfig.command,i.jobConfig.runtime]),Object(o.useEffect)((function(){i.jobConfig.command===Q.a.glueray&&"4.0"!==i.jobConfig.version&&(l("jobConfig.version","4.0"),d("jobConfig.version",!0))}),[d,l,i.jobConfig.command,i.jobConfig.version]),Object(o.useEffect)((function(){var e,t=he.b[0].id;i.jobConfig.command!==Q.a.glueray||he.b.map((function(e){return e.id})).includes(null!==(e=i.jobConfig.workerType)&&void 0!==e?e:"")||(l("jobConfig.workerType",t),d("jobConfig.workerType",!0))}),[d,l,i.jobConfig.command,i.jobConfig.workerType]),Object(o.useEffect)((function(){var e;i.jobConfig.command===Q.a.glueray||i.hasBeenSaved||!s.jobConfig||null!==(e=s.jobConfig)&&void 0!==e&&e.numberOfWorkers||(l("jobConfig.numberOfWorkers",Object(he.d)(i.jobConfig)?5:10),d("jobConfig.numberOfWorkers",!0))}),[d,l,null===(e=s.jobConfig)||void 0===e?void 0:e.numberOfWorkers,i.hasBeenSaved,i.jobConfig,s.jobConfig]),Object(o.useEffect)((function(){var e,t=null===(e=s.jobConfig)||void 0===e?void 0:e.timeout;i.hasBeenSaved||t||(m&&void 0!==i.jobConfig.timeout?l("jobConfig.timeout",void 0):m||i.jobConfig.flexExecution||void 0!==i.jobConfig.timeout&&i.jobConfig.timeout!==z.a?!m&&i.jobConfig.flexExecution&&l("jobConfig.timeout",z.a):l("jobConfig.timeout",z.c))}),[l,d,m,i.jobConfig,i.hasBeenSaved,s]),Object(o.useEffect)((function(){var e;(null===(e=s.jobConfig)||void 0===e?void 0:e.numberOfWorkers)||i.hasBeenSaved||m&&i.jobConfig.numberOfWorkers===z.d&&l("jobConfig.numberOfWorkers",z.f)}),[l,m,i.jobConfig,i.hasBeenSaved,s,c]);var N=Object(o.useMemo)((function(){return Object.values(i.dag||{additionalOptions:{}}).some((function(e){var t=e,n=t.classification,a=t.type,o=t.query,r=t.additionalOptions;return"DataSource"===n&&"Connector"===a&&(!!o||!(null===r||void 0===r||!r.filterPredicate))}))}),[i]);Object(o.useEffect)((function(){var e="jobConfig.bookmark",t=c,a=!p(e).error,o="job-bookmark-disable"!==i.jobConfig.bookmark;m&&o&&l(e,"job-bookmark-disable"),t&&N&&o&&a&&b(e,n.formatMessage({id:"job.details.bookmark.notSupported",defaultMessage:'Supports only "Disable" value due to use of query or filter predicate in Connection node.',description:"Validation error message when job bookmark is enabled for a job that contains a Connection datasource with non-empty query or filter predicate."}))}),[l,d,p,i,c,b,N,n,m]),Object(o.useEffect)((function(){void 0===Object(O.c)(g)&&Object(O.a)(Object(O.b)(g))}),[g]),Object(o.useEffect)((function(){if(2!==Object(O.c)(g))for(var e in g){var t=g[e];if(Object(pe.a)(t)){var a,o="dag.".concat(e,".type");null!==(a=p(o))&&void 0!==a&&a.error||b(o,n.formatMessage({id:"visual.editor.codegenV2.unsupportedTransform",defaultMessage:"This node type is not supported by the classic script generator. Either remove this node, or turn off the classic code generator in the top right side of the Script tab.",description:"Error message for when a codegen v2 dependent node is in the dag when codegen version is at 1."}))}}}),[b,p,g,n]);var L=u.a.isEnabled("feature-enable-autoscale")||u.a.isEnabled("feature-enable-autoscale-ga"),R=u.a.isEnabled("feature-enable-autotune");return Object(o.useEffect)((function(){L&&x&&l("jobConfig.etlAutoScaling",void 0),R&&S&&l("jobConfig.etlAutoTuning",!1)}),[h,L,R,l,S,x]),Object(o.useEffect)((function(){if(u.a.isEnabled("feature-streaming-worker-type")&&i.jobConfig){var e=i.jobConfig,t=e.workerType,n=e.command;"G.025X"===t&&("3.0"!==h&&"4.0"!==h||n!==Q.a.gluestreaming)&&l("jobConfig.workerType","G.1X")}}),[i,h,l]),null}var xe=n(171),Se=n(354),ke=n(403);n(2769);function Ce(){var e=Object(D.a)().values.dag,t=Object(o.useMemo)((function(){return function(e){return Object.entries(e).map((function(e){var t=Object(a.a)(e,2),n=t[0],o=t[1],r=Object(O.f)(o).schema;return Object(A.jsx)(ke.a,{ErrorContent:function(e){return Object(A.jsxs)(xe.default,{type:"error",children:[Object(A.jsx)(G.a,{id:"jobs.edit.".concat(n,".schema-handler-error"),defaultMessage:"Failed to properly load schema handler for node for: {nodeId} | {classification} | {nodeName}",values:{nodeId:n,classification:o.classification,nodeName:o.name}}),Object(A.jsx)(Se.a,{header:"Error details",children:JSON.stringify(e)})]})},children:Object(A.jsx)(r,{nodeId:n,node:o},n)},n)}))}(e||{})}),[e]),n=Object(o.useMemo)((function(){return function(e){return Object.entries(e||{}).map((function(e){var t=Object(a.a)(e,2),n=t[0],o=t[1],r=Object(O.f)(o).dependencies;return r&&Object(A.jsx)(ke.a,{ErrorContent:function(e){return Object(A.jsxs)(xe.default,{type:"error",children:[Object(A.jsx)(G.a,{id:"jobs.edit.".concat(n,".dependency-handler-error"),defaultMessage:"Failed to properly load the node dependency handler for: {nodeId} | {classification} | {nodeName}",values:{nodeId:n,classification:o.classification,nodeName:o.name}}),Object(A.jsx)(Se.a,{header:"Error details",children:JSON.stringify(e)})]})},children:Object(A.jsx)(r,{nodeId:n,node:o},n)},n)}))}(e||{})}),[e]);return Object(A.jsxs)(A.Fragment,{children:[t,n]})}var Ee=n(2682),we=n(2723),Ie=n(377),Te=n(2871),Me=n(910),Ne=n(2671),Le=n(2870),Re=n(2882),De=n(2884);function Ae(e){var t=e.lastSaved,n=e.onJobRun,a=e.forceJobRunsRefresh,o=Object(Ne.b)().isResourcePanelAndPanelLayoutEnabled,i=Object(r.j)().tabId,s=Object(j.a)(),c=Object(ve.c)("glue__graph-editor",{graph:"graph"===i}),l=Object(ve.c)("glue__graph-t2",{details:"graph"!==i});return o?null:Object(A.jsx)("div",{className:"glue__graph-editor-container",children:Object(A.jsxs)("div",{className:c,children:[Object(A.jsx)("div",{className:"glue__graph-t1",role:"region","aria-label":s.formatMessage({id:"jobs.edit.header.ariaLabel",defaultMessage:"Titlebar",description:"Screenreader-only label for the area of the editor containing the title and header actions."}),children:Object(A.jsx)(Re.a,{lastSaved:t,onJobRun:n})}),Object(A.jsxs)("div",{className:l,role:"region","aria-label":s.formatMessage({id:"jobs.edit.tabs.ariaLabel",defaultMessage:"Tabs bar",description:"Screenreader-only label for the area of the editor containing the tabs."}),children:[Object(A.jsxs)("div",{children:[Object(A.jsx)(Me.a,{}),Object(A.jsx)(Le.a,{})]}),Object(A.jsx)(De.a,{forceJobRunsRefresh:a})]})]})})}var _e=n(2699),Pe=n(24),Ue=n(10),Ge=n.n(Ue),Fe=n(877),Be=n(2673),qe=n(5),Je=n(2844),Ve=n(2697),We=n(2579),ze=n(15);var He=n(752),Ke=n(153),Qe=function(){var e=Object(Pe.a)(Ge.a.mark((function e(t){var n,a,o,r,i,c,l;return Ge.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.session,a=t.dagRequest,o=t.language,r=t.sampleRows,null!==n&&void 0!==n&&n.Id&&a){e.next=3;break}return e.abrupt("return",void 0);case 3:return i={SessionId:null===n||void 0===n?void 0:n.Id,Dag:JSON.stringify(a),Language:o,SampleRows:r},Ke.b.addEvent({context:"DataPreviewRunStatement",message:JSON.stringify({sessionId:null===n||void 0===n?void 0:n.Id})}),e.next=7,s.f.runDataPreviewStatement(i).promise();case 7:return c=e.sent,l=c.StatementId,Ke.b.addEvent({context:"DataPreviewRunStatementSuccess",message:JSON.stringify({sessionId:null===n||void 0===n?void 0:n.Id,statementId:l})}),e.abrupt("return",l);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ye=function(){var e=Object(Pe.a)(Ge.a.mark((function e(t){var n,a,o,r,i,c,l;return Ge.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.session,a=t.statementId,null!==n&&void 0!==n&&n.Id&&void 0!==a){e.next=3;break}return e.abrupt("return",void 0);case 3:return o={SessionId:null===n||void 0===n?void 0:n.Id,StatementId:a},e.next=6,s.f.getDataPreviewStatement(o).promise();case 6:return r=e.sent,"AVAILABLE"===(null===(i=r.DataPreviewStatement)||void 0===i?void 0:i.StatementState)&&Ke.b.addEvent({context:"DataPreviewGetStatementSuccess",message:JSON.stringify({sessionId:null===n||void 0===n?void 0:n.Id,statementId:a,statementState:null===i||void 0===i?void 0:i.StatementState,error:null!==i&&void 0!==i&&i.ErrorName?"".concat(null!==(c=null===i||void 0===i?void 0:i.ErrorName)&&void 0!==c?c:""," - ").concat(null!==(l=null===i||void 0===i?void 0:i.ErrorValue)&&void 0!==l?l:""):void 0})}),e.abrupt("return",i);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Xe=n(252),Ze=n(924),$e={statementType:function(e){return[Object(f.a)(Object(f.a)({},Ze.a.sessionId(e)[0]),{},{type:"statement"})]},statementId:function(e,t){return[Object(f.a)(Object(f.a)({},$e.statementType(e)[0]),{},{statementId:t})]},statementGetRequest:function(e,t,n,a){return[Object(f.a)(Object(f.a)({},$e.statementType(e)[0]),{},{dag:t,language:n,sampleRows:a})]}},et=function(e){var t=e.dagCache,n=e.dagRequest,a=e.sampleRows,o=e.language,r=e.session;return Object(He.a)({queryKey:$e.statementGetRequest(null===r||void 0===r?void 0:r.Id,JSON.stringify(t),o,a),retry:3,queryFn:function(){return Qe({session:r,dagRequest:n,language:o,sampleRows:a})},enabled:!(null===r||void 0===r||!r.Id)&&!!n&&Object.keys(n).length>0&&Object(Fe.b)(r)})},tt=function(e){var t=e.session,n=e.statementId;return Object(He.a)({queryKey:$e.statementId(null===t||void 0===t?void 0:t.Id,n),queryFn:function(){return Ye({session:t,statementId:n})},enabled:!(null===t||void 0===t||!t.Id)&&void 0!==n&&Object(Fe.b)(t),refetchInterval:function(e){var t;return!!["WAITING","RUNNING"].includes(null!==(t=null===e||void 0===e?void 0:e.StatementState)&&void 0!==t?t:"")&&Xe.e},refetchIntervalInBackground:!0})},nt=n(2724),at=n(2607),ot=n.n(at),rt=n(925),it=n.n(rt);function st(e){var t,n=e.selectedNodeId,r=e.session,i=Object(Je.a)(1e3),s=i.jobConfig,c=i.dag,l=i.dagErrors,u=function(e){var t=e.nodeId,n=e.dag,a=e.excludeClassifications,r=Object(o.useCallback)((function(){if(!t||!n)return[];var e=new Set,a=[];return function t(o){if(!e.has(o)){e.add(o);var r=n[o];if(r&&r.inputs){var i,s=Array.isArray(r.inputs)?r.inputs:[r.inputs],c=Object(ze.a)(s);try{for(c.s();!(i=c.n()).done;){var l=i.value;t(l),a.push(l)}}catch(u){c.e(u)}finally{c.f()}}}}(t),a}),[n,t]);return{ancestors:Object(o.useMemo)((function(){var e,o;if(!t)return{};var i,s=r(),c={},l=Object(ze.a)(s);try{for(l.s();!(i=l.n()).done;){var u=i.value;c[u]=n[u]}}catch(d){l.e(d)}finally{l.f()}return(s&&s.length>0&&(null===a||void 0===a||!a.includes(null===(e=n[t])||void 0===e?void 0:e.classification))||"DataSource"===(null===(o=n[t])||void 0===o?void 0:o.classification))&&(c[t]=n[t]),c}),[n,a,r,t]),getAncestors:r}}({nodeId:n,dag:c,excludeClassifications:["DataSink"]}),d=u.ancestors,b=Object(o.useMemo)((function(){if(l)return it()(d,ot()(Object.keys(d),Object.keys(l)))}),[d,l]),p=Object(o.useMemo)((function(){return void 0!==b&&Object.keys(b).length>0}),[b]),j=Object(o.useMemo)((function(){var e=Object(nt.b)(Object(Ve.j)(d,s));return!1===Object(We.isEmpty)(e)&&!1===p?e:void 0}),[d,s,p]),h=Object(o.useMemo)((function(){return j&&"object"===typeof j?Object.entries(j).reduce((function(e,t){var n=Object(a.a)(t,2),o=n[0],r=n[1];return Object(f.a)(Object(f.a)({},e),{},Object(qe.a)({},o,"object"===typeof r?Object(f.a)({},Object(We.omit)(r,["name","outputSchemas"])):r))}),{}):c}),[c,j]),m=Be.b.get.sampleRows(),g=(s.language||"python").split("-")[0].toUpperCase(),O=et({dagCache:h,dagRequest:j,sampleRows:m,language:g,session:r}),v=null!==(t=null===O||void 0===O?void 0:O.data)&&void 0!==t?t:void 0,y=tt({session:r,statementId:v});return{data:Object(o.useMemo)((function(){var e=y.data,t=y.isSuccess;if(e&&t&&j&&Object.keys(j).length>0)return Object(Ve.e)(e,j)}),[y,j]),getStatementQueryResult:y,runStatementQueryResult:O,dagErrors:b}}var ct=n(2680),lt=n(1138),ut=n(2709),dt=n(2755),bt=n(2756);var pt=n(29);function ft(){var e,t,n,r,i,s,c=null===(e=(t=Be.b.use).currentSession)||void 0===e?void 0:e.call(t),l=Object(ut.a)(),u=l.newSessionRequest,d=l.isNewSessionRequestValid,b=l.isCurrentSessionValid,p=Object(dt.a)(),f=p.createSession,j=p.isCreatingSession,h=Object(bt.a)(),m=h.stopSession,g=h.isStoppingSession,O=Object(pt.usePreferencesContext)().preferences.dataPreviewAutoStartEnabled,v=void 0===O||O,y=null===(n=(r=Be.b.use).endedSessionManually)||void 0===n?void 0:n.call(r),x=null===(i=(s=Be.b.use).hasSessionError)||void 0===i?void 0:i.call(s),S=function(e){var t=e.debouncePeriod,n=void 0===t?1e3:t,r=Object(o.useState)(Date.now()),i=Object(a.a)(r,2),s=i[0],c=i[1];return Object(o.useEffect)((function(){var e=Object(We.debounce)((function(){c(Date.now())}),n);return window.addEventListener("mousemove",e),window.addEventListener("keydown",e),function(){window.removeEventListener("mousemove",e),window.removeEventListener("keydown",e)}}),[n]),{lastActivityTime:s}}({debouncePeriod:1e3}),k=S.lastActivityTime,C=Object(o.useMemo)((function(){return!(!v&&!c||!v&&!d||!v&&Object(Fe.f)(c)||j||g||Object(Fe.a)(c)||x||!c&&y)&&!(!d||!(v&&!c||v&&(Object(Fe.f)(c)||Object(Fe.e)(c))&&new Date(k)>(null!==c&&void 0!==c&&c.CompletedOn?new Date(null===c||void 0===c?void 0:c.CompletedOn):Date.now())||u&&!b))}),[c,x,v,j,b,d,g,u,k,y]),E=Object(o.useCallback)(function(){var e=Object(Pe.a)(Ge.a.mark((function e(t){var n;return Ge.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(d&&!j&&!g){e.next=2;break}return e.abrupt("return",void 0);case 2:if(!(c&&null!==c&&void 0!==c&&c.Id&&Object(Fe.b)(c))){e.next=5;break}return e.next=5,m({Id:null===c||void 0===c?void 0:c.Id});case 5:return e.next=7,f({request:t});case 7:return n=e.sent,e.abrupt("return",n);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[d,c,f,m,j,g]);return{shouldRestart:C,restartSession:E}}function jt(){var e,t,n,r=Object(ut.a)().newSessionRequest,i=ft(),s=i.shouldRestart,c=i.restartSession,l=null===(e=(t=Be.b.useTracked).currentSession)||void 0===e?void 0:e.call(t),u=Object(lt.a)().sessionId,d=Object(Fe.i)(null===l||void 0===l?void 0:l.Id),b=d.data,p=d.isError,j=d.isSuccess,h=d.refetch,m=d.error,g=Object(o.useContext)(w.a).selectedNodeId,O=st({selectedNodeId:g,session:l}),v=O.data,y=O.getStatementQueryResult,x=y.isLoading,S=y.data,k=y.isSuccess,C=y.error,E=y.isError,I=O.runStatementQueryResult,T=I.isLoading,M=I.error,N=I.isError,L=I.refetch,R=O.dagErrors,D=Object(ct.a)(null!==g&&void 0!==g?g:""),A=Object(a.a)(D,2),_=A[0],P=A[1],U=Object(je.a)("dag.".concat(null!==g&&void 0!==g?g:"",".outputSchemas")),G=Object(a.a)(U,3),F=G[1].value,B=G[2].setValue,q=Object(o.useState)(!1),J=Object(a.a)(q,2),V=J[0],W=J[1],z=null===Be.b||void 0===Be.b||null===(n=Be.b.useStore)||void 0===n?void 0:n.persist,H=Object(o.useMemo)((function(){return Object(We.isEqual)(b,l)}),[b,l]);Object(o.useEffect)((function(){u&&z&&(z.setOptions({name:"".concat(Be.a,"-").concat(u)}),z.rehydrate(),W(!0))}),[z,u]),Object(o.useEffect)((function(){if(V){var e,t,n,a,o,r;if(b&&j&&!H)null===(e=(t=Be.b.set).currentSession)||void 0===e||e.call(t,b),null===(n=(a=Be.b.set).refetchSession)||void 0===n||n.call(a,h),Object(Fe.d)(b)||Be.b.set.resetSessionAwsError();if(p&&m)null===(o=(r=Be.b.set).sessionAwsError)||void 0===o||o.call(r,m)}}),[b,m,p,j,l,H,h,V]),Object(o.useEffect)((function(){var e=function(){var e=Object(Pe.a)(Ge.a.mark((function e(){var t,n,a,o,i;return Ge.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!V||!s){e.next=12;break}return e.prev=1,Be.b.set.resetErrors(),e.next=5,c(r);case 5:a=e.sent,null===(t=(n=Be.b.set).currentSession)||void 0===t||t.call(n,a),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),null===(o=(i=Be.b.set).sessionAwsError)||void 0===o||o.call(i,e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}();e()}),[c,r,s,h,V]);var K=Object(o.useMemo)((function(){if(V){var e,t,n=null===(e=(t=Be.b.get).dagErrors)||void 0===e?void 0:e.call(t);return Object(We.isEqual)(n,R)}}),[R,V]),Q=Object(o.useMemo)((function(){if(V){var e,t,n=null===(e=(t=Be.b.get).dataPreviewStatement)||void 0===e?void 0:e.call(t);return Object(We.isEqual)(v,n)}}),[v,V]);Object(o.useEffect)((function(){if(V){var e,t,n,a,o,r,i,s,c,u,d,b,p,j,m,g,O,y,w,I,D=null===(e=(t=Be.b.get).statementStatus)||void 0===e?void 0:e.call(t),A=null===(n=(a=Be.b.get).statementAwsError)||void 0===n?void 0:n.call(a),_=null===(o=(r=Be.b.get).hasStatementError)||void 0===o?void 0:o.call(r);if(!K)null===(i=(s=Be.b.set).dagErrors)||void 0===i||i.call(s,R);if("ERROR"!==D&&(E||N)){var P,U,G,F,B,q;if(null===(P=(U=Be.b.set).statementStatus)||void 0===P||P.call(U,"ERROR"),E&&C&&A!==C)null===(G=(F=Be.b.set).statementAwsError)||void 0===G||G.call(F,C),Ke.b.addError({context:"DataPreviewGetStatement",error:C,message:C.message});if(N&&M&&A!==M)h(),null===(B=(q=Be.b.set).statementAwsError)||void 0===B||B.call(q,M),Ke.b.addError({context:"DataPreviewRunStatement",error:M,message:M.message})}if("RUNNING"!==D&&(x||T))null===(c=(u=Be.b.set).statementStatus)||void 0===c||c.call(u,"RUNNING"),Be.b.set.resetStatementAwsError(),Be.b.set.resetDataPreviewError();if(k&&S&&D!==(null===S||void 0===S?void 0:S.StatementState))null===(d=(b=Be.b.set).statementStatus)||void 0===d||d.call(b,null===S||void 0===S?void 0:S.StatementState);if(v&&!Q)if(null===(p=(j=Be.b.set).dataPreviewStatement)||void 0===p||p.call(j,v),null===(m=(g=Be.b.set).refetchStatement)||void 0===m||m.call(g,L),_)Ke.b.addError({context:"DataPreviewStatementError",error:Object(f.a)(Object(f.a)({},v.error),{},{sessionId:null===l||void 0===l?void 0:l.Id}),message:"".concat(null!==(O=null===v||void 0===v||null===(y=v.error)||void 0===y?void 0:y.errorName)&&void 0!==O?O:""," - ").concat(null!==(w=null===v||void 0===v||null===(I=v.error)||void 0===I?void 0:I.errorValue)&&void 0!==w?w:"")})}}),[S,v,E,N,x,T,k,R,C,M,Q,K,L,h,V,null===l||void 0===l?void 0:l.Id]);var Y=Object(o.useMemo)((function(){var e,t=null===v||void 0===v||null===(e=v.schemas)||void 0===e?void 0:e[null!==g&&void 0!==g?g:""];return t&&Object(We.isEqual)(_,t)}),[_,null===v||void 0===v?void 0:v.schemas,g]),X=Object(o.useMemo)((function(){var e,t=null===v||void 0===v||null===(e=v.schemas)||void 0===e?void 0:e[null!==g&&void 0!==g?g:""];return t&&Object(We.isEqual)(F,t)}),[F,null===v||void 0===v?void 0:v.schemas,g]);return Object(o.useEffect)((function(){if(V&&g&&null!==v&&void 0!==v&&v.schemas&&Be.b.get.autoInferSchema()){var e=null===v||void 0===v?void 0:v.schemas[null!==g&&void 0!==g?g:""];e&&!Y&&P(e),e&&!X&&B(e)}}),[g,null===v||void 0===v?void 0:v.schemas,Y,P,B,X,V]),null}var ht=function(e){var t=e.children;return Object(A.jsx)(we.a,{children:t})};function mt(e){var t=e.lastSaved,n=Object(D.a)(),r=n.values,i=n.setFieldValue,s=Object(o.useContext)(L.a),c=s.history,l=s.setAlertForParquet,d=Object(_e.a)(Te.a),b=Object(a.a)(d,3),p=b[0],f=b[1],j=b[2],h=Object(o.useState)(),m=Object(a.a)(h,2),g=m[0],O=m[1],v=Object(Ie.b)(),y=Object(N.b)((function(e){return e})),x=y.setShowRestoreAlert,S=y.showRestoreAlert,k=Object(o.useCallback)((function(){return O(Symbol())}),[O]),C="VISUAL_MODE"===r.jobConfig.jobMode,E=u.a.isEnabled("feature-datapreview-v2")&&C;Object(o.useEffect)((function(){return function(){j()}}),[j]),Object(o.useEffect)((function(){null!==c&&void 0!==c&&c.future.length||null!==c&&void 0!==c&&c.past.length||!p||S||x(!0)}),[]),Object(o.useEffect)((function(){(null!==c&&void 0!==c&&c.future.length||null!==c&&void 0!==c&&c.past.length)&&f(c)}),[f,c,j]),Object(o.useEffect)((function(){t&&(j(),x(!1),l(!1))}),[t,j,x,l]),Object(o.useEffect)((function(){var e=r.dag,t=r.jobConfig,n=Object(fe.a)(e||{});["DEVELOPER_MODE","NOTEBOOK_MODE"].includes(t.jobMode)||(n&&t.command!==Q.a.gluestreaming?i("jobConfig.command",Q.a.gluestreaming,!1):n||t.command!==Q.a.gluestreaming||i("jobConfig.command",Q.a.glueetl,!1))}),[r,i]),Object(o.useEffect)((function(){return function(){v.invalidateQueries(["notebookState"])}}),[]);var w=Object(o.useCallback)((function(){for(var e=Object(We.pickBy)(sessionStorage,(function(e,t){return t.startsWith(Be.a)})),t=0,n=Object.keys(e);t<n.length;t++){var a=n[t];sessionStorage.removeItem(a)}window.location.reload()}),[]);return Object(A.jsxs)(ht,{children:[Object(A.jsx)(ye,{}),Object(A.jsx)(Ce,{}),Object(A.jsxs)(Ee.a,{children:[E&&Object(A.jsx)(ke.a,{ErrorContent:function(e){var t;return Object(A.jsxs)(xe.default,{type:"error",buttonText:"Restart",onButtonClick:w,statusIconAriaLabel:"Error icon for running data preview error message",children:[Object(A.jsx)(G.a,{id:"datapreview-manager.error.message",defaultMessage:"An error occurred while running data preview. Ensure your job has been saved and click the restart button to reload the page"}),e.error instanceof DOMException&&"QuotaExceededError"===(null===(t=e.error)||void 0===t?void 0:t.name)&&Object(A.jsx)(G.a,{id:"datapreview-manager.error.message",defaultMessage:"This error occurs when working with a large dataset for data preview. To resolve this error, you can decrease the number of sample rows in the preferences or select a smaller dataset in your source. "}),Object(A.jsx)(Se.a,{headerText:"Error details",children:JSON.stringify(e)})]})},children:Object(A.jsx)(jt,{})}),Object(A.jsx)(R.a,{lastSaved:t,onJobRun:k,forceJobRunsRefresh:g}),Object(A.jsx)(Ae,{lastSaved:t,onJobRun:k,forceJobRunsRefresh:g})]})]})}var gt,Ot,vt=n(19),yt=n(20),xt=n(39),St=n(40),kt=function(e){Object(xt.a)(n,e);var t=Object(St.a)(n);function n(){return Object(vt.a)(this,n),t.apply(this,arguments)}return Object(yt.a)(n,[{key:"render",value:function(){return Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)("div",{className:"recipe-context-portal"}),this.props.children]})}}]),n}(o.Component);!function(e){e[e.INIT=0]="INIT",e[e.APPLY_STEP=1]="APPLY_STEP"}(gt||(gt={})),function(e){e.Uninitialized="UNINITIALIZED",e.ProvisionCompute="PROVISION_COMPUTE",e.InitiateSession="INITIATE_SESSION",e.RetrieveDataSample="RETRIEVE_DATA_SAMPLE",e.PrepareDataGrid="PREPARE_DATA_GRID",e.GenerateDataStatistics="GENERATE_DATA_STATISTICS",e.ValidateRecipeSteps="VALIDATE_RECIPE_STEPS",e.Ready="READY"}(Ot||(Ot={}));var Ct=n(526),Et=Object(Ct.create)((function(e){return{dataFrameContext:void 0,setDataFrameContext:function(t){return e((function(){return{dataFrameContext:t}}))},sessionLoadStatus:void 0,setSessionLoadStatus:function(t){return e((function(){return{sessionLoadStatus:t}}))},secondaryDatasets:[],setSecondaryDatasets:function(t){return e((function(){return{secondaryDatasets:t}}))},sendRecipeActionLoading:!1,setSendRecipeActionLoading:function(t){return e((function(){return{sendRecipeActionLoading:t}}))},sessionRoleArn:void 0,setSessionRoleArn:function(t){return e((function(){return{sessionRoleArn:t}}))},sessionStepIndex:0,setSessionStepIndex:function(t){return e((function(){return{sessionStepIndex:t}}))},steps:[],setSteps:function(t){return e((function(){return{steps:t}}))},userPreferences:{},setUserPreferences:function(t){return e((function(e){return Object(f.a)(Object(f.a)({},e),t)}))}}})),wt=(Et.getState(),n(2741)),It=n(136),Tt=n.n(It);window.DataRecipeServices={DataBrew:s.e,IAM:s.l,IAMAdmin:s.k,STS:s.u,KMS:s.m,SecretsManager:s.t};var Mt=function(e){var t=e.children,n=Object(N.b)((function(e){return e.selectedNodeId})),a=Et((function(e){return{dataFrameContext:e.dataFrameContext,sessionLoadStatus:e.sessionLoadStatus,secondaryDatasets:e.secondaryDatasets,sendRecipeActionLoading:e.sendRecipeActionLoading,sessionRoleArn:e.sessionRoleArn,sessionStepIndex:e.sessionStepIndex,steps:e.steps,userPreferences:e.userPreferences}}),Tt.a),o=a.dataFrameContext,r=a.sessionLoadStatus,i=a.sessionStepIndex,s=a.steps,c=a.sendRecipeActionLoading,l=a.secondaryDatasets,u=a.userPreferences,d=a.sessionRoleArn;return Object(A.jsx)(kt,{instanceId:n,unsupportedSteps:[wt.h.Join,wt.h.Union,wt.h.Pivot,wt.h.GroupBy],dataFrameContext:o,isSessionResultLoading:c,sessionStepIndex:i,steps:s,sessionLoadStatus:r,userPreferencesHandler:function(e){console.log("userPreferencesHandler",e),"GET_USER_PREFERENCE"===e.type||e.type},userPreferences:u,secondaryDatasets:l,loadSecondaryDataFramesHandler:function(e){console.log("loadSecondaryDataFramesHandler",e)},updateStepsHandler:function(e){console.log("updateStepsHandler",e),e.payload.operation},sessionRoleArn:d,getAdvancedDataTypeHandler:function(e){console.log("getAdvancedDataTypeHandler",e)},recipeStepsValidatedHandler:function(e){console.log("recipeStepsValidatedHandler",e)},stepsValidationErrorHandler:function(e){console.log("stepsValidationErrorHandler",e),e.payload},stepsValidationUpdateHandler:function(e){console.log("stepsValidationUpdateHandler",e)},getDuplicateRowsCountHandler:function(e){console.log("getDuplicateRowsCountHandler",e)},getMoreColumnsHandler:function(e){console.log("getMoreColumnsHandler",e)},notificationsHandler:function(e){console.log("notificationsHandler",e)},previewStepHandler:function(e){console.log("previewStepHandler",e)},toggleToolsHandler:function(e){console.log("toggleToolsHandler",e)},initLogicalFunctionEditStateHandler:function(e){console.log("initLogicalFunctionEditStateHandler",e)},children:t})},Nt=function(e){var t=e.children;return Object(A.jsx)(we.a,{children:t})};function Lt(e){var t=e.lastSaved,n=Object(o.useMemo)((function(){return Object(A.jsx)(mt,{lastSaved:t})}),[t]);return Object(A.jsxs)(Nt,{children:[Object(A.jsx)(ye,{}),Object(A.jsx)(Ce,{}),Object(A.jsx)(Ee.a,{children:u.a.isEnabled("feature-transform-databrew-recipe-p2")?Object(A.jsx)(Mt,{children:n}):n})]})}t.default=function(){var e=Object(r.h)(),t=Object(i.c)(),n=t.jobName,f=t.originalJobName,j=t.source,h=t.connectorSourceName,m=t.sink,g=t.transform,O=t.tabId,v=t.dagless,y=t.jobType,x=t.notebookMode,S=t.notebookName,k=t.role,C=t.kernel,E=t.connectionSourceName,w=t.connectorSinkName,I=t.connectionSinkType,T=t.connectionType,M=t.connectionName,L=t.exampleJob,R=Object(r.k)("/editor/:action/"),D=Object(r.k)(b.b.jobSourceWithConnectionTemplate),_="clone"===(null===R||void 0===R?void 0:R.params.action),P=Object(be.a)(!n||_),U=Object(a.a)(P,3),G=U[0],F=U[2].lastSaved,B=Object(N.b)((function(e){return e.setSaving}));Object(p.a)();var q=Object(o.useCallback)((function(e,t){s.f.getJob({JobName:e}).promise().then((function(e){var t,n,a;return{ModifiedTime:(null===e||void 0===e||null===(t=e.Job)||void 0===t?void 0:t.LastModifiedOn)||NaN,ModifiedPythonPath:(null===e||void 0===e||null===(n=e.Job)||void 0===n||null===(a=n.DefaultArguments)||void 0===a?void 0:a[c.e.pythonPath])||null}})).then((function(e){return t(e)}))}),[]),J=Object(o.useCallback)((function(t,n){var a=n.setFieldValue;G(t).then((function(n){if(n){if(t.jobConfig.sourceControlDetails){Object(l.g)("JobWithSourceControl",t,(function(e){var t;return"NONE"!==(null===(t=e.jobConfig.sourceControlDetails)||void 0===t?void 0:t.Provider)}))}q(t.jobConfig.name,(function(e){var n=e.ModifiedTime,o=e.ModifiedPythonPath;a("jobConfig.lastModified",n),u.a.isEnabled("feature-transform-databrew-recipe")&&"VISUAL_MODE"===t.jobConfig.jobMode?a("jobConfig.pythonPath",Object(d.d)(o||"")):a("jobConfig.pythonPath",o)})),t.hasBeenSaved||(a("hasBeenSaved",!0),e.push("/editor/job/".concat(Object(i.a)(t.jobConfig.name),"/").concat(null!==O&&void 0!==O?O:"")))}})).finally((function(){B(!1)}))}),[e,G,O,q,B]);Object(o.useEffect)((function(){if(v&&!y){var t="undefined"===O?"script":O;e.replace("/editor/dagless/".concat(v,"/jobType/spark/").concat(null!==t&&void 0!==t?t:""))}}),[v,y,O,e]);var V=Object(o.useState)(n),z=Object(a.a)(V,1)[0],H=Object(o.useState)(f),K=Object(a.a)(H,1)[0],Q=Object(o.useMemo)((function(){return Object(A.jsx)(Lt,{lastSaved:F})}),[F]);return Object(o.useMemo)((function(){return z?Object(A.jsx)(W,{jobName:z,onSave:J,clone:!1,children:Q}):K?Object(A.jsx)(W,{jobName:K,onSave:J,clone:!0,children:Q}):h&&w?Object(A.jsx)(de,{source:"Connector",sink:"Connector",additionalConfigs:{connectorSourceName:h,connectionSourceName:E,connectionSourceType:T,connectorSinkName:w,connectionSinkType:I},onSave:J,children:Q}):h?Object(A.jsx)(de,{source:"Connector",additionalConfigs:{connectorSourceName:h,connectionSourceName:E,connectionSourceType:T},sink:D?"None":m,onSave:J,children:Q}):w?Object(A.jsx)(de,{source:j,additionalConfigs:{connectorSinkName:w,connectionSinkType:I},sink:"Connector",onSave:J,children:Q}):x?Object(A.jsx)(de,{source:j,sink:m,onSave:J,additionalConfigs:{notebookMode:x,notebookName:S,role:k,kernel:C},children:Q}):M?Object(A.jsx)(de,{source:j,sink:m,onSave:J,additionalConfigs:{dagless:v,jobType:y,connectionName:M},children:Q}):L?Object(A.jsx)(de,{source:j,sink:m,onSave:J,additionalConfigs:{exampleJob:L,role:k},children:Q}):Object(A.jsx)(de,{source:j,transform:g,sink:m,onSave:J,additionalConfigs:{dagless:v,jobType:y},children:Q})}),[M,I,E,T,w,h,Q,v,J,y,x,S,k,D,m,j,g,K,z,C,L])}},2675:function(e,t,n){"use strict";n.d(t,"h",(function(){return s})),n.d(t,"a",(function(){return c})),n.d(t,"d",(function(){return l})),n.d(t,"e",(function(){return u})),n.d(t,"g",(function(){return p})),n.d(t,"i",(function(){return f})),n.d(t,"c",(function(){return h})),n.d(t,"f",(function(){return m})),n.d(t,"b",(function(){return g}));var a=n(753),o=n(2583),r=n.n(o),i=n(30),s=function(e){var t,n=(null===e||void 0===e||null===(t=e.IntermediateAggregation)||void 0===t?void 0:t.FurtherAggreagtions)||{};return 0===Object.keys(n).length},c=function(e){return Number(e/.44)},l=function(e){var t=d(e);return b(t)},u=function(e){var t=Math.ceil(d(e));return b(t,0)},d=function(e){return Number(e.toFixed(2))},b=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;if(0===t)return r()(e).format("0,0");var n="0".repeat(t);return r()(e).format("0,0.".concat(n))},p=function(){return new Date(Date.UTC(2021,2,26))},f=function(e){return j(e)<p()},j=function(e){return new Date(Date.UTC(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds()))},h=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e)return"-";var n=e.replace(/\s/,"T");t&&!e.toUpperCase().endsWith("Z")&&(n+="Z");var o=new Date(n),r=o.getTimezoneOffset(),s=o.getTime()+6e4*r;return i.a.isEnabled("feature-job-monitoring-updates")?Object(a.a)("yyyy/MM/dd HH:mm:ss")(s):Object(a.a)("MM/dd/yyyy HH:mm:ss")(o.getTime())},m=function(e,t){return e.map((function(e){var n,a;return(null===(n=e[t])||void 0===n||null===(a=n.LeafAggregation)||void 0===a?void 0:a.Value)||0}))},g=function(e,t){return t.map((function(t){var n,a;return(null===(n=e[t])||void 0===n||null===(a=n.IntermediateAggregation)||void 0===a?void 0:a.FurtherAggreagtions)||{}}))}},2681:function(e,t,n){"use strict";n.d(t,"b",(function(){return c})),n.d(t,"a",(function(){return l})),n.d(t,"c",(function(){return u})),n.d(t,"d",(function(){return d})),n.d(t,"e",(function(){return b})),n.d(t,"f",(function(){return p}));var a=n(5),o=n(2),r=n(0),i=n.n(r),s=n(74),c="Spark UI",l="Write Spark UI logs to Amazon S3.",u="Spark UI logging and monitoring configuration",d="Spark UI logs path",b=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,s=i.a.useState(t),c=Object(o.a)(s,2),l=c[0],u=c[1];return{value:l,handleChange:i.a.useCallback((function(t){var o=r?r(t):Object(a.a)({},e,t);n(o),u(t)}),[e,n,r])}},p=function(e){return{updateFlags:Object(r.useCallback)((function(t,n){var o;e((o={},Object(a.a)(o,s.a.SparkUILegacyPath,t.toString()),Object(a.a)(o,s.a.SparkUIStandardPath,n.toString()),o))}),[e])}}},2684:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var a=n(3),o=n(0),r=n(874),i=n(76),s=n(309),c="glue.amazonaws.com",l=function(e){return"string"===typeof(null===e||void 0===e?void 0:e.Service)?e.Service===c:!!Array.isArray(null===e||void 0===e?void 0:e.Service)&&(null===e||void 0===e?void 0:e.Service.includes(c))},u=function(e){var t=e.AssumeRolePolicyDocument;return!!t&&JSON.parse(decodeURIComponent(t)).Statement.map((function(e){return e.Principal})).some(l)},d=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=Object(r.a)(["listRoles"],(function(e){var t=e.pageParam,n=void 0===t?void 0:t;return i.l.listRoles({MaxItems:1e3,Marker:n}).promise()}),{getNextPageParam:function(e){return e.Marker}}),n=Object(s.a)(t,"Roles"),c=Object(o.useMemo)((function(){var t,a=n;return e&&(a=null===n||void 0===n?void 0:n.filter(u)),null===(t=a)||void 0===t?void 0:t.map((function(e){return{id:e.Arn,label:e.RoleName,description:e.Description||"No description available."}}))}),[n,e]);return Object(a.a)({roles:c||[],loading:t.isLoading,refresh:t.refetch},t)}},2687:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var a=n(2),o=n(2727),r=n(0),i=n(82),s=n(351),c=n(61),l=n(1),u=new Set(["STOPPING","STOPPED","SUCCEEDED","FAILED","TIMEOUT","ERROR"]),d=function(e){return!(!e||u.has(e))};t.b=function(e){var t=e.jobName,n=e.jobRunId,u=e.jobRunState,b=e.onActionComplete,p=void 0===b?function(){}:b,f=e.variant,j=void 0===f?"normal":f,h=e.hideWhenDisabled,m=void 0!==h&&h,g=Object(o.a)(),O=Object(a.a)(g,2),v=O[0],y=O[1].status,x=Object(s.a)(),S=!t||!n||!d(u),k=!S||!m,C=Object(r.useMemo)((function(){return x.formatMessage({id:"job.runs.stop.label",defaultMessage:"Stop job run for job {jobName} with ID {jobRunId}",description:"Label for button to stop a job run."},{jobName:t||"unknown",jobRunId:n||"unknown"})}),[x,t,n]),E=Object(r.useCallback)((function(){t&&n&&(S||v({JobName:t,JobRunIds:[n]}))}),[t,n,v,S]);return Object(r.useEffect)((function(){"error"!==y&&"success"!==y||p("error"===y)}),[y,p]),Object(l.jsx)(l.Fragment,{children:k&&Object(l.jsx)(i.default,{formAction:"none",ariaLabel:C,variant:j,disabled:S,onClick:E,children:Object(l.jsx)(c.a,{id:"jobs.run.stop.button",defaultMessage:"Stop job run",description:"Text inside button to stop a job run."})})})}},2692:function(e,t,n){"use strict";n.d(t,"b",(function(){return l})),n.d(t,"a",(function(){return h})),n.d(t,"c",(function(){return m})),n.d(t,"d",(function(){return g}));var a=n(29),o=n(1277),r=n.n(o),i=n(58),s=n(14),c=(new r.a({region:s.c,credentials:i.a}),"/aws-glue/jobs"),l=function(e){return"0.9"===e||"1.0"===e||!e},u="".concat(Object(a.getPartitionedBaseUrl)(!0,!0),"cloudwatch/home"),d=function(e){return"log"===e?"logs-v2":e},b=function(e){var t=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0,a=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})["--continuous-log-logGroup"];return a?"".concat(a).concat(t?"-".concat(t):""):"".concat(n,"/").concat(d(e)).concat(t?"-".concat(t):"")},p=function(e,t,n){var a=e.LogGroupName,o=e.Id,r=e.SecurityConfiguration,i=n["--continuous-log-logStreamPrefix"]||o;return"log"!==t?"#logStream:group=".concat(a,"/").concat(d(t),";prefix=").concat(o,";streamFilter=typeLogStreamPrefix"):"#logStream:group=".concat(b(t,n,r,c),";prefix=").concat(i,";streamFilter=typeLogStreamPrefix")},f=function(e,t){var n=e.LogGroupName,a=e.Id;return"#logEventViewer:group=".concat(n,"/").concat(t,";stream=").concat(a)},j={log:function(e,t){return function(e){var t;return null===(t=e.LogGroupName)||void 0===t?void 0:t.includes("python-jobs")}(e)?f(e,"output"):p(e,"log",t)},error:function(e,t){return l(e.GlueVersion)?f(e,"error"):p(e,"error",t)},output:function(e,t){return l(e.GlueVersion)?f(e,"output"):p(e,"output",t)},jobInsights:function(e,t){return l(e.GlueVersion)?"#logStream:group=".concat(e.LogGroupName,"/").concat(d("log"),";prefix=").concat(e.Id,"-job-insights;streamFilter=typeLogStreamPrefix"):"#logStream:group=".concat(b("log",t,null===e||void 0===e?void 0:e.SecurityConfiguration,c),";prefix=").concat(e.Id,"-job-insights;streamFilter=typeLogStreamPrefix")}},h=function(e,t){var n,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return(null===e||void 0===e||null===(n=e.WorkerType)||void 0===n?void 0:n.includes("Z."))?m(e):"".concat(u).concat(j[t](e,a))},m=function(e){return"".concat(u,"?region=").concat(s.c,"#logsV2:log-groups/log-group/$252Faws-glue$252Fray$252Fjobs$252Fscript-log/log-events/").concat(null===e||void 0===e?void 0:e.JobName,"-").concat(null===e||void 0===e?void 0:e.Id)},g=function(e,t){return"".concat(u,"?region=").concat(s.c,"#logsV2:log-groups/log-group/").concat(e.replaceAll("/","$252F"),"/log-events/").concat(t)}},2693:function(e,t,n){"use strict";n.d(t,"b",(function(){return b})),n.d(t,"a",(function(){return p}));var a=n(29),o=n(2705),r={noDataTitle:{id:"monitoring.widget.states.no-data-title",defaultMessage:"No data to display",description:"Title text to show when a widget has no data available due to selected date range."},noDataDescription:{id:"monitoring.widget.states.no-data-description",defaultMessage:"The selected date range does not have any job runs.",description:"Extra text to show when a widget has no data due to selected datae range."},noMatchesDescription:{id:"monitoring.widget.states.no-match-title",defaultMessage:"No matches",description:"Title text to show when the job runs table has no data matching the current filter."},noMatchClearFilters:{id:"monitoring.widget.states.no-match-cta",defaultMessage:"Clear filters",description:"Button to clear the current filter for the job runs table when no match have been found."}},i={Id:{id:"jobruns.propertyfilteringlabels.Id",defaultMessage:"Id",description:'Property filtering label for job run key "Id"'},Attempt:{id:"jobruns.propertyfilteringlabels.Attempt",defaultMessage:"Attempt",description:'Property filtering label for job run key "Attempt"'},PreviousRunId:{id:"jobruns.propertyfilteringlabels.PreviousRunId",defaultMessage:"Previous run id",description:'Property filtering label for job run key "PreviousRunId"'},TriggerName:{id:"jobruns.propertyfilteringlabels.TriggerName",defaultMessage:"Trigger name",description:'Property filtering label for job run key "TriggerName"'},JobName:{id:"jobruns.propertyfilteringlabels.JobName",defaultMessage:"Job name",description:'Property filtering label for job run key "JobName"'},StartedOn:{id:"jobruns.propertyfilteringlabels.StartedOn",defaultMessage:"Started on",description:'Property filtering label for job run key "StartedOn"'},LastModifiedOn:{id:"jobruns.propertyfilteringlabels.LastModifiedOn",defaultMessage:"Last modified on",description:'Property filtering label for job run key "LastModifiedOn"'},CompletedOn:{id:"jobruns.propertyfilteringlabels.CompletedOn",defaultMessage:"Completed on",description:'Property filtering label for job run key "CompletedOn"'},JobRunState:{id:"jobruns.propertyfilteringlabels.JobRunState",defaultMessage:"Job run state",description:'Property filtering label for job run key "JobRunState"'},ExecutionArguments:{id:"jobruns.propertyfilteringlabels.ExecutionArguments",defaultMessage:"Execution arguments",description:'Property filtering label for job run key "ExecutionArguments"'},Arguments:{id:"jobruns.propertyfilteringlabels.Arguments",defaultMessage:"Arguments",description:'Property filtering label for job run key "Arguments"'},ErrorMessage:{id:"jobruns.propertyfilteringlabels.ErrorMessage",defaultMessage:"Error message",description:'Property filtering label for job run key "ErrorMessage"'},PredecessorRuns:{id:"jobruns.propertyfilteringlabels.PredecessorRuns",defaultMessage:"Predecessor runs",description:'Property filtering label for job run key "PredecessorRuns"'},AllocatedCapacity:{id:"jobruns.propertyfilteringlabels.AllocatedCapacity",defaultMessage:"Allocated capacity",description:'Property filtering label for job run key "AllocatedCapacity"'},ExecutionTime:{id:"jobruns.propertyfilteringlabels.ExecutionTime",defaultMessage:"Execution time",description:'Property filtering label for job run key "ExecutionTime"'},Timeout:{id:"jobruns.propertyfilteringlabels.Timeout",defaultMessage:"Timeout",description:'Property filtering label for job run key "Timeout"'},MaxCapacity:{id:"jobruns.propertyfilteringlabels.MaxCapacity",defaultMessage:"Max capacity",description:'Property filtering label for job run key "MaxCapacity"'},WorkerType:{id:"jobruns.propertyfilteringlabels.WorkerType",defaultMessage:"Worker type",description:'Property filtering label for job run key "WorkerType"'},NumberOfWorkers:{id:"jobruns.propertyfilteringlabels.NumberOfWorkers",defaultMessage:"Number of workers",description:'Property filtering label for job run key "NumberOfWorkers"'},SecurityConfiguration:{id:"jobruns.propertyfilteringlabels.SecurityConfiguration",defaultMessage:"Security configuration",description:'Property filtering label for job run key "SecurityConfiguration"'},LogGroupName:{id:"jobruns.propertyfilteringlabels.LogGroupName",defaultMessage:"Log group name",description:'Property filtering label for job run key "LogGroupName"'},NotificationProperty:{id:"jobruns.propertyfilteringlabels.NotificationProperty",defaultMessage:"Notification property",description:'Property filtering label for job run key "NotificationProperty"'},GlueVersion:{id:"jobruns.propertyfilteringlabels.GlueVersion",defaultMessage:"Glue version",description:'Property filtering label for job run key "GlueVersion"'},ExecutionClass:{id:"jobruns.propertyfilteringlabels.ExecutionClass",defaultMessage:"Execution class",description:'Property filtering label for job run key "ExecutionClass"'},MinFlexWorkers:{id:"jobruns.propertyfilteringlabels.MinFlexWorkers",defaultMessage:"Min flex workers",description:'Property filtering label for job run key "MinFlexWorkers"'},DPUSeconds:{id:"jobruns.propertyfilteringlabels.DPUSeconds",defaultMessage:"Dpu seconds",description:'Property filtering label for job run key "DPUSeconds"'}},s={JobRunState:{id:"jobruns.tablecolumlabels.JobRunState",defaultMessage:"Run status",description:'Table column label for job run key "JobRunState"'},Attempt:{id:"jobruns.tablecolumlabels.Attempt",defaultMessage:"Retries",description:'Property filtering label for job run key "Attempt"'},StartedOn:{id:"jobruns.tablecolumlabels.StartedOn",defaultMessage:Object(o.a)("Start time"),description:'Property filtering label for job run key "StartedOn"'},CompletedOn:{id:"jobruns.tablecolumlabels.CompletedOn",defaultMessage:Object(o.a)("End time"),description:'Property filtering label for job run key "CompletedOn"'},ExecutionTime:{id:"jobruns.tablecolumlabels.ExecutionTime",defaultMessage:"Duration",description:'Property filtering label for job run key "ExecutionTime"'},MaxCapacity:{id:"jobruns.tablecolumlabels.MaxCapacity",defaultMessage:"Capacity (DPUs)",description:'Property filtering label for job run key "MaxCapacity"'},WorkerType:{id:"jobruns.tablecolumlabels.WorkerType",defaultMessage:"Worker type",description:'Property filtering label for job run key "WorkerType"'},GlueVersion:{id:"jobruns.tablecolumlabels.GlueVersion",defaultMessage:"Glue version",description:'Property filtering label for job run key "GlueVersion"'},WorkerUtilization:{id:"jobruns.tablecolumlabels.WorkerUtilization",defaultMessage:"Worker utilization (%)",description:'Property filtering label for job run (observability) metric "WorkerUtilization"'},Skewness:{id:"jobruns.tablecolumlabels.Skewness",defaultMessage:"Data skewness (%)",description:'Property filtering label for job run (observability) metric "DataSkewness"'}},c={headerTitle:{id:"page.jobruns.table-header",defaultMessage:"Job runs",description:"Title for the table"},headerTitleLinkAriaLabel:{id:"page.jobruns.table-header.linkAriaLabel",defaultMessage:"More information for 'Job runs' (shows in sidebar).",description:"Info panel link aria label for the title of the job run table."},ctaRefresh:{id:"page.jobruns.table-cta.refresh",defaultMessage:"Refresh job runs",description:"Button text (to refresh the table data)"},ctaDeleteButtonText:{id:"page.jobruns.history.table-cta.delete",defaultMessage:"Delete",description:"Button text (to delete a job run)"},ctaPrimaryButtonText:{id:"page.jobruns.table-cta.add",defaultMessage:"Add job run",description:"Button text (to add a job run)"}},l={copyId:{id:"page.jobruns.table.copyId",defaultMessage:"Copy job run ID",description:"Label of the button that copies the job run ID"},idCopied:{id:"page.jobruns.table.idCopied",defaultMessage:"job run ID copied",description:"Message that appears when the job run ID was successfully copied"},idLinkAriaLabel:{id:"page.jobruns.table.idLinkAriaLabel",defaultMessage:"View the details for this job run.",description:"aria label for link to copy an id"}},u={ctaViewDetails:{id:"jobrunactions.ctaViewDetails",defaultMessage:"View details",description:"button copy that appears when an item is selected to allow user to navigate to job run page"},ctaToggleTableView:{id:"jobrunactions.ctaToggleTableView",defaultMessage:"Table View",description:"button copy that appears for segmented control to toggle table view"},ctaCardTableView:{id:"jobrunactions.ctaToggleCardView",defaultMessage:"Card View",description:"button copy that appears for segmented control to toggle card view"}},d={loading:{id:"job.run.details.refresh.loading",defaultMessage:"Loading job run details",description:"Loading message to announce in live region for run details refresh button."},error:{id:"job.run.details.refresh.error",defaultMessage:"Failed to fetch job run details",description:"Error message to announce in live region for run details refresh button."},success:{id:"job.run.details.refresh.success",defaultMessage:"Finished loading job run details",description:"Success message to announce in live region for run details refresh button."}},b=function(){return Object(a.useMessages)(d)},p=function(){return{actions:Object(a.useMessages)(u),collectionLabels:Object(a.useMessages)(r),copy:Object(a.useMessages)(l),header:Object(a.useMessages)(c),propertyFilterLabels:Object(a.useMessages)(i),tableColumnLabels:Object(a.useMessages)(s)}}},2695:function(e,t,n){"use strict";n.d(t,"c",(function(){return d})),n.d(t,"a",(function(){return p})),n.d(t,"f",(function(){return f})),n.d(t,"e",(function(){return j})),n.d(t,"d",(function(){return h})),n.d(t,"b",(function(){return m})),n.d(t,"g",(function(){return y}));var a=n(3),o=n(42),r=n(8),i=n(30),s=n(14),c=function(e,t){return[{type:"metric",x:0,y:18,width:12,height:6,properties:{metrics:[[{expression:'SELECT SUM(ray_tasks) FROM "Glue/Ray" WHERE JobName = \''.concat(t,"' AND JobRunId = '").concat(e,"' GROUP BY State"),label:"",id:"q1"}]],view:"timeSeries",stacked:!0,stat:"Average",period:30,title:"Scheduled Task State",yAxis:{left:{showUnits:!1,label:"tasks"}}}},{type:"metric",x:12,y:18,width:12,height:6,properties:{metrics:[[{expression:'SELECT SUM(ray_tasks) FROM "Glue/Ray" WHERE JobName = \''.concat(t,"' AND JobRunId = '").concat(e,"' AND State != 'FINISHED' AND State != 'FAILED' GROUP BY Name"),label:"",id:"q1"}]],view:"timeSeries",stacked:!0,stat:"Average",period:30,title:"Active Tasks by Name",yAxis:{left:{showUnits:!1,label:"tasks"}}}},{type:"metric",x:0,y:24,width:12,height:6,properties:{metrics:[[{expression:'SELECT SUM(ray_actors) FROM "Glue/Ray" WHERE JobName = \''.concat(t,"' AND JobRunId = '").concat(e,"' GROUP BY State"),label:"",id:"q1"}]],view:"timeSeries",stacked:!0,stat:"Average",period:30,title:"Scheduled Actors State",yAxis:{left:{showUnits:!1,label:"actors"}}}},{type:"metric",x:12,y:24,width:12,height:6,properties:{metrics:[[{expression:'SELECT SUM(ray_actors) FROM "Glue/Ray" WHERE JobName = \''.concat(t,"' AND JobRunId = '").concat(e,"' AND State != 'DEAD' GROUP BY Name"),label:"",id:"q1"}]],view:"timeSeries",stacked:!0,stat:"Average",period:30,title:"Active Actors by Name",yAxis:{left:{showUnits:!1,label:"actors"}}}},{type:"metric",x:0,y:30,width:12,height:6,properties:{metrics:[[{expression:'SELECT SUM(ray_resources) FROM "Glue/Ray" WHERE JobName = \''.concat(t,"' AND JobRunId = '").concat(e,"' AND State = 'USED' AND Name = 'CPU' GROUP BY NodeAddress"),label:"CPU Usage",id:"q1",stat:"Maximum"}]],view:"timeSeries",stacked:!0,stat:"Maximum",period:60,yAxis:{left:{label:"Cores",showUnits:!1}},title:"CPU usage per worker"}},{type:"metric",x:12,y:30,width:12,height:6,properties:{metrics:[[{expression:'SELECT SUM(ray_object_store_memory) FROM "Glue/Ray" WHERE JobRunId = \''.concat(e,"' AND JobName = '").concat(t,"' GROUP BY Location"),label:"memory_usage",id:"q1",visible:!1}],[{expression:"q1/1000000000",label:"Usage",id:"e1"}]],view:"timeSeries",stacked:!0,stat:"Average",period:300,title:"Cluster Object Store Memory",yAxis:{left:{showUnits:!1,label:"GIB"}}}},{type:"metric",x:0,y:36,width:12,height:6,properties:{metrics:[[{expression:'SELECT SUM(ray_cluster_active_nodes) FROM "Glue/Ray" WHERE JobName = \''.concat(t,"' AND JobRunId = '").concat(e,"' GROUP BY node_type"),label:"Active Nodes",id:"m1"}]],view:"timeSeries",stacked:!0,stat:"Average",period:60,yAxis:{left:{label:"Node count",showUnits:!1}},setPeriodToTimeRange:!0,title:"Node Count Metric"}},{type:"metric",x:12,y:36,width:12,height:6,properties:{metrics:[[{expression:'SELECT MAX(ray_node_cpu_utilization) FROM "Glue/Ray" WHERE JobRunId = \''.concat(e,"' AND JobName = '").concat(t,"' GROUP BY ip"),label:"CPU Usage",id:"q1"}]],view:"timeSeries",stacked:!1,stat:"Average",period:300,title:"Node CPU (hardware utilization)",yAxis:{left:{showUnits:!1,label:"Percentage"}}}},{type:"metric",x:0,y:42,width:12,height:6,properties:{metrics:[[{expression:'SELECT SUM(ray_node_mem_used) FROM "Glue/Ray" WHERE JobName = \''.concat(t,"' AND JobRunId = '").concat(e,"' GROUP BY ip"),label:"Query1",id:"q1",visible:!1}],[{expression:"q1/1000000000",label:"MEM Usage",id:"e1"}]],view:"timeSeries",stacked:!0,stat:"Average",period:60,yAxis:{left:{showUnits:!1,label:"GIB"}},title:"Node Memory (heap + object store)"}},{type:"metric",x:12,y:42,width:12,height:6,properties:{metrics:[[{expression:'SELECT SUM(ray_node_disk_usage) FROM "Glue/Ray" WHERE JobName = \''.concat(t,"' AND JobRunId = '").concat(e,"' GROUP BY ip"),label:"Query1",id:"q1",visible:!1}],[{expression:"q1/1000000000",label:"Disk Usage",id:"e2"}]],view:"timeSeries",stacked:!0,stat:"Average",period:60,yAxis:{left:{showUnits:!0,label:"GIB"}},title:"Node Disk Usage"}},{type:"metric",x:0,y:48,width:12,height:6,properties:{metrics:[[{expression:'SELECT SUM(ray_node_disk_io_write_speed) FROM "Glue/Ray" WHERE JobRunId = \''.concat(e,"' AND JobName = '").concat(t,"' GROUP BY ip"),label:"Disk write speed",id:"q1",visible:!1}],[{expression:"q1/1000",label:"Speed",id:"e1"}]],view:"timeSeries",stacked:!1,stat:"Average",period:300,title:"Disk I/O Write Speed",yAxis:{left:{showUnits:!1,label:"KB/s"}}}},{type:"metric",x:12,y:48,width:12,height:6,properties:{metrics:[[{expression:'SELECT SUM(ray_node_disk_io_read_speed) FROM "Glue/Ray" WHERE JobRunId = \''.concat(e,"' AND JobName = '").concat(t,"' GROUP BY ip"),label:"Disk write speed",id:"q1",visible:!1}],[{expression:"q1/1000",label:"Speed",id:"e1"}]],view:"timeSeries",stacked:!1,stat:"Average",period:300,title:"Disk I/O Read Speed",yAxis:{left:{showUnits:!1,label:"KB/s"}}}},{type:"metric",x:0,y:54,width:12,height:6,properties:{metrics:[[{expression:'SELECT SUM(ray_node_network_receive_speed) FROM "Glue/Ray" WHERE JobRunId = \''.concat(e,"' AND JobName = '").concat(t,"' GROUP BY ip"),label:"Network recv speed",id:"q1",visible:!1}],[{expression:"q1/1000",label:"Speed",id:"e1"}]],view:"timeSeries",stacked:!0,stat:"Average",period:300,title:"Node Network Recv Speed",yAxis:{left:{showUnits:!1,label:"KB/s"}}}},{type:"metric",x:12,y:54,width:12,height:6,properties:{metrics:[[{expression:'SELECT SUM(ray_node_network_send_speed) FROM "Glue/Ray" WHERE JobRunId = \''.concat(e,"' AND JobName = '").concat(t,"' GROUP BY ip"),label:"Network send speed",id:"q1",visible:!1}],[{expression:"q1/1000",label:"Speed",id:"e1"}]],view:"timeSeries",stacked:!0,stat:"Average",period:300,title:"Node Network Send Speed",yAxis:{left:{showUnits:!1,label:"KB/s"}}}},{type:"metric",x:0,y:60,width:12,height:6,properties:{metrics:[[{expression:'SELECT SUM(ray_component_cpu_percentage) FROM "Glue/Ray" WHERE JobName = \''.concat(t,"' AND JobRunId = '").concat(e,"' GROUP BY Component, ip"),label:"",id:"q1"}]],view:"timeSeries",stacked:!0,stat:"Average",period:30,yAxis:{left:{showUnits:!1,label:"Cores"}},title:"Node CPU by Component"}},{type:"metric",x:12,y:60,width:12,height:6,properties:{metrics:[[{expression:'SELECT SUM(ray_component_uss_mb) FROM "Glue/Ray" WHERE JobName = \''.concat(t,"' AND JobRunId = '").concat(e,"' GROUP BY Component"),label:"",id:"q1",visible:!1}],[{expression:"q1/1000",label:"",id:"e1"}]],view:"timeSeries",stacked:!0,stat:"Average",period:60,yAxis:{left:{showUnits:!1,label:"GIB"}},title:"Memory by Component"}}]},l=["metrics","executorMetricId","annotations"],u=98,d="glue",b="ALL",p="driver",f="workerUtilization",j="skewness",h="resource_utilization",m="job_performance",g=[{type:"metric",x:0,y:0,width:12,height:6,properties:{stacked:!1,metrics:[["Glue","".concat(d,".").concat(b,".s3.filesystem.read_bytes"),"Type","gauge","JobRunId","{{JOB_RUN_ID}}","JobName","{{JOB_NAME}}",{id:"m1",label:"S3 Bytes Read"}],[".","".concat(d,".").concat(b,".s3.filesystem.write_bytes"),".",".",".",".",".",".",{id:"m2",label:"S3 Bytes Written"}]],stat:"Sum",period:60,title:"ETL data movement (bytes)"}},{type:"metric",x:12,y:0,width:12,height:6,properties:{stacked:!1,metrics:[["Glue","".concat(d,".").concat(p,".aggregate.shuffleLocalBytesRead"),"Type","count","JobRunId","{{JOB_RUN_ID}}","JobName","{{JOB_NAME}}",{id:"m1",label:"Shuffle Bytes Read"}],[".","".concat(d,".").concat(p,".aggregate.shuffleBytesWritten"),".",".",".",".",".",".",{id:"m2",label:"Shuffle Bytes Written"}]],stat:"Sum",period:60,title:"Data shuffle across executors (bytes)"}},{type:"metric",x:0,y:6,width:12,height:6,properties:{stacked:!1,metrics:[["Glue","".concat(d,".").concat(p,".jvm.heap.usage"),"Type","gauge","JobRunId","{{JOB_RUN_ID}}","JobName","{{JOB_NAME}}",{id:"m1",label:"Driver"}],[".","".concat(d,".").concat(b,".jvm.heap.usage"),".",".",".",".",".",".",{id:"m2",label:"Executor Average"}]],executorMetricId:"".concat(d,".{{EXECUTOR}}.jvm.heap.usage"),stat:"Average",period:60,title:"Memory profile: drivers and executors (%)",annotations:{horizontal:[{label:"50% Usage",value:.5}]},yAxis:{left:{min:0,max:1},right:{min:0,max:1}}}},{type:"metric",x:12,y:6,width:12,height:6,properties:{stacked:!1,metrics:[["Glue","".concat(d,".").concat(p,".system.cpuSystemLoad"),"Type","gauge","JobRunId","{{JOB_RUN_ID}}","JobName","{{JOB_NAME}}",{id:"m1",label:"Driver"}],[".","".concat(d,".").concat(b,".system.cpuSystemLoad"),".",".",".",".",".",".",{id:"m2",label:"Executor Average"}]],executorMetricId:"".concat(d,".{{EXECUTOR}}.system.cpuSystemLoad"),stat:"Average",period:60,title:"CPU load (%)",annotations:{horizontal:[{label:"50% Usage",value:.5}]},yAxis:{left:{min:0,max:1},right:{min:0,max:1}}}},{type:"metric",x:0,y:12,width:24,height:6,properties:{view:"timeSeries",stacked:!1,metrics:[["Glue","".concat(d,".").concat(p,".ExecutorAllocationManager.executors.numberAllExecutors"),"Type","gauge","JobRunId","{{JOB_RUN_ID}}","JobName","{{JOB_NAME}}",{id:"m1",label:"Number of Active Executors"}],[".","".concat(d,".").concat(p,".aggregate.numCompletedStages"),".","count",".",".",".",".",{id:"m2",stat:"Sum",label:"Number of Completed Stages"}],[".","".concat(d,".").concat(p,".ExecutorAllocationManager.executors.numberMaxNeededExecutors"),".","gauge",".",".",".",".",{id:"m3",stat:"Maximum",label:"Number of Maximum Needed Executors"}]],stat:"Average",period:60,title:"Job execution: Active executors, completed stages & maximum needed executors",annotations:{horizontal:[{label:"Maximum Allocated Executors",value:u}]}}}],O=[{type:"metric",x:0,y:18,width:12,height:6,properties:{view:"timeSeries",stacked:!1,metrics:[["Glue","".concat(d,".").concat(p,".streaming.numRecords"),"Type","count","JobRunId","{{JOB_RUN_ID}}","JobName","{{JOB_NAME}}",{id:"m1",label:"Number of Records Processed"}]],stat:"Sum",period:60,title:"Number of records"}},{type:"metric",x:12,y:18,width:12,height:6,properties:{view:"timeSeries",stacked:!1,metrics:[["Glue","".concat(d,".").concat(p,".streaming.batchProcessingTimeInMs"),"Type","count","JobRunId","{{JOB_RUN_ID}}","JobName","{{JOB_NAME}}",{id:"m1",label:"Processing Time"}]],stat:"Average",period:60,title:"Batch process time (Milliseconds)"}},{type:"metric",x:0,y:24,width:12,height:6,properties:{view:"timeSeries",stacked:!1,metrics:[["Glue","".concat(d,".").concat(p,".streaming.maxConsumerLagInMs"),"Type","count","JobRunId","{{JOB_RUN_ID}}","JobName","{{JOB_NAME}}",{id:"m1",label:"Max Consumer Lag"}]],stat:"Average",period:60,title:"Maximum consumer lag (milliseconds)"}}],v=function(e){return[{type:"metric",x:0,y:e?30:18,width:12,height:6,properties:{view:"timeSeries",stacked:!1,metrics:[["Glue","".concat(d,".").concat(p,".").concat(f),"Type","gauge","ObservabilityGroup",h,"JobRunId","{{JOB_RUN_ID}}","JobName","{{JOB_NAME}}",{id:"m1",label:"Average worker utilization"}]],stat:"Average",period:60,title:"Worker utilization (%)"}},{type:"metric",x:12,y:e?30:18,width:12,height:6,properties:{view:"timeSeries",stacked:!1,metrics:[["Glue","".concat(d,".").concat(p,".").concat(j,".job"),"Type","gauge","ObservabilityGroup",m,"JobRunId","{{JOB_RUN_ID}}","JobName","{{JOB_NAME}}",{id:"m1",label:"Data skewness by job"}]],stat:"Average",period:60,title:"Data skewness by job (%)"}}]},y=function(e,t,n){var d,b=arguments.length>3&&void 0!==arguments[3]&&arguments[3],p=Math.min(u,n.NumberOfWorkers?n.NumberOfWorkers-1:n.AllocatedCapacity?2*(n.AllocatedCapacity-1)-1:0);if(!e||!t)return[];var f=[].concat(g,Object(r.a)(b?O:[]),Object(r.a)(i.a.isEnabled("feature-monitoring-resource-usage")?v(b):[]));return(null===n||void 0===n||null===(d=n.WorkerType)||void 0===d?void 0:d.includes("Z."))&&i.a.isEnabled("feature-ray-job-metrics")&&(f=c(t,e)),f.map((function(n){var i=n.properties,c=i.metrics,u=i.executorMetricId,d=i.annotations,b=Object(o.a)(i,l),f=c.map((function(n){return n.map((function(n){switch(n){case"{{JOB_NAME}}":return e;case"{{JOB_RUN_ID}}":return t;default:return n}}))})),j=u&&p>0?new Array(p).fill(void 0).map((function(e,t){return[".",u.replace("{{EXECUTOR}}","".concat(t+1))].concat(Object(r.a)(new Array(6).fill(".")),[{id:"m".concat(t+1+c.length),label:"Executor ".concat(t+1)}])})):[],h=d;return"Job Execution: Active Executors, Completed Stages & Maximum Needed Executors"===i.title&&(h=Object(a.a)(Object(a.a)({},d),{},{horizontal:[{label:d.horizontal[0].label,value:p}]})),Object(a.a)(Object(a.a)({},n),{},{properties:Object(a.a)(Object(a.a)({},b),{},{metrics:[].concat(Object(r.a)(f),Object(r.a)(j)),annotations:h,region:s.c})})}))}},2702:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n(29),o="dataquality.reinvent2023",r={runDetails:{id:"".concat(o,".runDetails.label"),defaultMessage:"Run details",description:"Label for run details button"},downloadResults:{id:"".concat(o,".downloadResults.label"),defaultMessage:"Download results",description:"Label for download results button"},goToNode:{id:"".concat(o,".goToNode.label"),defaultMessage:"Go to node",description:"Label for go to node button"},score:{id:"".concat(o,".score.text"),defaultMessage:"Data quality score",description:"Text for data quality score"},dataQualityAt:{id:"".concat(o,".dataqualityat.label"),defaultMessage:"Data quality at",description:"Text for data quality at"},emptyChart:{id:"".concat(o,".observations.chart.empty"),defaultMessage:"No data available",description:"Text for data quality observations empty chart"},noMatchChart:{id:"".concat(o,".observations.chart.noMatch"),defaultMessage:"No matching data",description:"Text for data quality observations no match chart"},errorChart:{id:"".concat(o,".observations.chart.error"),defaultMessage:"The data could not be fetched.",description:"Text for data quality observations error chart"},rulesTableHeader:{id:"".concat(o,".rules.table.header"),defaultMessage:"Rules",description:"Text for data quality rules header"},rulesTableDescription:{id:"".concat(o,".rules.table.description"),defaultMessage:"Data quality conditions and results.",description:"Text for data quality rules description"},observationsTableHeader:{id:"".concat(o,".observations.table.header"),defaultMessage:"Observations",description:"Text for data quality observations header"},observationsTableDescription:{id:"".concat(o,".observations.table.description"),defaultMessage:"Observations generated on analyzed data for the selected run. View trend and apply rule recommendations to improve your ruleset.",description:"Text for data quality observations description"},dataStatisticsTableHeader:{id:"".concat(o,".dataStatistics.table.header"),defaultMessage:"Data statistics",description:"Text for data quality data statistics header"},dataStatisticsTableDescription:{id:"".concat(o,".dataStatistics.table.description"),defaultMessage:"Data statistics gathered from analyzers and rules.",description:"Text for data quality data statistics description"},dataStatisticsTableEmpty:{id:"".concat(o,".dataStatistics.table.description"),defaultMessage:"There are no data statistics.",description:"Text for data quality data statistics empty"},copyDQDLModalEmpty:{id:"".concat(o,".copyDQDL.modal.empty"),defaultMessage:"No rules copied to list.",description:"Text for copy dqdl modal empty"},copyDQDLModalInfo:{id:"".concat(o,".copyDQDL.modal.info"),defaultMessage:"Copy rules and paste in ruleset to apply rules.",description:"Text for copy dqdl modal info in non visual mode"},copyDQDLModalVisualInfo:{id:"".concat(o,".copyDQDL.modal.info"),defaultMessage:"Copy rules and Go to node to modify the ruleset.",description:"Text for copy dqdl modal info in visual mode"},newTag:{id:"".concat(o,".new.tag"),defaultMessage:"new",description:"The word new"},emptyHeader:{id:"".concat(o,".tab.empty.runs.header"),defaultMessage:"No runs with data quality results.",description:"Header for if there are runs but no data quality"},emptyContent:{id:"".concat(o,".tab.empty.content"),defaultMessage:"Configure data quality and run job to see data quality results.",description:"content for empty tab state"},viewAll:{id:"".concat(o,".summaryPanel.table.footer.link"),defaultMessage:"View all",description:"view all link text for summary panel table footer"}},i=function(){return{dataQualityText:Object(a.useMessages)(r)}}},2703:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var a=n(3),o=n(752),r=n(95),i=function(e){return function(){return r.a.getJobRun(e).promise().then((function(e){return e.JobRun})).catch((function(){return{}}))}},s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0;return Object(o.a)(Object(a.a)({queryKey:["GetJobRun",e,t],queryFn:i({JobName:e,RunId:t})},n))}},2704:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return o}));var a=200,o=6e5},2705:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n(30);function o(e){return a.a.isEnabled("feature-job-monitoring-updates")?e+" (UTC)":e}},2706:function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var a=n(3),o=n(103),r=n(50),i=n(550),s=n(99),c=(n(0),n(351)),l=n(61),u=n(2684),d=n(1);function b(e){var t=e.selectedRole,n=e.setSelectedRole,b=Object(c.a)(),p=Object(u.a)(!0),f=p.roles,j=p.loading,h=f.map((function(e){return Object(a.a)(Object(a.a)({},e),{},{value:e.id})})),m=h.find((function(e){return e.value===t}))||{};return Object(d.jsx)(r.default,{label:Object(d.jsx)(l.a,{id:"jobs.edit.noRole.modal.label",defaultMessage:"IAM role",description:"Label of the select dropdown in the modal dialog allowing the customer to select an IAM role."}),description:Object(d.jsx)(l.a,{id:"jobs.edit.noRole.modal.description",defaultMessage:"To start a data preview session, choose an IAM role for this job. Changing the role will end an existing data preview session.",description:"Description of the select dropdown in the modal dialog allowing the customer to select an IAM role."}),children:Object(d.jsx)(s.default,{size:"m",direction:"vertical",children:Object(d.jsx)(o.default,{children:Object(d.jsx)(i.a,{filteringType:"auto",triggerVariant:"option",empty:Object(d.jsx)(l.a,{id:"jobs.edit.noRole.modal.empty",defaultMessage:"No roles available.",description:"Empty state for the role selector when no role is available."}),errorText:b.formatMessage({id:"jobs.edit.noRole.modal.error",defaultMessage:"Unable to load roles.",description:"Error text for the role selector when the roles failed to load."}),loadingText:b.formatMessage({id:"jobs.edit.noRole.modal.loading",defaultMessage:"Loading available roles",description:"Loading state for the role selector."}),statusType:j?"loading":"finished",options:h,selectedOption:m,onChange:function(e){return n(e.detail.selectedOption.value)},"data-e2e":"iamRoleSelector"})})})})}},2712:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));n(0);var a=n(61),o=n(2705),r=n(1),i={labelId:Object(r.jsx)(a.a,{id:"jobRun.label.Id",defaultMessage:"Id",description:"The id of a glue job."}),labelIdLinkAriaLabel:Object(r.jsx)(a.a,{id:"jobRun.label.Id.LinkAriaLabel",defaultMessage:"Id",description:"View the details for this job run."}),labelJobName:Object(r.jsx)(a.a,{id:"jobRun.label.jobName",defaultMessage:"Job name",description:"The name of a glue job."}),labelRecentAttempt:Object(r.jsx)(a.a,{id:"jobRun.label.RecentAttempt",defaultMessage:"Retry attempt number",description:"The rececent attempt of a job run."}),labelRunStatus:Object(r.jsx)(a.a,{id:"jobRun.label.RunStatus",defaultMessage:"Run status",description:"The status of a glue job."}),labelCloudwatchLogs:Object(r.jsx)(a.a,{id:"jobRun.label.Cloudwatch.Logs",defaultMessage:"Cloudwatch logs",description:"The label for the cloudwatch logs group."}),labelLogs:Object(r.jsx)(a.a,{id:"jobRun.label.Logs",defaultMessage:"All logs",description:"The logs of a glue job."}),labelOutputLogs:Object(r.jsx)(a.a,{id:"jobRun.label.OutputLogs",defaultMessage:"Output logs",description:"The logs of a glue job."}),labelErrorLogs:Object(r.jsx)(a.a,{id:"jobRun.label.ErrorLogs",defaultMessage:"Error logs",description:"The error logs of a glue job."}),labelJobInsightsLogs:Object(r.jsx)(a.a,{id:"jobRun.label.Cloudwatch.JobInsights",defaultMessage:"Performance and debugging recommendations",description:"The label for the cloudwatch logs group."}),labelJobInsightsLogsLink:Object(r.jsx)(a.a,{id:"jobRun.label.Cloudwatch.JobInsights.link",defaultMessage:"View in CloudWatch",description:"The label for the cloudwatch logs group."}),labelError:Object(r.jsx)(a.a,{id:"jobRun.label.Error",defaultMessage:"Error",description:"The error message of a glue job."}),labelExecutionTime:Object(r.jsx)(a.a,{id:"jobRun.label.ExecutionTime",defaultMessage:"Execution time",description:"The execution time of a glue job."}),labelStartUpTime:Object(r.jsx)(a.a,{id:"jobRun.label.startUpTime",defaultMessage:"Start-up time",description:"The start-up time of a glue job."}),labelStartTime:Object(r.jsx)(a.a,{id:"jobRun.label.StartTime",defaultMessage:Object(o.a)("Start time"),description:"The start time of a glue job."}),labelEndTime:Object(r.jsx)(a.a,{id:"jobRun.label.EndTime",defaultMessage:Object(o.a)("End time"),description:"The end time of a glue job."}),labelLastModifiedTime:Object(r.jsx)(a.a,{id:"jobRun.label.lastModifiedTime",defaultMessage:Object(o.a)("Last modified on"),description:"The last modified time of a glue job."}),labelVersion:Object(r.jsx)(a.a,{id:"jobRun.label.glueVersion",defaultMessage:"Glue version",description:"The version of Glue that a glue job is running on"}),labelTriggerName:Object(r.jsx)(a.a,{id:"jobRun.label.triggerName",defaultMessage:"Trigger name",description:"The trigger name of a glue job."}),labelLogGroupName:Object(r.jsx)(a.a,{id:"jobRun.label.logGroupName",defaultMessage:"Log group name",description:"The log group name of a glue job."}),labelSecurityConfiguration:Object(r.jsx)(a.a,{id:"jobRun.label.securityConfiguration",defaultMessage:"Security configuration",description:"The security configuration for a glue job."}),labelTimeoutSetting:Object(r.jsx)(a.a,{id:"jobRun.label.timeout",defaultMessage:"Timeout",description:"Timeout setting for a glue job."}),labelDPUhours:Object(r.jsx)(a.a,{id:"jobRun.label.dpuHours",defaultMessage:"DPU Hours",description:"DPU hours for a glue job."}),labelMaxCapacity:Object(r.jsx)(a.a,{id:"jobRun.label.maxCapacity",defaultMessage:"Max capacity",description:"Max capacity for a glue job."}),labelNumberOfWorkers:Object(r.jsx)(a.a,{id:"jobRun.label.numberOfWorkers",defaultMessage:"Number of workers",description:"Number of workers for a glube job."}),labelWorkerType:Object(r.jsx)(a.a,{id:"jobRun.label.workerType",defaultMessage:"Worker type",description:"Worker type for a glue job."}),labelExecutionClass:Object(r.jsx)(a.a,{id:"jobRun.label.executionClass",defaultMessage:"Execution class",description:"Execution class for a glue job."}),labelStarting:Object(r.jsx)(a.a,{id:"jobRun.state.starting",defaultMessage:"Starting",description:"The status of a glue job that is starting."}),labelStopped:Object(r.jsx)(a.a,{id:"jobRun.state.stopped",defaultMessage:"Stopped",description:"The status of a glue job that stopped."}),labelRunning:Object(r.jsx)(a.a,{id:"jobRun.state.running",defaultMessage:"Running",description:"The status of a glue job that is running."}),labelFailed:Object(r.jsx)(a.a,{id:"jobRun.state.failed",defaultMessage:"Failed",description:"The status of a glue job that failed."}),labelSucceeded:Object(r.jsx)(a.a,{id:"jobRun.state.succeeded",defaultMessage:"Succeeded",description:"The status of a glue job that succeeded."}),labelStopping:Object(r.jsx)(a.a,{id:"jobRun.state.stopping",defaultMessage:"Stopping",description:"The status of a glue job that is stopping."}),labelTimeout:Object(r.jsx)(a.a,{id:"jobRun.state.timeout",defaultMessage:"Timeout",description:"The status of a glue job that timed out."}),labelUsageProfileName:Object(r.jsx)(a.a,{id:"jobRun.state.usageProfileName",defaultMessage:"Usage profile",description:"The name of a linked usage profile"})}},2713:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var a=n(233),o=(n(0),n(1)),r={ERROR:Object(o.jsxs)("span",{className:"awsui-util-status-negative",children:[Object(o.jsx)(a.a,{name:"status-negative"})," Failed"]}),FAILED:Object(o.jsxs)("span",{className:"awsui-util-status-negative",children:[Object(o.jsx)(a.a,{name:"status-negative"})," Failed"]}),SUBMIT_FOR_FAILURE:Object(o.jsxs)("span",{className:"awsui-util-status-negative",children:[Object(o.jsx)(a.a,{name:"status-negative"})," Failed"]}),EXECUTING:Object(o.jsxs)("span",{className:"awsui-util-status-info",children:[Object(o.jsx)(a.a,{name:"status-in-progress"})," Running"]}),SUBMIT_FOR_EXECUTION:Object(o.jsxs)("span",{className:"awsui-util-status-inactive",children:[Object(o.jsx)(a.a,{name:"status-pending"})," Starting"]}),CANCELED:Object(o.jsxs)("span",{className:"awsui-util-status-negative",children:[Object(o.jsx)(a.a,{name:"status-stopped"})," Canceled"]}),RUNNING:Object(o.jsxs)("span",{className:"awsui-util-status-info",children:[Object(o.jsx)(a.a,{name:"status-in-progress"})," Running"]}),STARTING:Object(o.jsxs)("span",{className:"awsui-util-status-positive",children:[Object(o.jsx)(a.a,{name:"status-pending"})," Starting"]}),STOPPED:Object(o.jsxs)("span",{className:"awsui-util-status-inactive",children:[Object(o.jsx)(a.a,{name:"status-stopped"})," Stopped"]}),STOPPING:Object(o.jsxs)("span",{className:"awsui-util-status-inactive",children:[Object(o.jsx)(a.a,{name:"status-stopped"})," Stopping"]}),SUCCEEDED:Object(o.jsxs)("span",{className:"awsui-util-status-positive",children:[Object(o.jsx)(a.a,{name:"status-positive"})," Succeeded"]}),TIMEOUT:Object(o.jsxs)("span",{className:"awsui-util-status-negative",children:[Object(o.jsx)(a.a,{name:"status-warning"})," Timeout"]}),WAITING:Object(o.jsxs)("span",{className:"awsui-util-status-inactive",children:[Object(o.jsx)(a.a,{name:"status-pending"})," Waiting"]}),WAITING_TO_REATTEMPT:Object(o.jsxs)("span",{className:"awsui-util-status-inactive",children:[Object(o.jsx)(a.a,{name:"status-pending"})," Waiting"]}),"N/A":"N/A"}},2714:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return i}));var a=n(86),o=n(14),r=(n(76),function(e){return"https://".concat(o.c,".").concat(Object(a.d)(),"/iamv2/home#/roles/details/").concat(e)}),i=function(){return"https://".concat(o.c,".").concat(Object(a.d)(),"/iamv2/home#/roles")}},2715:function(e,t,n){"use strict";n.d(t,"b",(function(){return c})),n.d(t,"d",(function(){return l})),n.d(t,"c",(function(){return u})),n.d(t,"e",(function(){return d})),n.d(t,"a",(function(){return b}));var a=n(2),o=n(0),r=n(2603),i="AWS_GLUE_STUDIO_GITLABS_PAT",s="AWS_GLUE_STUDIO_GITLABS_REPO_OWNER",c=function(){return sessionStorage.getItem(i)||""},l=function(){return!!sessionStorage.getItem(i)},u=function(){return sessionStorage.getItem(s)||""},d=function(){var e=Object(o.useState)(c()),t=Object(a.a)(e,2),n=t[0],r=t[1],l=Object(o.useState)(u()),d=Object(a.a)(l,2),b=d[0],p=d[1],f=Object(o.useCallback)((function(e){r(e),function(e){sessionStorage.setItem(i,e)}(e)}),[]),j=Object(o.useCallback)((function(e){p(e),function(e){sessionStorage.setItem(s,e)}(e)}),[]);return{token:n,updateToken:f,owner:b,updateOwner:j}},b=function(){return new r.Gitlab({token:c()})}},2716:function(e,t,n){"use strict";n.d(t,"b",(function(){return c})),n.d(t,"c",(function(){return l})),n.d(t,"d",(function(){return u})),n.d(t,"e",(function(){return d})),n.d(t,"a",(function(){return b}));var a=n(2),o=n(2605),r=n(0),i="AWS_GLUE_STUDIO_BITBUCKET_PAT",s="AWS_GLUE_STUDIO_BITBUCKET_REPO_OWNER",c=function(){return sessionStorage.getItem(i)||""},l=function(){return sessionStorage.getItem(s)||""},u=function(){return!!sessionStorage.getItem(i)},d=function(){var e=Object(r.useState)(c()),t=Object(a.a)(e,2),n=t[0],o=t[1],u=Object(r.useState)(l()),d=Object(a.a)(u,2),b=d[0],p=d[1],f=Object(r.useCallback)((function(e){o(e),function(e){sessionStorage.setItem(i,e)}(e)}),[]),j=Object(r.useCallback)((function(e){p(e),function(e){sessionStorage.setItem(s,e)}(e)}),[]);return{token:n,updateToken:f,owner:b,updateOwner:j}},b=function(){return new o.a({auth:{username:l(),password:c()}})}},2717:function(e,t,n){"use strict";n.d(t,"g",(function(){return r})),n.d(t,"a",(function(){return d})),n.d(t,"c",(function(){return b})),n.d(t,"e",(function(){return S})),n.d(t,"f",(function(){return C})),n.d(t,"b",(function(){return I})),n.d(t,"h",(function(){return M})),n.d(t,"d",(function(){return G}));var a=n(2),o=n(48),r=function(){var e=Object(o.a)("jobConfig.sourceControlDetails.Provider"),t=Object(a.a)(e,3),n=t[0].value,r=t[2].setValue,i=Object(o.a)("jobConfig.sourceControlDetails.Repository"),s=Object(a.a)(i,3),c=s[0].value,l=s[2].setValue,u=Object(o.a)("jobConfig.sourceControlDetails.Branch"),d=Object(a.a)(u,3),b=d[0].value,p=d[2].setValue,f=Object(o.a)("jobConfig.sourceControlDetails.Folder"),j=Object(a.a)(f,3),h=j[0].value,m=j[2].setValue,g=Object(o.a)("jobConfig.sourceControlDetails.LastCommitId");return{providerField:n,repositoryField:c,branchField:b,folderField:h,lastCommitIdField:Object(a.a)(g,1)[0].value,setProviderField:r,setRepositoryField:l,setBranchField:p,setFolderField:m}},i=n(0),s=n(2624),c="AWS_GLUE_STUDIO_GITHUB_PAT",l="AWS_GLUE_STUDIO_GITHUB_REPO_OWNER",u=function(){return sessionStorage.getItem(c)||""},d=function(){return sessionStorage.getItem(l)||""},b=function(){var e=Object(i.useState)(u()),t=Object(a.a)(e,2),n=t[0],o=t[1],r=Object(i.useState)(d()),s=Object(a.a)(r,2),b=s[0],p=s[1],f=Object(i.useCallback)((function(e){o(e),function(e){sessionStorage.setItem(c,e)}(e)}),[]),j=Object(i.useCallback)((function(e){p(e),function(e){sessionStorage.setItem(l,e)}(e)}),[]);return{token:n,updateToken:f,owner:b,updateOwner:j}},p=function(){return new s.a({auth:u()})},f=n(24),j=n(10),h=n.n(j),m=n(752),g=n(76),O=n(2718),v=n(2715),y=n(2716),x=function(){var e=Object(f.a)(h.a.mark((function e(t,n){var a,o,r,i,s,l,u,d,b,f,j;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==O.b.NONE){e.next=2;break}return e.abrupt("return",Promise.resolve([]));case 2:if(t!==O.b.GITHUB){e.next=11;break}if(sessionStorage.getItem(c)){e.next=5;break}return e.abrupt("return",Promise.resolve([]));case 5:return a=p(),e.next=8,a.rest.repos.listForAuthenticatedUser({type:"all",per_page:100});case 8:return o=e.sent,r=o.data||[],e.abrupt("return",r.map((function(e){return{label:e.name,value:e.name}})));case 11:if(t!==O.b.GITLAB){e.next=19;break}if(Object(v.d)()){e.next=14;break}return e.abrupt("return",Promise.resolve([]));case 14:return i=Object(v.a)(),e.next=17,i.Projects.all({owned:!0,perPage:100,simple:!0});case 17:return s=e.sent,e.abrupt("return",s.map((function(e){return{label:e.name,value:e.path,iconName:"folder"}})));case 19:if(t!==O.b.BITBUCKET){e.next=31;break}if(Object(y.d)()){e.next=22;break}return e.abrupt("return",Promise.resolve([]));case 22:if(l=(null===n||void 0===n?void 0:n.value)||""){e.next=25;break}return e.abrupt("return",Promise.resolve([]));case 25:return u=Object(y.a)(),e.next=28,u.repositories.list({workspace:l,pagelen:100});case 28:return d=e.sent,b=d.data.values||[],e.abrupt("return",b.map((function(e){return{label:e.name,value:e.full_name,iconName:"folder"}})));case 31:if(t!==O.b.AWS_CODE_COMMIT){e.next=37;break}return e.next=34,g.d.listRepositories().promise();case 34:return f=e.sent,j=f.repositories||[],e.abrupt("return",j.map((function(e){return{label:e.repositoryName,value:e.repositoryName,iconName:"folder"}})));case 37:return e.abrupt("return",Promise.resolve([]));case 38:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),S=function(e,t){var n=e===O.b.BITBUCKET?[e,"Repositories",null===t||void 0===t?void 0:t.value,"Workspace"]:[e,"Repositories"];return Object(m.a)({queryKey:n,queryFn:function(){return x(e,t)},retry:0,cacheTime:0})},k=function(){var e=Object(f.a)(h.a.mark((function e(t){var n,a,o,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=p(),a="".concat(t," in:name user:").concat(d()),e.next=4,n.rest.search.repos({q:a,per_page:100});case 4:return o=e.sent,r=o.data.items||[],e.abrupt("return",r.map((function(e){return{label:e.name,value:e.name,iconName:"folder"}})));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C=function(e){return Object(m.a)({queryKey:[e,"SearchRepositories"],queryFn:function(){return k(e)},retry:0,cacheTime:0})},E=n(2732),w=function(){var e=Object(f.a)(h.a.mark((function e(t,n){var o,r,i,s,c,l,u,b,f,j,m,x,S,k,C;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Boolean(n)){e.next=2;break}return e.abrupt("return",Promise.resolve([]));case 2:if(t!==O.b.NONE){e.next=4;break}return e.abrupt("return",Promise.resolve([]));case 4:if(t!==O.b.GITHUB){e.next=12;break}return o=p(),r=d(),e.next=9,o.rest.repos.listBranches({repo:n,owner:r,per_page:100});case 9:return i=e.sent,s=i.data||[],e.abrupt("return",s.map((function(e){return{label:e.name,value:e.name}})));case 12:if(t!==O.b.AWS_CODE_COMMIT){e.next=18;break}return e.next=15,g.d.listBranches({repositoryName:n}).promise();case 15:return c=e.sent,l=c.branches||[],e.abrupt("return",l.map((function(e){return{label:e,value:e}})));case 18:if(t!==O.b.BITBUCKET){e.next=25;break}return u=Object(E.e)(n),b=Object(a.a)(u,2),f=b[0],j=b[1],e.next=22,Object(y.a)().repositories.listBranches({workspace:f,repo_slug:j});case 22:return m=e.sent,x=m.data.values||[],e.abrupt("return",x.map((function(e){return{label:e.name,value:e.name}})));case 25:if(t!==O.b.GITLAB){e.next=32;break}return S=[Object(v.c)(),n].join("/"),e.next=29,Object(v.a)().Branches.all(S,{perPage:100});case 29:return k=e.sent,C=k||[],e.abrupt("return",C.map((function(e){return{label:e.name,value:e.name}})));case 32:return e.abrupt("return",Promise.resolve([]));case 33:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),I=function(e,t){return Object(m.a)({queryKey:[e,t,"Branches"],queryFn:function(){return w(e,t)},retry:0,cacheTime:0})},T=function(){var e=Object(f.a)(h.a.mark((function e(){var t,n,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Object(y.d)()){e.next=2;break}return e.abrupt("return",Promise.resolve([]));case 2:return t=Object(y.a)(),e.next=5,t.workspaces.getWorkspaces({pagelen:100});case 5:return n=e.sent,a=n.data.values||[],e.abrupt("return",a.map((function(e){return{label:e.name,value:e.slug}})));case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),M=function(){var e=Object(y.b)(),t=Object(y.c)();return Object(m.a)({queryKey:["FetchWorkspaces",t,e],queryFn:function(){return T()},retry:0,cacheTime:0})},N=n(2744),L=n(95),R=n(124),D=n(2885),A=n(46),_=n(2665),P=n(52),U=function(e){switch(e){case O.b.GITHUB:return{RepositoryOwner:d(),AuthToken:u()};case O.b.BITBUCKET:return{RepositoryOwner:Object(y.c)(),AuthToken:Object(y.b)()};case O.b.GITLAB:return{RepositoryOwner:Object(v.c)(),AuthToken:Object(v.b)()}}},G=function(){var e=Object(R.a)().pushNotification,t=Object(A.a)().values,n=Object(D.a)(!t.jobConfig.lastModified),o=Object(a.a)(n,1)[0],r=Object(_.b)((function(e){return e})).setSaving,s=Object(i.useCallback)(function(){var n=Object(f.a)(h.a.mark((function n(a,i){var s,c,l,u,d,b,p,f,j,m,g,v,y,x,S;return h.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return s=i.Repository,c=i.Branch,l=i.Provider,u=i.Folder,d=a,b="".concat(s,"/").concat(c),p=Object(E.c)(l),f=d,j=(null===u||void 0===u?void 0:u.trim())||f,n.prev=6,m=N.r({jobName:d,provider:p,repo:b}),e(m),g={JobName:a,Provider:l,RepositoryName:s,BranchName:c,Folder:j},O.c.includes(l)&&(v=U(l),g.RepositoryOwner=null===v||void 0===v?void 0:v.RepositoryOwner,g.AuthToken=null===v||void 0===v?void 0:v.AuthToken),n.next=13,o(t);case 13:return n.next=15,L.a.updateSourceControlFromJob(g).promise();case 15:Object(P.e)(P.d.SAVE,"VersionControl","pushToRepository",l),y=N.s({jobName:d,provider:p,repo:b}),e(y),window.location.reload(),n.next=26;break;case 21:n.prev=21,n.t0=n.catch(6),x=n.t0.message,S=N.q({jobName:d,provider:p,repo:b,err:x}),e(S);case 26:return n.prev=26,r(!1),n.finish(26);case 29:case"end":return n.stop()}}),n,null,[[6,21,26,29]])})));return function(e,t){return n.apply(this,arguments)}}(),[t,e,o,r]),c=Object(i.useCallback)(function(){var t=Object(f.a)(h.a.mark((function t(n,a){var o,r,i,s,c,l,u,d,b,p,f,j,m,g,v;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=a.Repository,r=a.Branch,i=a.Provider,s=a.Folder,c=n,l="".concat(o,"/").concat(r),u=Object(E.c)(i),d=c,b=s||d,p=N.o({jobName:c,provider:u,repo:l}),e(p),t.prev=8,f={JobName:n,Provider:i,RepositoryName:o,BranchName:r,Folder:b},O.c.includes(i)&&(j=U(i),f.RepositoryOwner=null===j||void 0===j?void 0:j.RepositoryOwner,f.AuthToken=null===j||void 0===j?void 0:j.AuthToken),t.next=13,L.a.updateJobFromSourceControl(f).promise();case 13:Object(P.e)(P.d.SAVE,"VersionControl","pullFromRepository",i),m=N.p({jobName:c,provider:u,repo:l}),e(m),window.location.reload(),t.next=24;break;case 19:t.prev=19,t.t0=t.catch(8),g=t.t0.message,v=N.n({jobName:c,provider:u,repo:l,err:g}),e(v);case 24:case"end":return t.stop()}}),t,null,[[8,19]])})));return function(e,n){return t.apply(this,arguments)}}(),[e]);return{pushToRepository:s,pullFromRepository:c}}},2718:function(e,t,n){"use strict";n.d(t,"b",(function(){return _})),n.d(t,"a",(function(){return V})),n.d(t,"c",(function(){return W}));var a,o,r=n(5),i=n(0),s=["title","titleId"];function c(){return c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},c.apply(this,arguments)}function l(e,t){if(null==e)return{};var n,a,o=function(e,t){if(null==e)return{};var n,a,o={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function u(e,t){var n=e.title,r=e.titleId,u=l(e,s);return i.createElement("svg",c({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",viewBox:"0 0 74.375 85",fill:"#fff",fillRule:"evenodd",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",ref:t,"aria-labelledby":r},u),n?i.createElement("title",{id:r},n):null,a||(a=i.createElement("use",{xlinkHref:"#A",x:2.188,y:2.5})),o||(o=i.createElement("symbol",{id:"A",overflow:"visible"},i.createElement("g",{stroke:"none"},i.createElement("path",{d:"M9.754 68.01L0 63.376V16.527l9.754-4.605 13.442 28.81L9.754 68.01z",fill:"#4b612c"}),i.createElement("path",{d:"M41.973 20.127L9.754 11.922V68.01l32.219-8.517V20.127z",fill:"#759c3e"}),i.createElement("path",{d:"M56.857 55.307l7.499 2.39 4.728-15.444L64.356 26.8l-7.499 1.024v27.483z",fill:"#4b612c"}),i.createElement("path",{d:"M64.356 27.2l-7.498.898-4.409-.878 7.694-15.239L64.356 27.2z",fill:"#3c4929"}),i.createElement("path",{d:"M52.449 27.22l7.694-.976V11.942l-7.694 1.961V27.22z",fill:"#4b612c"}),i.createElement("path",{d:"M27.924 22.069L35 15.054l18.571 9.639-6.87 1.064-18.777-3.688z",fill:"#3c4929"}),i.createElement("path",{d:"M64.356 52.8l-7.498-.8-4.409.78 7.694 15.337L64.356 52.8z",fill:"#b7ca9d"}),i.createElement("path",{d:"M52.449 52.781l7.694.976v14.361l-7.694-2.019V52.781z",fill:"#4b612c"}),i.createElement("path",{d:"M53.571 24.693L35 20.41V0l18.571 8.849v15.844zM70 16.625l-9.857-4.683v14.303L70 28.479V16.625z",fill:"#759c3e"}),i.createElement("path",{d:"M27.924 57.932L35 71.307l18.571-16-6.87-1.063-18.777 3.688z",fill:"#b7ca9d"}),i.createElement("path",{d:"M53.571 55.307L35 59.59V80l18.571-8.771V55.307zM70 63.473l-9.857 4.644V53.756L70 51.522v11.951z",fill:"#759c3e"}),i.createElement("path",{d:"M16.326 71.132L35 80l8.59-39.854L35 0 16.326 8.82v62.312z",fill:"#4b612c"}),i.createElement("path",{d:"M45.465 75.044L35 80V.293l10.465 4.956v69.795zm18.891-8.947L70 63.473V16.624l-5.644-1.229v50.702z",fill:"#759c3e"})))))}var d,b,p=i.forwardRef(u),f=(n.p,["title","titleId"]);function j(){return j=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},j.apply(this,arguments)}function h(e,t){if(null==e)return{};var n,a,o=function(e,t){if(null==e)return{};var n,a,o={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function m(e,t){var n=e.title,a=e.titleId,o=h(e,f);return i.createElement("svg",j({width:80,height:79,viewBox:"0 0 80 79",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":a},o),n?i.createElement("title",{id:a},n):null,d||(d=i.createElement("g",{clipPath:"url(#clip0_1_2)"},i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M39.8808 0C17.8278 0 0 17.9592 0 40.1771C0 57.9371 11.4229 72.9706 27.2694 78.2914C29.2506 78.6914 29.9763 77.4269 29.9763 76.3633C29.9763 75.4318 29.911 72.2392 29.911 68.9126C18.8171 71.3078 16.5069 64.1233 16.5069 64.1233C14.7241 59.4669 12.0824 58.2702 12.0824 58.2702C8.45143 55.809 12.3469 55.809 12.3469 55.809C16.3747 56.0751 18.4882 59.9331 18.4882 59.9331C22.0531 66.0522 27.7975 64.3233 30.1086 63.2588C30.4384 60.6645 31.4955 58.8686 32.618 57.871C23.7698 56.9396 14.4604 53.4808 14.4604 38.0482C14.4604 33.658 16.0441 30.0661 18.5535 27.2727C18.1576 26.2751 16.7706 22.1502 18.9502 16.6294C18.9502 16.6294 22.3175 15.5649 29.9102 20.7535C33.1609 19.874 36.5133 19.4266 39.8808 19.4229C43.2482 19.4229 46.6808 19.889 49.8506 20.7535C57.4441 15.5649 60.8114 16.6294 60.8114 16.6294C62.991 22.1502 61.6033 26.2751 61.2073 27.2727C63.7829 30.0661 65.3012 33.658 65.3012 38.0482C65.3012 53.4808 55.9918 56.8726 47.0775 57.871C48.5306 59.1347 49.7845 61.529 49.7845 65.3208C49.7845 70.7086 49.7192 75.0326 49.7192 76.3624C49.7192 77.4269 50.4457 78.6914 52.4261 78.2922C68.2727 72.9698 79.6955 57.9371 79.6955 40.1771C79.7608 17.9592 61.8678 0 39.8808 0Z",fill:"#24292F"}))),b||(b=i.createElement("defs",null,i.createElement("clipPath",{id:"clip0_1_2"},i.createElement("rect",{width:80,height:78.3673,fill:"white"})))))}var g,O,v,y,x=i.forwardRef(m),S=(n.p,["title","titleId"]);function k(){return k=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},k.apply(this,arguments)}function C(e,t){if(null==e)return{};var n,a,o=function(e,t){if(null==e)return{};var n,a,o={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function E(e,t){var n=e.title,a=e.titleId,o=C(e,S);return i.createElement("svg",k({width:80,height:80,viewBox:"0 0 80 80",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":a},o),n?i.createElement("title",{id:a},n):null,g||(g=i.createElement("path",{d:"M78.6684 31.4968L78.5559 31.2094L67.6673 2.79231C67.4458 2.23535 67.0535 1.76288 66.5468 1.44269C66.0397 1.12793 65.4483 0.97634 64.8524 1.00837C64.2565 1.0404 63.6847 1.25452 63.2144 1.6218C62.7492 1.99964 62.4118 2.51161 62.248 3.08806L54.8958 25.5818H25.125L17.7729 3.08806C17.6134 2.50847 17.2752 1.99393 16.8065 1.61764C16.3361 1.25035 15.7643 1.03624 15.1684 1.0042C14.5725 0.972173 13.9811 1.12377 13.4741 1.43852C12.9685 1.76 12.5766 2.23206 12.3535 2.78814L1.44408 31.1927L1.33578 31.4801C-0.23169 35.5757 -0.425169 40.0698 0.784514 44.2849C1.9942 48.5 4.54146 52.2076 8.04224 54.8486L8.07973 54.8778L8.1797 54.9486L24.7667 67.3701L32.9728 73.5809L37.9714 77.3549C38.5561 77.7988 39.27 78.0391 40.0042 78.0391C40.7383 78.0391 41.4522 77.7988 42.0369 77.3549L47.0355 73.5809L55.2416 67.3701L71.9286 54.8736L71.9703 54.8403C75.4632 52.1988 78.0045 48.495 79.2124 44.2856C80.4202 40.0762 80.2293 35.5885 78.6684 31.4968Z",fill:"#E24329"})),O||(O=i.createElement("path",{d:"M78.6684 31.4968L78.5559 31.2094C73.2503 32.2984 68.2506 34.5458 63.9142 37.7909L40 55.8733C48.1436 62.0341 55.2333 67.3868 55.2333 67.3868L71.9203 54.8903L71.9619 54.857C75.4598 52.2155 78.0051 48.5094 79.2146 44.2964C80.4242 40.0834 80.2324 35.5915 78.6684 31.4968Z",fill:"#FC6D26"})),v||(v=i.createElement("path",{d:"M24.7667 67.3868L32.9728 73.5976L37.9714 77.3715C38.5561 77.8154 39.27 78.0558 40.0042 78.0558C40.7383 78.0558 41.4522 77.8154 42.0369 77.3715L47.0355 73.5976L55.2416 67.3868C55.2416 67.3868 48.1436 62.0175 40 55.8733C31.8564 62.0175 24.7667 67.3868 24.7667 67.3868Z",fill:"#FCA326"})),y||(y=i.createElement("path",{d:"M16.0817 37.7909C11.7487 34.5391 6.75011 32.2859 1.44408 31.1927L1.33578 31.4801C-0.23169 35.5757 -0.425169 40.0698 0.784514 44.2849C1.9942 48.5 4.54146 52.2076 8.04224 54.8486L8.07973 54.8778L8.1797 54.9486L24.7667 67.3701C24.7667 67.3701 31.8481 62.0175 40 55.8567L16.0817 37.7909Z",fill:"#FC6D26"})))}var w,I,T,M=i.forwardRef(E),N=(n.p,["title","titleId"]);function L(){return L=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},L.apply(this,arguments)}function R(e,t){if(null==e)return{};var n,a,o=function(e,t){if(null==e)return{};var n,a,o={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function D(e,t){var n=e.title,a=e.titleId,o=R(e,N);return i.createElement("svg",L({width:80,height:72,viewBox:"0 0 80 72",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":a},o),n?i.createElement("title",{id:a},n):null,w||(w=i.createElement("path",{d:"M2.56814 0C0.969637 0 -0.229232 1.4653 0.0371687 2.9306L10.8271 69.0024C11.0935 70.7344 12.5589 71.9331 14.2906 71.9331H66.5087C67.7077 71.9331 68.7734 71.0008 69.0398 69.8018L79.9628 3.06384C80.2294 1.4653 79.0304 0.133233 77.4321 0.133233L2.56814 0ZM48.3924 47.6891H31.741L27.345 24.111H52.5217L48.3924 47.6891Z",fill:"#2684FF"})),I||(I=i.createElement("path",{d:"M76.3661 24.111H52.3884L48.392 47.689H31.7407L12.159 71.0007C12.159 71.0007 13.0915 71.8001 14.4236 71.8001H66.6417C67.8407 71.8001 68.9064 70.8674 69.1727 69.6684L76.3661 24.111Z",fill:"url(#paint0_linear_1_38)"})),T||(T=i.createElement("defs",null,i.createElement("linearGradient",{id:"paint0_linear_1_38",x1:81.9751,y1:30.755,x2:42.24,y2:61.7721,gradientUnits:"userSpaceOnUse"},i.createElement("stop",{offset:.176,stopColor:"#0052CC"}),i.createElement("stop",{offset:1,stopColor:"#2684FF"})))))}var A,_,P=i.forwardRef(D),U=(n.p,n(1));!function(e){e.NONE="NONE",e.AWS_CODE_COMMIT="AWS_CODE_COMMIT",e.GITHUB="GITHUB",e.GITLAB="GITLAB",e.BITBUCKET="BITBUCKET"}(_||(_={}));var G={label:"None",value:_.NONE},F={label:"AWS Code Commit",value:_.AWS_CODE_COMMIT,iconSvg:Object(U.jsx)(p,{})},B={label:"GitHub",value:_.GITHUB,iconSvg:Object(U.jsx)(x,{})},q={label:"Gitlab",value:_.GITLAB,iconSvg:Object(U.jsx)(M,{})},J={label:"Bitbucket",value:_.BITBUCKET,iconSvg:Object(U.jsx)(P,{})},V=(A={},Object(r.a)(A,_.AWS_CODE_COMMIT,F),Object(r.a)(A,_.GITHUB,B),Object(r.a)(A,_.GITLAB,q),Object(r.a)(A,_.BITBUCKET,J),Object(r.a)(A,_.NONE,G),A),W=[_.GITLAB,_.GITHUB,_.BITBUCKET]},2727:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=n(2),o=n(97),r=n(76),i=n(124),s=n(0);function c(){var e=Object(o.c)(r.f,"batchStopJobRun"),t=Object(a.a)(e,2)[1],n=Object(i.a)(!0).pushNotification;return Object(s.useEffect)((function(){var e=function(e){switch(e.status){case"success":return{type:"success",header:"Successfully stopped job",content:"Successfully stopped job ".concat(e.params.JobName,"."),dismissLabel:"Dismiss successfully stopped job notification"};case"error":return{type:"error",header:"Failed to stop job",content:e.errorMessage,dismissLabel:"Dismiss failed to update job notification"};case"loading":return{type:"loading",header:"Stopping job",content:"Stopping job ".concat(e.params.JobName,", please wait."),dismissLabel:"Dismiss starting job loading indicator"};default:return}}(t);e&&n(e)}),[n,t]),e}},2728:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var a=n(2),o=n(103),r=n(82),i=n(0),s=n(891),c=n(1),l=function(e){var t=e.onActionComplete,n=e.jobName,l=e.jobRunId,u=Object(i.useState)(!1),d=Object(a.a)(u,2),b=d[0],p=d[1],f=Object(i.useCallback)((function(){null===t||void 0===t||t(),p(!1)}),[p,t]),j=function(){return b?Object(c.jsx)(s.a,{jobName:n||"Invalid job name",runId:l,type:"rewind",isVisible:b,onDismiss:f}):null};return Object(c.jsxs)(o.default,{children:[Object(c.jsx)(r.default,{formAction:"none",onClick:function(){return p(!0)},children:"Rewind job bookmark"}),Object(c.jsx)(j,{})]})}},2729:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));n(0);var a=n(551),o=n(29),r=n(14),i=n(1);function s(e){var t=e.item;return null!==t&&void 0!==t&&t.ProfileName?Object(i.jsx)(a.a,{external:!0,ariaLabel:"view usage profile detail",href:"".concat(Object(o.getPartitionedBaseUrl)(),"glue/home?region=").concat(r.c,"#/v2/usage-profiles/view/").concat(Object(o.safeEncode)(t.ProfileName||"")),children:t.ProfileName}):Object(i.jsx)(i.Fragment,{children:"-"})}},2730:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var a=n(3),o={minimumFractionDigits:0,maximumFractionDigits:0};function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o;return new Intl.NumberFormat("en-US",Object(a.a)(Object(a.a)({},e),{},{style:"percent"}))}},2731:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n(2);function o(e){var t=e.dag,n=e.selectedNodeId,o=e.preview,r=e.error;if("DataSink"===t[n].classification){var i=Object(a.a)(t[n].inputs,1)[0];return i?null===o||void 0===o?void 0:o[i]:[[]]}return r?[[]]:null===o||void 0===o?void 0:o[n]}},2732:function(e,t,n){"use strict";n.d(t,"d",(function(){return c})),n.d(t,"b",(function(){return l})),n.d(t,"c",(function(){return u})),n.d(t,"a",(function(){return d})),n.d(t,"e",(function(){return b}));var a=n(29),o=n(14),r=n(2717),i=n(2715),s=n(2718),c=function(e){return e?s.a[e]:s.a.NONE},l=function(e){return{label:e||"",value:e||""}},u=function(e){return e?e===s.b.AWS_CODE_COMMIT?"AWS Code Commit":e===s.b.GITHUB?"GitHub":e===s.b.GITLAB?"Gitlab":e===s.b.BITBUCKET?"Bitbucket":"N/A":"N/A"},d=function(e,t,n,c){if(![e,t,n,c].every(Boolean))return"#";switch(e){case s.b.AWS_CODE_COMMIT:return"".concat(Object(a.getPartitionedBaseUrl)(),"codesuite/codecommit/repositories/").concat(t,"/commit/").concat(c,"?region=").concat(o.c,"#");case s.b.GITHUB:return"https://github.com/".concat(Object(r.a)(),"/").concat(t,"/commit/").concat(c);case s.b.GITLAB:return"https://gitlab.com/".concat(Object(i.c)(),"/").concat(t,"/commit/").concat(c);case s.b.BITBUCKET:return"https://bitbucket.com/".concat(t,"/commits/").concat(c);default:return"#"}},b=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").split("/")||[];return[e[0],e.slice(1).join("/")]}},2733:function(e,t,n){"use strict";n.d(t,"a",(function(){return E})),n.d(t,"b",(function(){return T})),n.d(t,"c",(function(){return N})),n.d(t,"d",(function(){return L}));var a=n(0),o=n(61),r=n(973),i=n(49),s=n(283),c=n(30),l=n(396),u=n(756),d=n(2768),b=n(2712),p=n(2713),f=n(2692),j=n(137),h=n(1),m=function(e){var t,n,a,o,r=e.jobRun,i=r.ExecutionArguments,s=void 0===i?{}:i,c="true"===s[j.e.logging];return Object(h.jsxs)("ul",{children:[!(null!==r&&void 0!==r&&null!==(t=r.WorkerType)&&void 0!==t&&t.includes("Z."))&&c&&Object(h.jsx)("li",{children:Object(h.jsx)(u.a,{url:Object(f.a)(r,"log",s),label:b.a.labelLogs})}),(null===r||void 0===r||null===(n=r.WorkerType)||void 0===n?void 0:n.includes("Z."))&&Object(h.jsx)("li",{children:Object(h.jsx)(u.a,{url:Object(f.c)(r),label:b.a.labelLogs})}),!(null!==r&&void 0!==r&&null!==(a=r.WorkerType)&&void 0!==a&&a.includes("Z."))&&Object(h.jsx)("li",{children:Object(h.jsx)(u.a,{url:Object(f.a)(r,"output",s),label:b.a.labelOutputLogs})}),!(null!==r&&void 0!==r&&null!==(o=r.WorkerType)&&void 0!==o&&o.includes("Z."))&&Object(h.jsx)("li",{children:Object(h.jsx)(u.a,{url:Object(f.a)(r,"error",s),label:b.a.labelErrorLogs})})]})},g=n(2693),O=n(29);function v(e){var t=e.run,n=Object(g.a)();return t&&t.JobName?Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(s.b,{to:"/job/".concat(Object(l.a)(t.JobName),"/run/").concat(t.Id),"aria-label":n.copy.idLinkAriaLabel,children:t.Id}),Object(h.jsx)(O.CopyToClipboardButton,{variant:"inline",buttonAriaLabel:n.copy.copyId,valueToCopy:null===t||void 0===t?void 0:t.Id,popoverContent:n.copy.idCopied})]}):Object(h.jsx)(h.Fragment,{})}var y=n(1279),x=n.n(y),S=n(2729),k=n(2675),C=function(e){var t=null===e||void 0===e?void 0:e.ExecutionTime,n=null===e||void 0===e?void 0:e.StartedOn,a=null===e||void 0===e?void 0:e.CompletedOn;return t&&n&&a?(new Date(a).getTime()-new Date(n).getTime())/1e3-t:0},E=function(e){var t=e.attributeGetter,n=e.run;return Object(h.jsxs)("dl",{children:[Object(h.jsx)("dt",{className:"awsui-util-label",children:t.label}),Object(h.jsx)("dd",{className:"m0",children:t.key(n)})]})},w={label:b.a.labelUsageProfileName,condition:function(){return c.a.isEnabled("feature-usage-profiles")},key:function(e){return Object(h.jsx)(S.a,{item:e})}},I=function(e){return e||(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"-")},T=[{label:b.a.labelJobName,key:function(e){return(null===e||void 0===e?void 0:e.JobName)&&Object(h.jsx)(s.b,{to:"/editor/job/".concat(Object(l.a)(e.JobName),"/details"),children:e.JobName})}},{label:b.a.labelId,key:function(e){return Object(h.jsx)(v,{run:e})}},{label:b.a.labelRunStatus,key:function(e){return p.a[null===e||void 0===e?void 0:e.JobRunState]}},{label:b.a.labelVersion,key:function(e){return null===e||void 0===e?void 0:e.GlueVersion}},{label:b.a.labelRecentAttempt,key:function(e){return I(null===e||void 0===e?void 0:e.Attempt,Object(h.jsx)(o.a,{id:"jobRun.label.initial.run",defaultMessage:"Initial run",description:"Initial run label."}))}},{label:b.a.labelStartTime,key:function(e){var t;return null!==e&&void 0!==e&&e.StartedOn?Object(k.c)(null===e||void 0===e||null===(t=e.StartedOn)||void 0===t?void 0:t.toISOString(),!0):"-"}},{label:b.a.labelEndTime,key:function(e){var t;return null!==e&&void 0!==e&&e.CompletedOn?Object(k.c)(null===e||void 0===e||null===(t=e.CompletedOn)||void 0===t?void 0:t.toISOString(),!0):"-"}},{label:b.a.labelStartUpTime,key:function(e){return C(e)&&Object(h.jsx)(d.a,{seconds:C(e)})},condition:function(e){var t;return!(null!==e&&void 0!==e&&null!==(t=e.WorkerType)&&void 0!==t&&t.includes("Z."))}},{label:b.a.labelExecutionTime,key:function(e){return"number"===typeof(null===e||void 0===e?void 0:e.ExecutionTime)&&Object(h.jsx)(d.a,{seconds:null===e||void 0===e?void 0:e.ExecutionTime})}},{label:b.a.labelLastModifiedTime,key:function(e){var t;return null!==e&&void 0!==e&&e.LastModifiedOn?Object(k.c)(null===e||void 0===e||null===(t=e.LastModifiedOn)||void 0===t?void 0:t.toISOString(),!0):"-"}},{label:b.a.labelTriggerName,key:function(e){return I(null===e||void 0===e?void 0:e.TriggerName)}},{label:b.a.labelSecurityConfiguration,key:function(e){return I(null===e||void 0===e?void 0:e.SecurityConfiguration)}},{label:b.a.labelTimeout,key:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).Timeout,t=void 0===e?0:e;return Object(h.jsxs)(h.Fragment,{children:[t," ",Object(h.jsx)(r.a,{value:t,one:"minute",other:"minutes"})]})}},{label:b.a.labelDPUhours,key:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).DPUSeconds;if(e){var t=e/3600;return Object(h.jsx)(i.FormattedNumber,{value:t,maximumFractionDigits:6})}return null},condition:function(e){return!(null===e||void 0===e||!e.DPUSeconds)}},{label:b.a.labelMaxCapacity,key:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).MaxCapacity,t=void 0===e?0:e;return Object(h.jsxs)(h.Fragment,{children:[t," ",Object(h.jsx)(r.a,{value:t,one:"DPU",other:"DPUs"})]})}},{label:b.a.labelNumberOfWorkers,key:function(e){return I(null===e||void 0===e?void 0:e.NumberOfWorkers)}},{label:b.a.labelWorkerType,key:function(e){return I(null===e||void 0===e?void 0:e.WorkerType)}},{label:b.a.labelExecutionClass,key:function(e){return I(x()(null===e||void 0===e?void 0:e.ExecutionClass))}},{label:b.a.labelLogGroupName,key:function(e){return I(null===e||void 0===e?void 0:e.LogGroupName)}},{label:b.a.labelCloudwatchLogs,key:function(e){return Object(h.jsx)(m,{jobRun:e})}},{label:b.a.labelJobInsightsLogs,key:function(e){return Object(h.jsx)("ul",{children:Object(h.jsx)("li",{children:Object(h.jsx)(u.a,{url:Object(f.a)(e,"jobInsights",null===e||void 0===e?void 0:e.ExecutionArguments),label:b.a.labelJobInsightsLogsLink})})})},condition:function(e){var t;return!(null!==e&&void 0!==e&&null!==(t=e.WorkerType)&&void 0!==t&&t.includes("Z."))&&c.a.isEnabled("feature-enable-autotune")&&!Object(f.b)(null===e||void 0===e?void 0:e.GlueVersion)}},w],M=[{label:b.a.labelJobName,key:function(e){return(null===e||void 0===e?void 0:e.JobName)&&Object(h.jsx)(s.b,{to:"/editor/job/".concat(Object(l.a)(e.JobName),"/details"),children:e.JobName})}},{label:b.a.labelStartTime,key:function(e){var t;return null!==e&&void 0!==e&&e.StartedOn?Object(k.c)(null===e||void 0===e||null===(t=e.StartedOn)||void 0===t?void 0:t.toISOString(),!0):"-"}},{label:b.a.labelDPUhours,key:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).DPUSeconds;if(e){var t=e/3600;return Object(h.jsx)(i.FormattedNumber,{value:t,maximumFractionDigits:6})}return null},condition:function(e){return!(null===e||void 0===e||!e.DPUSeconds)}},{label:b.a.labelVersion,key:function(e){return null===e||void 0===e?void 0:e.GlueVersion}},{label:b.a.labelLastModifiedTime,key:function(e){var t;return null!==e&&void 0!==e&&e.LastModifiedOn?Object(k.c)(null===e||void 0===e||null===(t=e.LastModifiedOn)||void 0===t?void 0:t.toISOString(),!0):"-"}},{label:b.a.labelId,key:function(e){return Object(h.jsx)(v,{run:e})}},{label:b.a.labelEndTime,key:function(e){var t;return null!==e&&void 0!==e&&e.CompletedOn?Object(k.c)(null===e||void 0===e||null===(t=e.CompletedOn)||void 0===t?void 0:t.toISOString(),!0):"-"}},{label:b.a.labelWorkerType,key:function(e){return I(null===e||void 0===e?void 0:e.WorkerType)}},{label:b.a.labelLogGroupName,key:function(e){return I(null===e||void 0===e?void 0:e.LogGroupName)}},{label:b.a.labelRunStatus,key:function(e){return p.a[null===e||void 0===e?void 0:e.JobRunState]}},{label:b.a.labelStartUpTime,key:function(e){return C(e)&&Object(h.jsx)(d.a,{seconds:C(e)})},condition:function(e){var t;return!(null!==e&&void 0!==e&&null!==(t=e.WorkerType)&&void 0!==t&&t.includes("Z."))}},{label:b.a.labelMaxCapacity,key:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).MaxCapacity,t=void 0===e?0:e;return Object(h.jsxs)(h.Fragment,{children:[t," ",Object(h.jsx)(r.a,{value:t,one:"DPU",other:"DPUs"})]})}},{label:b.a.labelNumberOfWorkers,key:function(e){return I(null===e||void 0===e?void 0:e.NumberOfWorkers)}},{label:b.a.labelRecentAttempt,key:function(e){return I(null===e||void 0===e?void 0:e.Attempt,Object(h.jsx)(o.a,{id:"jobRun.label.initial.run",defaultMessage:"Initial run",description:"Initial run label."}))}},{label:b.a.labelExecutionTime,key:function(e){return"number"===typeof(null===e||void 0===e?void 0:e.ExecutionTime)&&Object(h.jsx)(d.a,{seconds:null===e||void 0===e?void 0:e.ExecutionTime})}},{label:b.a.labelExecutionClass,key:function(e){return I(x()(null===e||void 0===e?void 0:e.ExecutionClass))}},{label:b.a.labelTimeout,key:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).Timeout,t=void 0===e?0:e;return Object(h.jsxs)(h.Fragment,{children:[t," ",Object(h.jsx)(r.a,{value:t,one:"minute",other:"minutes"})]})}},{label:b.a.labelTriggerName,key:function(e){return I(null===e||void 0===e?void 0:e.TriggerName)}},{label:b.a.labelSecurityConfiguration,key:function(e){return I(null===e||void 0===e?void 0:e.SecurityConfiguration)}},{label:b.a.labelCloudwatchLogs,key:function(e){return Object(h.jsx)(m,{jobRun:e})}},w],N=function(e){return Object(a.useMemo)((function(){return T.filter((function(t){return!(null!==t&&void 0!==t&&t.condition)||t.condition(e)})).map((function(t,n){return Object(h.jsx)(E,{run:e,attributeGetter:t},n)}))}),[e])},L=function(e){return Object(a.useMemo)((function(){return M.filter((function(t){return!(null!==t&&void 0!==t&&t.condition)||t.condition(e)})).map((function(t,n){return Object(h.jsx)(E,{run:e,attributeGetter:t},n)}))}),[e])}},2734:function(e,t,n){"use strict";n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return c}));var a=n(8),o=n(2746),r=n(2750),i=([].concat(Object(a.a)(o.a),Object(a.a)(r.a),Object(a.a)([])),function(e){return o.a.includes(e)}),s=function(e){return r.a.includes(e)},c=function(e){return!1}},2735:function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var a=n(2),o=n(99),r=n(82),i=n(310),s=n(0),c=n(351),l=n(61),u=n(498),d=n(3),b=n(103),p=n(2580),f=n(2740),j=n(1);function h(e){var t=e.nodes,n=void 0===t?[]:t,a=e.columnDefinitions,o=e.onSelectionChange,r=e.selected,i=Object(s.useMemo)((function(){return Object(u.c)(n,f.a,(function(e){return"array"===e.type}))}),[n]),c=Object(s.useMemo)((function(){return i.filter((function(e){var t=e.id;return r.includes(t)}))}),[i,r]),h=Object(p.b)(i,{columnDefinitions:a,keyPropertyName:"id",parentKeyPropertyName:"parentId",sorting:{},selection:{keepSelection:!0,trackBy:"id",defaultSelectedItems:c},filtering:{empty:"No items found",noMatch:"No items found"}}),m=h.items,g=h.collectionProps,O=h.actions,v=h.expandNode;return Object(j.jsx)(p.a,Object(d.a)(Object(d.a)({},g),{},{columnDefinitions:a,expandChildren:v,resizableColumns:!0,onSelectionChange:function(e){var t=e.detail,n=t.selectedItems.map((function(e){return e.id}));O.setSelectedItems(t.selectedItems),null===o||void 0===o||o(n)},selectionType:"multi",items:m,header:Object(j.jsx)(b.default,{variant:"h2",children:Object(j.jsx)(l.a,{id:"node.detail.tab.data-preview.table.fieldSelection.tableTitle",defaultMessage:"Schema",description:"Title of the table to select fields for data preview."})})}))}var m=[{id:"field",header:"Field",cell:function(e){return e.label}},{id:"type",header:"Data type",cell:function(e){return e.type}}];function g(e){var t=e.schema,n=e.selected,d=e.onChange,b=Object(c.a)(),p=Object(s.useMemo)((function(){var e;return null===(e=Object(u.c)(t,(function(e){return e})))||void 0===e?void 0:e.length}),[t]),f=Object(s.useState)(n),g=Object(a.a)(f,2),O=g[0],v=g[1],y=Object(s.useState)(!1),x=Object(a.a)(y,2),S=x[0],k=x[1],C=Object(s.useCallback)((function(){return k(!0)}),[]);Object(s.useEffect)((function(){v(n)}),[n]);var E=Object(s.useCallback)((function(e){t.forEach((function(t){t.previewField=e.includes(t.key)}))}),[t]),w=Object(s.useCallback)((function(){v(n),k(!1)}),[n]),I=Object(s.useCallback)((function(){d(O),E(O),k(!1)}),[O,d,E]);return Object(j.jsxs)(o.default,{size:"s",children:[Object(j.jsx)(r.default,{formAction:"none",wrapText:!1,onClick:C,"data-e2e":"datapreviewFieldSelectionButton",children:Object(j.jsx)(l.a,{id:"node.detail.tab.data-preview.table.fieldSelection.button",defaultMessage:"Previewing {selectedFields} of {totalFields} fields",description:"Button opening to modal to customize the fields to preview.",values:{selectedFields:n.length,totalFields:p}})}),Object(j.jsx)(i.default,{visible:S,onDismiss:w,size:"large",header:Object(j.jsx)(l.a,{id:"node.detail.tab.data-preview.table.fieldSelection.title",defaultMessage:"Choose fields for data preview",description:"Title of the modal dialog allowing the customer to pick fields to preview."}),closeAriaLabel:b.formatMessage({id:"node.detail.tab.data-preview.table.fieldSelection.close",defaultMessage:"Cancel field selection",description:"Screenreader-only text of the button to close the modal dialog to pick fields to preview without taking any action."}),footer:Object(j.jsxs)("span",{className:"awsui-util-f-r",children:[Object(j.jsx)(r.default,{formAction:"none",variant:"link",onClick:w,children:Object(j.jsx)(l.a,{id:"node.detail.tab.data-preview.table.fieldSelection.cancel",defaultMessage:"Cancel",description:"Text of the Cancel button in the modal dialog allowing the customer to pick fields to preview."})}),Object(j.jsx)(r.default,{formAction:"none",variant:"primary",onClick:I,"data-e2e":"datapreviewFieldSelectionConfirmButton",children:Object(j.jsx)(l.a,{id:"node.detail.tab.data-preview.table.fieldSelection.confirm",defaultMessage:"Confirm",description:"Text of the Confirm button in the modal dialog allowing the customer to pick fields to preview."})})]}),children:S&&Object(j.jsx)(h,{nodes:t,columnDefinitions:m,selected:n,onSelectionChange:v})})]})}},2737:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));n(0);var a=n(61),o=n(100),r=n(1),i=o.i().max(255,(function(e){var t=e.max;return Object(r.jsx)(a.a,{id:"jobs.details.name.max",defaultMessage:"Name must be at most {max} characters.",description:"Validation error message when the name for a job is too long.",values:{max:t}})})).matches(/^((?![#?]).)*$/,{message:function(){return Object(r.jsx)(a.a,{id:"jobs.details.name.matches",defaultMessage:'Name cannot contain the characters "#" or "?".',description:"Validation error message when the name for a job contains forbidden characters."})}}).required((function(){return Object(r.jsx)(a.a,{id:"jobs.details.name.required",defaultMessage:"Name is required.",description:"Validation error message when the name for a job is missing."})}))},2742:function(e,t,n){},2743:function(e,t,n){"use strict";n.d(t,"a",(function(){return f})),n.d(t,"b",(function(){return j}));var a=n(2),o=n(281),r=n(99),i=n(284),s=n(61),c=n(104),l=n(2728),u=n(2687),d=n(2675),b=n(1),p=Object(c.a)((function(){return Promise.all([n.e(0),n.e(1),n.e(2),n.e(3),n.e(21)]).then(n.bind(null,2773))})),f=function(e){var t=e.args,n=void 0===t?{}:t,o=Object.entries(n).map((function(e){var t=Object(a.a)(e,2);return{key:t[0],value:t[1]}})).sort();return Object(b.jsx)(i.default,{columnDefinitions:[{header:"Key",cell:function(e){return e.key}},{header:"Value",cell:function(e){var t=e.value;return t||"-"}}],items:o,empty:Object(b.jsx)(s.a,{id:"job.details.arguments.table.empty",defaultMessage:"No job arguments were used in this job run.",description:"Message to show when the job argumetns table is empty because no arguments were passed."})})},j={header:function(e){var t;return Object(b.jsxs)(o.a,{variant:"h3",actions:Object(b.jsxs)(r.default,{size:"s",direction:"horizontal",children:[Object(b.jsx)(l.a,{jobName:null===e||void 0===e?void 0:e.JobName,jobRunId:null===e||void 0===e?void 0:e.Id}),Object(u.a)(null===e||void 0===e?void 0:e.JobRunState)&&Object(b.jsx)(u.b,{jobName:null===e||void 0===e?void 0:e.JobName,jobRunId:null===e||void 0===e?void 0:e.Id,jobRunState:null===e||void 0===e?void 0:e.JobRunState})]}),children:[e.StartedOn&&Object(d.c)(null===e||void 0===e||null===(t=e.StartedOn)||void 0===t?void 0:t.toISOString(),!0),","]})},sections:[{id:"columns",content:function(e){return Object(b.jsx)(p,{jobRun:e,isLoading:!1})}}]}},2744:function(e,t,n){"use strict";n.d(t,"y",(function(){return h})),n.d(t,"x",(function(){return m})),n.d(t,"m",(function(){return g})),n.d(t,"j",(function(){return O})),n.d(t,"h",(function(){return v})),n.d(t,"a",(function(){return y})),n.d(t,"k",(function(){return x})),n.d(t,"u",(function(){return S})),n.d(t,"i",(function(){return k})),n.d(t,"b",(function(){return C})),n.d(t,"d",(function(){return E})),n.d(t,"c",(function(){return w})),n.d(t,"t",(function(){return I})),n.d(t,"v",(function(){return T})),n.d(t,"e",(function(){return M})),n.d(t,"g",(function(){return N})),n.d(t,"f",(function(){return L})),n.d(t,"l",(function(){return R})),n.d(t,"w",(function(){return A})),n.d(t,"r",(function(){return _})),n.d(t,"s",(function(){return P})),n.d(t,"q",(function(){return U})),n.d(t,"o",(function(){return G})),n.d(t,"p",(function(){return F})),n.d(t,"n",(function(){return B}));var a=n(3),o=n(24),r=n(10),i=n.n(r),s=(n(0),n(551)),c=n(207),l=n(171),u=n(61),d=n(2732),b=n(46),p=n(752),f=n(95),j=n(1),h=function(){return Object(j.jsx)(u.a,{id:"verionControlTab.container.title",defaultMessage:"Git configuration"})},m=function(){return Object(j.jsx)(u.a,{id:"verionControlTab.vcsFormField.label",defaultMessage:"Git service"})},g=function(){return Object(j.jsx)(u.a,{id:"verionControlTab.ghPatFormField.label",defaultMessage:"Personal access token"})},O=function(){return Object(j.jsx)(u.a,{id:"verionControlTab.ghPatFormField.label",defaultMessage:"Enter your {patLink} for the GitHub repository.",values:{patLink:Object(j.jsx)(s.a,{external:!0,fontSize:"body-s",href:"https://docs.github.com/en/authentication/keeping-your-account-and-data-secure/creating-a-personal-access-token",children:"personal access token"})}})},v=function(){return Object(j.jsx)(u.a,{id:"verionControlTab.ghPatFormField.label",defaultMessage:"Enter your {patLink} for the Gitlab repository.",values:{patLink:Object(j.jsx)(s.a,{external:!0,fontSize:"body-s",href:"https://docs.gitlab.com/ee/user/profile/personal_access_tokens.html",children:"personal access token"})}})},y=function(){return Object(j.jsx)(u.a,{id:"verionControlTab.ghPatFormField.label",defaultMessage:"Enter your {patLink} for the Bitbucket repository.",values:{patLink:Object(j.jsx)(s.a,{external:!0,fontSize:"body-s",href:"https://developer.atlassian.com/cloud/bitbucket/rest/intro/#basic-auth",children:"personal access token"})}})},x=function(){return Object(j.jsx)(u.a,{id:"verionControlTab.ghRepoOwnerFormField.label",defaultMessage:"Enter the name of the GitHub user or organization that owns the repository. You can find it in the URL: https://github.com/OWNER_NAME."})},S=function(){return Object(j.jsx)(u.a,{id:"verionControlTab.ghRepoOwnerFormField.label",defaultMessage:"Repository owner"})},k=function(){return Object(j.jsx)(u.a,{id:"verionControlTab.ghRepoOwnerFormField.label",defaultMessage:"Enter the name of the Gitlab account or organization that owns the repository. You can find it in the URL: https://gitlab.com/OWNER_NAME."})},C=function(){return Object(j.jsx)(u.a,{id:"verionControlTab.ghRepoOwnerFormField.label",defaultMessage:"Enter the name of the Bitbucket account or organization that owns the repository. You can find it in the settings page https://bitbucket.org/account/settings."})},E=function(){return Object(j.jsx)(u.a,{id:"verionControlTab.ghRepoOwnerFormField.label",defaultMessage:"Workspace"})},w=function(){return Object(j.jsx)(u.a,{id:"verionControlTab.ghRepoOwnerFormField.label",defaultMessage:"Select Bitbucket workspace in which the repository exists"})},I=function(){return Object(j.jsx)(u.a,{id:"verionControlTab.repoConfigContainer.label",defaultMessage:"Repository configuration"})},T=function(){return Object(j.jsx)(u.a,{id:"verionControlTab.repoSelectorFormField.label",defaultMessage:"Repository"})},M=function(){return Object(j.jsx)(u.a,{id:"verionControlTab.branchSelectorFormField.label",defaultMessage:"Branch"})},N=function(){return Object(j.jsx)(u.a,{id:"verionControlTab.folderInputFormField.label",defaultMessage:"Folder"})},L=function(){return Object(j.jsx)(u.a,{id:"verionControlTab.folderInputFormField.description",defaultMessage:"Override the default folder name otherwise the job name will be used if blank."})},R=function(){return Object(j.jsx)(u.a,{id:"verionControlTab.notSynced.message",defaultMessage:"Your job has not been committed to version control. If you wish to do so, choose the {option} option from the {actions} dropdown.",values:{option:Object(j.jsx)("strong",{children:"Push to repository"}),actions:Object(j.jsx)("strong",{children:"Actions"})}})},D={retry:!1},A=function(){var e,t=Object(b.a)().values,n=Object(p.a)(Object(a.a)({queryKey:["GetJob",t.jobConfig.name],queryFn:(e=t.jobConfig.name,Object(o.a)(i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",f.a.getJob({JobName:e}).promise());case 1:case"end":return t.stop()}}),t)}))))},D)),r=n.data;if("loading"===n.status)return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(c.a,{}),Object(j.jsx)(u.a,{id:"commit.loading",defaultMessage:"Loading commit information"})]});if(void 0===r||void 0===r.Job||void 0===r.Job.SourceControlDetails)return null;var h=r.Job.SourceControlDetails,m=h.Provider,g=h.Repository,O=h.Branch,v=h.LastCommitId;return"NONE"===m||[g,O,v].some((function(e){return void 0===e}))?null:Object(j.jsx)(l.default,{type:"info",header:"Latest commit",children:Object(j.jsx)(u.a,{id:"verionControlTab.synced.message",defaultMessage:"Latest available commit {commit} is from {provider} on {repo}/{branch}.",values:{provider:Object(j.jsx)("strong",{children:Object(d.c)(m)}),repo:Object(j.jsx)("strong",{children:g}),branch:Object(j.jsx)("strong",{children:O}),commit:Object(j.jsx)(s.a,{href:Object(d.a)(m,g,O,v),external:!0,children:(null===v||void 0===v?void 0:v.slice(0,6))||"N/A"})}})})},_=function(e){var t=e.jobName,n=e.provider,a=e.repo;return{type:"loading",header:Object(j.jsx)(u.a,{id:"push.loading.header",defaultMessage:"Push to repository"}),content:Object(j.jsx)(u.a,{id:"push.loading.content",defaultMessage:"Pushing job {jobName} to {provider} on {repo}.",values:{jobName:Object(j.jsx)("strong",{children:t}),provider:Object(j.jsx)("strong",{children:n}),repo:Object(j.jsx)("strong",{children:a})}}),dismissLabel:"Dismiss"}},P=function(e){var t=e.jobName,n=e.provider,a=e.repo;return{type:"success",header:Object(j.jsx)(u.a,{id:"push.success.header",defaultMessage:"Push to repository"}),content:Object(j.jsx)(u.a,{id:"push.success.content",defaultMessage:"Successfully pushed job {jobName} to {provider} at {repo}.",values:{jobName:Object(j.jsx)("strong",{children:t}),provider:Object(j.jsx)("strong",{children:n}),repo:Object(j.jsx)("strong",{children:a})}}),dismissLabel:"Dismiss"}},U=function(e){var t=e.jobName,n=e.provider,a=e.repo,o=e.err;return{type:"error",header:Object(j.jsx)(u.a,{id:"push.error.header",defaultMessage:"Push to repository"}),content:Object(j.jsx)(u.a,{id:"push.error.content",defaultMessage:"Unable to push job {jobName} to {provider} at {repo}. {err}.",values:{err:o,jobName:Object(j.jsx)("strong",{children:t}),provider:Object(j.jsx)("strong",{children:n}),repo:Object(j.jsx)("strong",{children:a})}}),dismissLabel:"Dismiss"}},G=function(e){var t=e.jobName,n=e.provider,a=e.repo;return{type:"loading",header:Object(j.jsx)(u.a,{id:"pull.loading.header",defaultMessage:"Pull from repository"}),content:Object(j.jsx)(u.a,{id:"pull.loading.content",defaultMessage:"Pulling job {jobName} from {provider} on {repo}.",values:{jobName:Object(j.jsx)("strong",{children:t}),provider:Object(j.jsx)("strong",{children:n}),repo:Object(j.jsx)("strong",{children:a})}}),dismissLabel:"Dismiss"}},F=function(e){var t=e.jobName,n=e.provider,a=e.repo;return{type:"success",header:Object(j.jsx)(u.a,{id:"pull.success.header",defaultMessage:"Pull from repository"}),content:Object(j.jsx)(u.a,{id:"pull.success.content",defaultMessage:"Successfully pulled job {jobName} from {provider} at {repo}.",values:{jobName:Object(j.jsx)("strong",{children:t}),provider:Object(j.jsx)("strong",{children:n}),repo:Object(j.jsx)("strong",{children:a})}}),dismissLabel:"Dismiss"}},B=function(e){var t=e.jobName,n=e.provider,a=e.repo,o=e.err;return{type:"error",header:Object(j.jsx)(u.a,{id:"pull.error.header",defaultMessage:"Pull from repository"}),content:Object(j.jsx)(u.a,{id:"pull.error.content",defaultMessage:"Unable to pull job {jobName} from {provider} at {repo}. {err}.",values:{err:o,jobName:Object(j.jsx)("strong",{children:t}),provider:Object(j.jsx)("strong",{children:n}),repo:Object(j.jsx)("strong",{children:a})}}),dismissLabel:"Dismiss"}}},2745:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n(24),o=n(10),r=n.n(o);function i(e,t){return s.apply(this,arguments)}function s(){return(s=Object(a.a)(r.a.mark((function e(t,n){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=0;case 1:if(!(a<t.length)){e.next=7;break}return e.next=4,n(t[a],a,t);case 4:a++,e.next=1;break;case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},2746:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return s})),n.d(t,"c",(function(){return c}));var a=n(14),o=n(757),r=n(2804),i=["visual-join-csv"],s={"visual-join-csv":JSON.stringify(r)},c=[{key:"<REGION>",replacement:a.c},{key:"<TEMPORARY_DIRECTORY>",replacement:o.g}]},2750:function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"c",(function(){return u})),n.d(t,"b",(function(){return d}));var a=n(2805),o=n(2806),r=n(2807),i={language:"python",engine:"glueray"},s={language:"python",engine:"glueetl"},c={language:"python",engine:"glueetl"},l=["notebook-ray","notebook-spark-pandas","notebook-spark-sql"],u={"notebook-ray":JSON.stringify(a),"notebook-spark-pandas":JSON.stringify(o),"notebook-spark-sql":JSON.stringify(r)},d={"notebook-ray":i,"notebook-spark-pandas":s,"notebook-spark-sql":c}},2751:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n(3),o=n(757),r=n(30),i=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return t.reduce((function(e,t){return t(e)}),e)}}((function(e){var t=function(){if(r.a.isEnabled("feature-glue-4"))return"4.0";return r.a.isEnabled("feature-spark-3")||!r.a.isEnabled("feature-deprecate-glue-2")?"3.0":"2.0"}();return Object(a.a)(Object(a.a)({},e),{},{version:t})}),(function(e){var t=r.a.isEnabled("feature-enable-autotune")&&["2.0","3.0"].some((function(t){return t===e.version}));return Object(a.a)(Object(a.a)({},e),{},{etlAutoTuning:t})}))(Object(a.a)(Object(a.a)({command:"glueetl",description:"",role:"",scriptName:"",version:"3.0",language:"python-3",scriptLocation:"".concat(o.e,"/scripts/"),temporaryDirectory:"".concat(o.e,"/temporary/"),timeout:2880,maxConcurrentRuns:1,workerType:"G.1X",numberOfWorkers:o.d,maxRetries:0,metrics:!0,observabilityMetrics:!!r.a.isEnabled("feature-monitoring-resource-usage"),security:"none",bookmark:"job-bookmark-disable",logging:!0},{spark:!0,sparkConfiguration:"standard"}),{},{sparkPath:"".concat(o.e,"/sparkHistoryLogs/"),serverEncryption:!1,glueHiveMetastore:!0,etlAutoScaling:!1,etlAutoTuning:!1,etlAutoTuningJobRules:void 0,jobParameters:[],tags:[],connectionsList:[],jobMode:"VISUAL_MODE"}))},2765:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=n(3),o=n(24),r=n(10),i=n.n(r),s=(n(2661),n(76)),c=function(){var e=Object(o.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",s.c.getLogEvents(Object(a.a)({limit:200},t)).promise());case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},2766:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var a=n(5),o=n(3),r=n(2),i=n(2692),s=(n(2742),function(e,t){var n=Object(i.a)(e,t,e.ExecutionArguments),s=new URL(n).hash.split(":"),c=Object(r.a)(s,2)[1].split(";").reduce((function(e,t){var n=t.split("="),i=Object(r.a)(n,2),s=i[0],c=i[1];return Object(o.a)(Object(o.a)({},e),{},Object(a.a)({},s,c))}),{});return Object(o.a)(Object(o.a)({},c),{},{logsUrl:n})})},2767:function(e,t,n){"use strict";var a;n.d(t,"a",(function(){return a})),function(e){e.STARTING="STARTING",e.RUNNING="RUNNING",e.STOPPING="STOPPING",e.STOPPED="STOPPED",e.SUCCEEDED="SUCCEEDED",e.FAILED="FAILED",e.TIMEOUT="TIMEOUT",e.WAITING="WAITING"}(a||(a={}))},2768:function(e,t,n){"use strict";var a=n(2),o=n(0),r=n(973),i=n(1);function s(e,t){return t?e[0]:e}t.a=function(e){var t=e.seconds,n=void 0===t?0:t,c=e.isTruncated,l=void 0!==c&&c,u=Math.floor(n/86400),d=new Date(1e3*n).toISOString().substr(11,8).split(":").map(Number),b=Object(a.a)(d,3),p=b[0],f=b[1],j=b[2],h=24*u+p,m=Object(o.useMemo)((function(){return h?Object(i.jsxs)(i.Fragment,{children:[h," ",Object(i.jsx)(r.a,{value:h,one:s("hour",l),other:s("hours",l)})," "]}):null}),[h,l]),g=Object(o.useMemo)((function(){return f?Object(i.jsxs)(i.Fragment,{children:[f," ",Object(i.jsx)(r.a,{value:f,one:s("minute",l),other:s("minutes",l)})," "]}):null}),[l,f]),O=Object(o.useMemo)((function(){return j?Object(i.jsxs)(i.Fragment,{children:[j," ",Object(i.jsx)(r.a,{value:j,one:s("second",l),other:s("seconds",l)})]}):null}),[l,j]);return 0===n?Object(i.jsx)("span",{children:"0 ".concat(s("seconds",l))}):Object(i.jsxs)("span",{children:[m,g,O]})}},2769:function(e,t,n){},2770:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.values(e).some((function(e){return"DataSource"===e.classification&&("Kinesis"===(t=e.type)||"Kafka"===t);var t}))}},2771:function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var a=n(3),o=n(2),r=n(46),i=n(0),s=n(752),c=n(76),l=n(30),u=n(14),d=n(58),b=function(){var e=Object(i.useState)(),t=Object(o.a)(e,2),n=t[0],b=t[1],p=Object(i.useState)(),f=Object(o.a)(p,2),j=f[0],h=f[1],m=Object(r.a)().values.jobConfig,g=m.role,O=m.name,v=m.command,y=decodeURIComponent(g),x=Object(u.h)()||d.b.accountEmail,S=l.a.isEnabled("feature-gluestudio-notebook-env-variables")?"2.0":"1.0",k={staleTime:144e5,retry:0,enabled:!1},C=Object(s.a)(Object(a.a)({queryKey:["startNotebook"],queryFn:function(){return c.n.startNotebook({roleArn:y,userId:x,timeout:43200,runtimeVersion:S,command:v}).promise()}},k)),E=C.data,w=(E=void 0===E?{status:"CANCELED"}:E).notebookId,I=E.jwt,T=E.status,M=E.tokenExpirationTime,N=E.sessionId,L=C.refetch,R=C.status,D=C.error,A=Object(s.a)(Object(a.a)({queryKey:["glueNotebookRefreshCredentials"],queryFn:function(){return c.n.glueNotebookRefreshCredentials().promise()}},k)),_=A.data,P=(_=void 0===_?{}:_).jwt,U=_.tokenExpirationTime,G=A.refetch,F=Object(i.useState)(T),B=Object(o.a)(F,2),q=B[0],J=B[1],V=Object(s.a)(Object(a.a)(Object(a.a)({queryKey:["getNotebookInstanceStatus"],queryFn:function(){return c.n.getNotebookInstanceStatus({notebookId:w}).promise()}},k),{},{staleTime:0,refetchInterval:2e3,enabled:!!w&&!!T&&"RUNNING"!==q&&"FAILED"!==q})),W=V.data,z=(W=void 0===W?{notebookInstanceStatus:T}:W).notebookInstanceStatus,H=V.refetch,K=[R,V.status],Q=[{error:D,retry:L},{error:V.error,retry:H}];return Object(i.useEffect)((function(){I&&b(I)}),[I,b]),Object(i.useEffect)((function(){P&&b(P)}),[P,b]),Object(i.useEffect)((function(){M&&h(M)}),[M,h]),Object(i.useEffect)((function(){U&&h(U)}),[U,h]),Object(i.useEffect)((function(){J(z)}),[z]),Object(i.useEffect)((function(){var e;return j&&(e=setTimeout(G,6e5)),function(){e&&clearTimeout(e)}}),[j,G]),{role:y,status:z,notebookName:O,notebookId:w,sessionId:N,authToken:n,userId:x,serviceStatus:K,serviceErrors:Q,startNotebook:L}}},2781:function(e,t,n){"use strict";n.d(t,"a",(function(){return E}));var a=n(2),o=n(754),r=n(281),i=n(103),s=n(171),c=n(207),l=n(402),u=n(551),d=n(0),b=n(61),p=n(377),f=n(752),j=n(41),h=n(137),m=n(30),g=n(2687),O=(n(2742),n(2765)),v=n(2766),y=n(2671),x=n(756),S=n(1),k=function(e){var t=e.error,n=e.logUrl;return Object(S.jsx)(s.default,{type:"warning",action:Object(S.jsx)(x.a,{url:n,label:Object(S.jsx)(b.a,{id:"jobRun.label.all.Logs",defaultMessage:"View all logs",description:"The logs of a glue job."})}),children:Object(S.jsx)(b.a,{id:"tail.logs.alert.info.message.invalid.log.group",defaultMessage:null===t||void 0===t?void 0:t.message,description:"Alert message when log group is invalid"})})},C=n(146),E=function(e){var t=e.jobRun,n=void 0===t?{}:t,a=e.disabled,i=void 0!==a&&a,s=Object(p.b)(),c=Object(y.b)().isJobInsightsAndPanelLayoutEnabled,l=n.ExecutionArguments,u="true"===(void 0===l?{}:l)[h.e.logging],d=Object(v.a)(n,"log"),f=d.group,O=d.prefix,x=s.getQueriesData(["GetLogEvents",f,O]),k=Object(j.k)({path:"/job/*"});return!m.a.isEnabled("feature-tail-logs")||i?null:u&&(Object(g.a)(n.JobRunState)||k||Object(g.a)(n.JobRunState)||0!==x.length)||c?Object(S.jsxs)(o.a,{children:[Object(S.jsx)("div",{className:"glue__tail-logs-header",children:Object(S.jsx)(r.a,{variant:"h3",info:Object(S.jsx)(b.a,{id:"pages.monitoring.taillogs.info",defaultMessage:"More information for 'Continuous logs' (shows in sidebar).",description:"Info panel link aria label for the header of the continuous logs job detail tab.",children:function(e){return Object(S.jsx)(C.a,{contentKey:"job-run-details-continuous-logs-hp",linkAriaLabel:e})}}),children:Object(S.jsx)(b.a,{id:"tail.logs",defaultMessage:"Continuous logs",description:"Radio button indicating that partitions will be created."})})}),Object(S.jsx)(w,{jobRun:n,logType:"log",monitoringMatch:!!k})]}):null},w=function(e){var t=e.jobRun,n=e.logType,o=e.monitoringMatch,r=Object(p.b)(),j=Object(v.a)(t,n),h=j.group,m=j.prefix,g=j.logsUrl,y=Object(d.useState)(),x=Object(a.a)(y,2),C=x[0],E=x[1],w=r.getQueriesData(["GetLogEvents",h,m]).map((function(e){var t=Object(a.a)(e,2)[1];return(t=void 0===t?{events:[]}:t).events})),I=t.JobRunState,T=w.flat(1).sort((function(e,t){return(null===e||void 0===e?void 0:e.timestamp)>(null===t||void 0===t?void 0:t.timestamp)?-1:1})).map((function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).message})),M=new Set(T),N=Array.from(M).join(""),L=Object(f.a)({queryKey:["GetLogEvents",h,m,C],queryFn:function(){return Object(O.a)({logGroupName:h,logStreamName:"".concat(m,"-driver"),startTime:new Date(t.StartedOn).getTime(),startFromHead:!0,nextToken:C})},keepPreviousData:!0,notifyOnChangeProps:["data","errorUpdateCount"],staleTime:144e5}),R=L.data,D=(R=void 0===R?{}:R).nextForwardToken,A=L.error,_=L.refetch,P=L.isFetching,U=L.isSuccess;return Object(d.useEffect)((function(){if("RUNNING"===I){var e=setInterval((function(){E(D),_()}),1e3);return function(){return clearInterval(e)}}}),[I,D,_]),Object(S.jsxs)(i.default,{children:["RUNNING"===I&&Object(S.jsxs)(S.Fragment,{children:[!U&&!["ResourceNotFoundException","ValidationException"].includes((null===A||void 0===A?void 0:A.code)||"")&&Object(S.jsxs)(s.default,{type:"warning",children:[Object(S.jsx)(c.a,{}),null===A||void 0===A?void 0:A.message]}),!U&&"ResourceNotFoundException"===(null===A||void 0===A?void 0:A.code)&&Object(S.jsxs)(s.default,{type:"warning",children:[Object(S.jsx)(c.a,{}),Object(S.jsx)(b.a,{id:"tail.logs.alert.info.message.not.found",defaultMessage:"The specified log stream does not exist. Please allow a couple of seconds for the logs to populate.",description:"Alert message when logs have not been generated."})]}),!U&&"ValidationException"===(null===A||void 0===A?void 0:A.code)&&Object(S.jsx)(k,{logUrl:g,error:A})]}),"RUNNING"!==I&&Object(S.jsxs)(S.Fragment,{children:[!P&&Object(S.jsxs)(S.Fragment,{children:[!T.length&&U&&Object(S.jsx)(s.default,{type:"info",children:Object(S.jsx)(b.a,{id:"tail.logs.alert.error.message",defaultMessage:"We weren't able to retrieve the requested logs.",description:"Alert message when no log runs have been found."})}),"ValidationException"===(null===A||void 0===A?void 0:A.code)&&Object(S.jsx)(k,{logUrl:g,error:A})||A&&!o&&Object(S.jsx)(s.default,{type:"warning",children:null===A||void 0===A?void 0:A.message})]}),P&&Object(S.jsxs)(s.default,{type:"info",children:[Object(S.jsx)(c.a,{}),Object(S.jsx)(b.a,{id:"tail.logs.alert.info.message.not.found",defaultMessage:"Please allow a couple of seconds for the logs to populate.",description:"Alert message when logs have not been generated."})]})]}),U&&!!T.length&&Object(S.jsxs)(i.default,{children:[Object(S.jsx)(i.default,{margin:{vertical:"xs"},variant:"p",children:Object(S.jsxs)(l.a,{columns:2,children:[Object(S.jsxs)(i.default,{children:["RUNNING"===I&&Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(c.a,{}),Object(S.jsx)("strong",{children:Object(S.jsx)(b.a,{id:"tail.logs.driver.logs.running",defaultMessage:"Driver logs",description:"Driver logs title when jobs are running."})})]}),"RUNNING"!==I&&Object(S.jsx)("strong",{children:Object(S.jsx)(b.a,{id:"tail.logs.driver.logs.not.running",defaultMessage:"Driver logs",description:"Driver logs title when jobs are not running."})})]}),Object(S.jsx)(i.default,{textAlign:"right",children:Object(S.jsx)(u.a,{external:!0,href:g,target:"_blank",children:Object(S.jsx)(b.a,{id:"tail.logs.log.link",defaultMessage:"Driver and executor log streams",description:"Link text for the driver and executor log streams."})})})]})}),Object(S.jsx)("div",{className:"glue__log-block",children:Object(S.jsx)(i.default,{variant:"pre",children:N})})]})]})}},2782:function(e,t,n){"use strict";n.d(t,"b",(function(){return B})),n.d(t,"a",(function(){return q})),n.d(t,"c",(function(){return J}));var a,o=n(8),r=n(2),i=n(5),s=n(3),c=n(2589),l=n(46),u=n(0),d=n(137),b=n(757),p=n(30),f=n(206),j=p.a.isEnabled("feature-glue-4")?"4.0":"3.0",h=["# AWS Glue Studio Notebook\n","##### You are now running a AWS Glue Studio notebook; To start using your notebook you need to start an AWS Glue Interactive Session.\n"],m=['#### Optional: Run this cell to see available notebook commands ("magics").\n'],g=["\n%help\n  ".trim()],O=["####  Run this cell to set up and start your interactive session.\n"],v=["\n%idle_timeout 2880\n%glue_version ".concat(j,"\n%worker_type G.1X\n%number_of_workers 5\n\nimport sys\nfrom awsglue.transforms import *\nfrom awsglue.utils import getResolvedOptions\nfrom pyspark.context import SparkContext\nfrom awsglue.context import GlueContext\nfrom awsglue.job import Job\n  \nsc = SparkContext.getOrCreate()\nglueContext = GlueContext(sc)\nspark = glueContext.spark_session\njob = Job(glueContext)\n  ").trim()],y=["\n%idle_timeout 2880\n%number_of_workers 5\n  ".trim()],x=["#### Example: Create a DynamicFrame from a table in the AWS Glue Data Catalog and display its schema\n"],S=["\ndyf = glueContext.create_dynamic_frame.from_catalog(database='database_name', table_name='table_name')\ndyf.printSchema()\n  ".trim()],k=["#### Example: Convert the DynamicFrame to a Spark DataFrame and display a sample of the data\n"],C=["\ndf = dyf.toDF()\ndf.show()\n  ".trim()],E=["#### Example: Visualize data with matplotlib\n"],w=["\nimport matplotlib.pyplot as plt\n\n# Set X-axis and Y-axis values\nx = [5, 2, 8, 4, 9]\ny = [10, 4, 8, 5, 2]\n  \n# Create a bar chart \nplt.bar(x, y)\n  \n# Show the plot\n%matplot plt\n  ".trim()],I=["#### Example: Write the data in the DynamicFrame to a location in Amazon S3 and a table for it in the AWS Glue Data Catalog\n"],T=['\ns3output = glueContext.getSink(\n  path="s3://bucket_name/folder_name",\n  connection_type="s3",\n  updateBehavior="UPDATE_IN_DATABASE",\n  partitionKeys=[],\n  compression="snappy",\n  enableUpdateCatalog=True,\n  transformation_ctx="s3output",\n)\ns3output.setCatalogInfo(\n  catalogDatabase="demo", catalogTableName="populations"\n)\ns3output.setFormat("glueparquet")\ns3output.writeFrame(DyF)\n  '.trim()],M=n(74),N=["additional_python_modules"],L=["streaming","etl"],R=Object(s.a)(Object(s.a)(Object(s.a)({number_of_workers:"numberOfWorkers",worker_type:"workerType",glue_version:"version",security_config:"security",extra_py_files:"pythonPath",extra_jars:"dependentPath",connections:"connectionsList",etl:"command",streaming:"command"},{role_arn:"role",description:"description",command:"command",script_location:"scriptLocation",script_name:"scriptName",timeout:"timeout",max_concurrent_runs:"maxConcurrentRuns",max_capacity:"maxCapacity",max_retries:"maxRetries",notify_delay_after:"delay",security_configuration:"security",tags:"tags"}),Object(d.h)(d.e)),{},(a={},Object(i.a)(a,M.a.SparkUIStandardPath,"spark"),Object(i.a)(a,"additional_python_modules","--additional-python-modules"),a)),D=function(e){return Object.entries(e).reduce((function(e,t){var n=Object(r.a)(t,2),a=n[0],o=n[1],c=o[o.length-1],l=R[a];return!l||void 0===c||N.includes(a)||L.includes(a)||e.jobConfigValues.push({key:l,value:c}),!l&&void 0!==c&&a.includes("--")&&(e.defaultArguments=Object(s.a)(Object(s.a)({},e.defaultArguments),{},Object(i.a)({},a,"".concat(c.toString())))),N.includes(a)&&(e.defaultArguments=Object(s.a)(Object(s.a)({},e.defaultArguments),{},Object(i.a)({},l,"".concat(c.toString())))),L.includes(a)&&e.jobConfigValues.push({key:l,value:"etl"===a?f.a.glueetl:f.a.gluestreaming}),e}),{jobConfigValues:[],defaultArguments:{}})},A=Object.keys(d.e).reduce((function(e,t){var n,a="".concat((null===(n=b.i[t])||void 0===n?void 0:n.toString())||"");return e[d.e[t]]=[a],e}),{}),_=D(A),P=_.jobConfigValues,U=_.defaultArguments,G=function(){var e=window.location.href.split("/"),t=e.indexOf("kernel")+1;return e[t]===f.a.glueray&&p.a.isEnabled("feature-manta")?f.a.glueray:f.a.glueetl},F=function(){return{cells:[{cell_type:"markdown",execution_count:null,metadata:{trusted:!0,editable:!0},outputs:[],source:h},{cell_type:"markdown",execution_count:null,metadata:{trusted:!0,editable:!0},outputs:[],source:m},{cell_type:"code",execution_count:null,metadata:{trusted:!0,editable:!0},outputs:[],source:g}].concat(Object(o.a)(G()===f.a.glueray?[{cell_type:"markdown",execution_count:null,metadata:{trusted:!0,editable:!0},outputs:[],source:O},{cell_type:"code",execution_count:null,metadata:{trusted:!0,editable:!0},outputs:[],source:y}]:[{cell_type:"markdown",execution_count:null,metadata:{trusted:!0,editable:!0},outputs:[],source:O},{cell_type:"code",execution_count:null,metadata:{trusted:!0,editable:!0},outputs:[],source:v},{cell_type:"markdown",execution_count:null,metadata:{trusted:!0,editable:!0},outputs:[],source:x},{cell_type:"code",execution_count:null,metadata:{trusted:!0,editable:!0},outputs:[],source:S},{cell_type:"markdown",execution_count:null,metadata:{trusted:!0,editable:!0},outputs:[],source:k},{cell_type:"code",execution_count:null,metadata:{trusted:!0,editable:!0},outputs:[],source:C},{cell_type:"markdown",execution_count:null,metadata:{trusted:!0,editable:!0},outputs:[],source:E},{cell_type:"code",execution_count:null,metadata:{trusted:!0,editable:!0},outputs:[],source:w},{cell_type:"markdown",execution_count:null,metadata:{trusted:!0,editable:!0},outputs:[],source:I},{cell_type:"code",execution_count:null,metadata:{trusted:!0,editable:!0},outputs:[],source:T}])),metadata:{kernelspec:{display_name:"Glue Interactive Sessions",language:"python"},language_info:{codemirror_mode:{name:"python",version:3},file_extension:".py",mimetype:"text/x-python",name:c.a.gluePySpark},orig_nbformat:4},nbformat:4,nbformat_minor:4}},B=function(e,t){if(e){var n="string"===typeof e?JSON.parse(e):e,a=[],i=n.cells,c={},l=function(e,t,n){if("code"===n.cell_type){var a="connections"!==e?t:null===t||void 0===t?void 0:t.replace(/\s/g,"").split(",");c[e]=Array.isArray(c[e])?[].concat(Object(o.a)(c[e]),[a]):[a]}};i.filter((function(e){return!!e.source})).forEach((function(e){var t="string"===typeof e.source?e.source:e.source.join(""),n=t.match(/^%%configure([\s\S]*)\}/gm)||[],o=Object(r.a)(n,1)[0],i=(null===o||void 0===o?void 0:o.split("%%configure"))||[],s=Object(r.a)(i,2)[1],c=null===s||void 0===s?void 0:s.trim();try{var u=JSON.parse(c);Object.entries(u).forEach((function(t){var n=Object(r.a)(t,2),a=n[0],o=n[1];l(a,o,e)}))}catch(p){}var d="%%sql";if(t.startsWith(d)){var b=t.replace("".concat(d,"\n"),"");t='spark.sql("""'.concat(b.trim(),'""").show()')}t.split("\n").forEach((function(t){var n=t.match(/^%(?!%)(.*)/g);if(n){var i=t.replace("%","").split(/ (.*)/),s=Object(r.a)(i,2),c=s[0],u=s[1];l(c,u,e)}e.metadata.hasOwnProperty("deletable")||n||o||"markdown"===e.cell_type||a.push(t)}))}));var u=Object(s.a)(Object(s.a)({},n),{},{cells:Object(o.a)(i)}),d=a.join("\n").split("\n"),b=d[d.length-1],p=[].concat(Object(o.a)(d),Object(o.a)("job.commit()"===b||[G(),t].includes(f.a.glueray)?[]:["job.commit()"])).join("\n"),j=D(c),h=j.jobConfigValues,m=j.defaultArguments;return{model:u,source:p,magicsMap:c,jobConfigValues:h,defaultArguments:m}}},q=B(F()),J=function(e){var t=Object(l.a)(),n=t.setFieldValue,a=t.values.jobConfig.command,i=Object(u.useState)(void 0===e?B(F()):e),c=Object(r.a)(i,2),b=c[0],p=c[1];return Object(u.useEffect)((function(){if(b){var e=b.model,t=b.source,a=b.jobConfigValues,r=void 0===a?[]:a,i=b.defaultArguments,c=void 0===i?{}:i;n("script",t),n("notebook",e),[].concat(Object(o.a)(P),Object(o.a)(r)).forEach((function(e){var t=e.key,a=e.value;return n("jobConfig.".concat(t.toString()),"true"===a||"false"===a?"true"===a:a)})),n("jobConfig.jobParameters",Object(d.f)(Object(s.a)(Object(s.a)({},U),c)))}}),[b,n]),{notebook:b,pushNotebookQuery:function(e){var t=e.model;p(B(t,a))}}}},2784:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var a=n(2),o=n(0),r=n(58),i=n(76),s=n(97),c=n(208),l=n(884),u=100;function d(){var e=Object(s.b)({CatalogId:r.b.accountId,MaxResults:u,HidePassword:!0}),t=Object(a.a)(e,1)[0],n=Object(s.a)(i.f,"getConnections",t),d=Object(a.a)(n,3),b=d[0],p=d[1],f=d[2].refresh,j=Object(l.b)(b),h=Object(a.a)(c.b.MatchCriteria,1)[0],m=Object(a.a)(c.a.MatchCriteria,1)[0],g=c.c.ConnectionType;return{connectorList:Object(o.useMemo)((function(){return j.reduce((function(e,t){var n=t.MatchCriteria,a=void 0===n?[]:n,o=t.ConnectionType;return e[a.includes(h)?"connectors":a.includes(m)?"connections":"unknowns"].push(t),o===g&&e.networkConnections.push(t),e}),{connectors:[],connections:[],unknowns:[],networkConnections:[]})}),[j,h,m,g]),unfilteredList:j,status:p.status,refresh:f,isError:"error"===p.status,error:"error"===p.status?p.reason:void 0}}},2796:function(e,t,n){"use strict";var a=n(0),o=n(207),r=n(171),i=n(351),s=n(1);t.a=function(e){var t=e.resourceStatus,n=e.alertHeader,c=e.alertMessage,l=e.children,u=Object(i.a)(),d=Object(a.useMemo)((function(){return{errorJobDeletedHeading:u.formatMessage({id:"job.error.deleted.heading",defaultMessage:"Your job has been deleted",description:"Heading for the error alert that is shown when a job that is deleted is accessed from the monitoring page."}),errorJobDeletedMessage:u.formatMessage({id:"job.error.deleted.message",defaultMessage:"You can view run history for all job runs but the job details are available only for jobs that still exist.",description:"A message to be displayed in error alert when a job that is deleted is accessed from the monitoring page."})}}),[u]),b=u.formatMessage({id:"glue.spinner.alt",defaultMessage:"Content is loading",description:"Alt text for spinner while content is being loaded."});switch(t){case"init":case"loading":return Object(s.jsx)("div",{className:"glue-center glue-center--full-height","aria-label":b,"aria-busy":"true",children:Object(s.jsx)(o.a,{size:"large"})});case"error":case"aborted":return window.location.href.includes("from=monitoring")?Object(s.jsx)(r.default,{header:d.errorJobDeletedHeading,type:"error",children:d.errorJobDeletedMessage}):Object(s.jsx)(r.default,{header:n,type:"error",children:c});case"success":return Object(s.jsx)(s.Fragment,{children:l})}}},2797:function(e){e.exports=JSON.parse('{"version":"2.0","metadata":{"apiVersion":"2022-07-26","endpointPrefix":"gluestudiosparkuiservice","jsonVersion":"1.1","protocol":"rest-json","serviceFullName":"Glue Studio Spark UI Service","serviceId":"GlueStudioSparkUI","signatureVersion":"v4","signingName":"glue","uid":"gluestudiosparkui-2022-07-26"},"operations":{"BatchGetStageFiles":{"name":"BatchGetStageFiles","http":{"method":"POST","requestUri":"/batchStageFiles/{resourceId}","responseCode":200},"input":{"shape":"BatchGetStageFilesInput"},"output":{"shape":"BatchGetStageFilesOutput"},"errors":[{"shape":"InvalidInputException"},{"shape":"AccessDeniedException"},{"shape":"InternalServiceException"},{"shape":"UnauthorizedException"},{"shape":"ThrottlingException"},{"shape":"EntityNotFoundException"}],"documentation":"<p>Request to get all of the stage data.</p>"},"GetEnvironment":{"name":"GetEnvironment","http":{"method":"GET","requestUri":"/{resourceId}/environment","responseCode":200},"input":{"shape":"GetEnvironmentInput"},"output":{"shape":"GetEnvironmentOutput"},"errors":[{"shape":"InvalidInputException"},{"shape":"AccessDeniedException"},{"shape":"InternalServiceException"},{"shape":"UnauthorizedException"},{"shape":"ThrottlingException"},{"shape":"EntityNotFoundException"}],"documentation":"<p>Environment details of the given application.</p>"},"GetExecutors":{"name":"GetExecutors","http":{"method":"GET","requestUri":"/{resourceId}/executors","responseCode":200},"input":{"shape":"GetExecutorsInput"},"output":{"shape":"GetExecutorsOutput"},"errors":[{"shape":"InvalidInputException"},{"shape":"AccessDeniedException"},{"shape":"InternalServiceException"},{"shape":"UnauthorizedException"},{"shape":"ThrottlingException"},{"shape":"EntityNotFoundException"}],"documentation":"<p>A list of all active executors for the given Spark application.</p>"},"GetExecutorsThreads":{"name":"GetExecutorsThreads","http":{"method":"GET","requestUri":"/{resourceId}/executors/{executorId}/threads","responseCode":200},"input":{"shape":"GetExecutorThreadsInput"},"output":{"shape":"GetExecutorThreadsOutput"},"errors":[{"shape":"InvalidInputException"},{"shape":"AccessDeniedException"},{"shape":"InternalServiceException"},{"shape":"UnauthorizedException"},{"shape":"ThrottlingException"},{"shape":"EntityNotFoundException"}],"documentation":"<p>Stack traces of all the threads running within the given active executor. Not available via the history server.</p>"},"GetJob":{"name":"GetJob","http":{"method":"GET","requestUri":"/{resourceId}/jobs/{jobId}","responseCode":200},"input":{"shape":"GetJobInput"},"output":{"shape":"GetJobOutput"},"errors":[{"shape":"InvalidInputException"},{"shape":"AccessDeniedException"},{"shape":"InternalServiceException"},{"shape":"UnauthorizedException"},{"shape":"ThrottlingException"},{"shape":"EntityNotFoundException"}],"documentation":"<p>Details for the given job</p>"},"GetJobs":{"name":"GetJobs","http":{"method":"GET","requestUri":"/{resourceId}/jobs","responseCode":200},"input":{"shape":"GetJobsInput"},"output":{"shape":"GetJobsOutput"},"errors":[{"shape":"InvalidInputException"},{"shape":"AccessDeniedException"},{"shape":"InternalServiceException"},{"shape":"UnauthorizedException"},{"shape":"ThrottlingException"},{"shape":"EntityNotFoundException"}],"documentation":"<p>A list of all jobs for a given application.</p>"},"GetLastLogParsingStatus":{"name":"GetLastLogParsingStatus","http":{"method":"GET","requestUri":"/{resourceId}/logparsestatus/","responseCode":200},"input":{"shape":"GetLastLogParsingStatusInput"},"output":{"shape":"GetLastLogParsingStatusOutput"},"errors":[{"shape":"InvalidInputException"},{"shape":"AccessDeniedException"},{"shape":"InternalServiceException"},{"shape":"UnauthorizedException"},{"shape":"ThrottlingException"},{"shape":"EntityNotFoundException"}],"documentation":"<p>Get status of last Spark UI logs parsing job given path</p>"},"GetLogParsingStatus":{"name":"GetLogParsingStatus","http":{"method":"GET","requestUri":"/{resourceId}/logparsestatus/{parsingJobId}","responseCode":200},"input":{"shape":"LogParsingStatusRequest"},"output":{"shape":"LogParsingStatusResponse"},"errors":[{"shape":"InvalidInputException"},{"shape":"AccessDeniedException"},{"shape":"InternalServiceException"},{"shape":"UnauthorizedException"},{"shape":"ThrottlingException"},{"shape":"EntityNotFoundException"}],"documentation":"<p>Get status of Spark UI logs parsing job given resource and parsing job identifiers</p>"},"GetQueries":{"name":"GetQueries","http":{"method":"GET","requestUri":"/{resourceId}/sql","responseCode":200},"input":{"shape":"GetQueriesInput"},"output":{"shape":"GetQueriesOutput"},"errors":[{"shape":"InvalidInputException"},{"shape":"AccessDeniedException"},{"shape":"InternalServiceException"},{"shape":"UnauthorizedException"},{"shape":"ThrottlingException"},{"shape":"EntityNotFoundException"}],"documentation":"<p>A list of all queries for a given application.</p>"},"GetQuery":{"name":"GetQuery","http":{"method":"GET","requestUri":"/{resourceId}/sql/{executionId}","responseCode":200},"input":{"shape":"GetQueryInput"},"output":{"shape":"GetQueryOutput"},"errors":[{"shape":"InvalidInputException"},{"shape":"AccessDeniedException"},{"shape":"InternalServiceException"},{"shape":"UnauthorizedException"},{"shape":"ThrottlingException"},{"shape":"EntityNotFoundException"}],"documentation":"<p>Details for the given query.</p>"},"GetStage":{"name":"GetStage","http":{"method":"GET","requestUri":"/{resourceId}/stages/{stageId}","responseCode":200},"input":{"shape":"GetStageInput"},"output":{"shape":"GetStageOutput"},"errors":[{"shape":"InvalidInputException"},{"shape":"AccessDeniedException"},{"shape":"InternalServiceException"},{"shape":"UnauthorizedException"},{"shape":"ThrottlingException"},{"shape":"EntityNotFoundException"}],"documentation":"<p>[Glue job run ID]/stages/{stageId} list of all attempts for the given stage.</p>"},"GetStageAttempt":{"name":"GetStageAttempt","http":{"method":"GET","requestUri":"/{resourceId}/stages/{stageId}/{stageAttemptId}","responseCode":200},"input":{"shape":"GetStageAttemptInput"},"output":{"shape":"GetStageAttemptOutput"},"errors":[{"shape":"InvalidInputException"},{"shape":"AccessDeniedException"},{"shape":"InternalServiceException"},{"shape":"UnauthorizedException"},{"shape":"ThrottlingException"},{"shape":"EntityNotFoundException"}],"documentation":"<p>[Glue job run ID]/stages/{stage attempt id} specified stage attempt details</p>"},"GetStageAttemptTaskList":{"name":"GetStageAttemptTaskList","http":{"method":"GET","requestUri":"/{resourceId}/stages/{stageId}/{stageAttemptId}/tasklist","responseCode":200},"input":{"shape":"GetStageAttemptTaskListInput"},"output":{"shape":"GetStageAttemptTaskListOutput"},"errors":[{"shape":"InvalidInputException"},{"shape":"AccessDeniedException"},{"shape":"InternalServiceException"},{"shape":"UnauthorizedException"},{"shape":"ThrottlingException"},{"shape":"EntityNotFoundException"}],"documentation":"<p>A list of all tasks for the given stage attempt</p>"},"GetStageAttemptTaskSummary":{"name":"GetStageAttemptTaskSummary","http":{"method":"GET","requestUri":"/{resourceId}/stages/{stageId}/{stageAttemptId}/tasksummary","responseCode":200},"input":{"shape":"GetStageAttemptTaskSummaryInput"},"output":{"shape":"GetStageAttemptTaskSummaryOutput"},"errors":[{"shape":"InvalidInputException"},{"shape":"AccessDeniedException"},{"shape":"InternalServiceException"},{"shape":"UnauthorizedException"},{"shape":"ThrottlingException"},{"shape":"EntityNotFoundException"}],"documentation":"<p>summary metrics of all tasks in the given stage attempt</p>"},"GetStageFiles":{"name":"GetStageFiles","http":{"method":"GET","requestUri":"/{resourceId}/stageFiles","responseCode":200},"input":{"shape":"GetStageFilesInput"},"output":{"shape":"GetStageFilesOutput"},"errors":[{"shape":"InvalidInputException"},{"shape":"AccessDeniedException"},{"shape":"InternalServiceException"},{"shape":"UnauthorizedException"},{"shape":"ThrottlingException"},{"shape":"EntityNotFoundException"}],"documentation":"<p>[resourceId]/stageFiles list of all the stage files in the bucket.</p>"},"GetStages":{"name":"GetStages","http":{"method":"GET","requestUri":"/{resourceId}/stages","responseCode":200},"input":{"shape":"GetStagesInput"},"output":{"shape":"GetStagesOutput"},"errors":[{"shape":"InvalidInputException"},{"shape":"AccessDeniedException"},{"shape":"InternalServiceException"},{"shape":"UnauthorizedException"},{"shape":"ThrottlingException"},{"shape":"EntityNotFoundException"}],"documentation":"<p>[Glue job run ID]/stages list of all Spark application stages.</p>"},"GetStorage":{"name":"GetStorage","http":{"method":"GET","requestUri":"/{resourceId}/storage/rdd","responseCode":200},"input":{"shape":"GetStorageInput"},"output":{"shape":"GetStorageOutput"},"errors":[{"shape":"InvalidInputException"},{"shape":"AccessDeniedException"},{"shape":"InternalServiceException"},{"shape":"UnauthorizedException"},{"shape":"ThrottlingException"},{"shape":"EntityNotFoundException"}],"documentation":"<p>A list of stored RDDs for the given application.</p>"},"GetStorageUnit":{"name":"GetStorageUnit","http":{"method":"GET","requestUri":"/{resourceId}/storage/rdd/{rddId}","responseCode":200},"input":{"shape":"GetStorageUnitInput"},"output":{"shape":"GetStorageUnitOutput"},"errors":[{"shape":"InvalidInputException"},{"shape":"AccessDeniedException"},{"shape":"InternalServiceException"},{"shape":"UnauthorizedException"},{"shape":"ThrottlingException"},{"shape":"EntityNotFoundException"}],"documentation":"<p>Details for the storage status of a given RDD.</p>"},"RequestLogParsing":{"name":"RequestLogParsing","http":{"method":"POST","requestUri":"/parselogs","responseCode":200},"input":{"shape":"LogParsingRequest"},"output":{"shape":"LogParsingResponse"},"errors":[{"shape":"InvalidInputException"},{"shape":"AccessDeniedException"},{"shape":"InternalServiceException"},{"shape":"UnauthorizedException"},{"shape":"ThrottlingException"},{"shape":"EntityNotFoundException"}],"documentation":"<p>Request parsing of a Spark UI event log that is located in S3.</p>"}},"shapes":{"AccessDeniedException":{"type":"structure","members":{"message":{"shape":"String"}},"documentation":"<p>This exception is thrown when the client doesn\'t have permission for the operation they requested.</p>","error":{"httpStatusCode":403,"senderFault":true},"exception":true},"AccumulableInfo":{"type":"structure","required":["id","name","value"],"members":{"id":{"shape":"Long"},"name":{"shape":"String"},"update":{"shape":"String"},"value":{"shape":"String"},"internal":{"shape":"Boolean"},"countFailedValues":{"shape":"Boolean"},"metadata":{"shape":"String"}}},"AccumulableInfoList":{"type":"list","member":{"shape":"AccumulableInfo"}},"ApplicationEnvironmentInfo":{"type":"structure","members":{"runtime":{"shape":"RuntimeInfo"},"sparkProperties":{"shape":"StringTupleList"},"hadoopProperties":{"shape":"StringTupleList"},"systemProperties":{"shape":"StringTupleList"},"metricProperties":{"shape":"StringTupleList"},"classpathEntries":{"shape":"StringTupleList"},"resourceProfiles":{"shape":"ResourceProfileInfoList"}}},"Attributes":{"type":"map","key":{"shape":"String"},"value":{"shape":"String"}},"BatchGetStageFilesInput":{"type":"structure","required":["resourceId","stageFiles","roleArn"],"members":{"resourceId":{"shape":"ResourceId","location":"uri","locationName":"resourceId"},"stageFiles":{"shape":"FileList"},"roleArn":{"shape":"IamRoleArn","location":"querystring","locationName":"roleArn"},"status":{"shape":"String","location":"querystring","locationName":"status"},"details":{"shape":"Boolean","location":"querystring","locationName":"details"},"taskStatus":{"shape":"String","location":"querystring","locationName":"taskStatus"},"withSummaries":{"shape":"Boolean","location":"querystring","locationName":"withSummaries"},"quantiles":{"shape":"String","location":"querystring","locationName":"quantiles"}}},"BatchGetStageFilesOutput":{"type":"structure","members":{"stages":{"shape":"StagesList"}}},"BlacklistedInStages":{"type":"list","member":{"shape":"Integer"}},"Boolean":{"type":"boolean","box":true},"DateString":{"type":"string","max":30,"min":1,"pattern":".*\\\\d+-\\\\d+-\\\\d+\\\\d+:\\\\d+:\\\\d+.\\\\d+.*"},"DeterministicLevel":{"type":"string","enum":["DETERMINATE","UNORDERED","INDETERMINATE"]},"Double":{"type":"double","box":true},"DoubleList":{"type":"list","member":{"shape":"Double"}},"EntityNotFoundException":{"type":"structure","members":{"message":{"shape":"String"}},"documentation":"<p>This exception is thrown when the requested entity is not found in the server side.</p>","error":{"httpStatusCode":404,"senderFault":true},"exception":true},"ExcludedInStages":{"type":"list","member":{"shape":"Integer"}},"ExecutionData":{"type":"structure","members":{"id":{"shape":"Integer"},"rootExecutionId":{"shape":"Integer"},"status":{"shape":"String"},"details":{"shape":"String"},"description":{"shape":"String"},"modifiedConfigs":{"shape":"StringMap"},"planDescription":{"shape":"String"},"submissionTime":{"shape":"DateString"},"completionTime":{"shape":"DateString"},"duration":{"shape":"Long"},"runningJobIds":{"shape":"IntegerList"},"successJobIds":{"shape":"IntegerList"},"failedJobIds":{"shape":"IntegerList"},"jobs":{"shape":"JobStatusMap"},"stages":{"shape":"IntegerList"},"sparkPlanGraph":{"shape":"SparkPlanGraph"},"metrics":{"shape":"SqlPlanMetricList"},"errorMessage":{"shape":"String"},"driverAccumUpdates":{"shape":"ListOfLongList"},"metricsValues":{"shape":"MetricsValuesMap"}}},"ExecutionDataList":{"type":"list","member":{"shape":"ExecutionData"}},"ExecutorId":{"type":"string","max":64,"min":1},"ExecutorLogs":{"type":"map","key":{"shape":"String"},"value":{"shape":"String"}},"ExecutorMetrics":{"type":"structure","members":{"metrics":{"shape":"ExecutorMetricsMap"}}},"ExecutorMetricsDistributions":{"type":"structure","members":{"quantiles":{"shape":"DoubleList"},"taskTime":{"shape":"DoubleList"},"failedTasks":{"shape":"DoubleList"},"succeededTasks":{"shape":"DoubleList"},"killedTasks":{"shape":"DoubleList"},"inputBytes":{"shape":"DoubleList"},"inputRecords":{"shape":"DoubleList"},"outputBytes":{"shape":"DoubleList"},"outputRecords":{"shape":"DoubleList"},"shuffleRead":{"shape":"DoubleList"},"shuffleReadRecords":{"shape":"DoubleList"},"shuffleWrite":{"shape":"DoubleList"},"shuffleWriteRecords":{"shape":"DoubleList"},"memoryBytesSpilled":{"shape":"DoubleList"},"diskBytesSpilled":{"shape":"DoubleList"},"peakMemoryMetrics":{"shape":"ExecutorPeakMetricsDistributions"}}},"ExecutorMetricsList":{"type":"list","member":{"shape":"ExecutorMetrics"}},"ExecutorMetricsMap":{"type":"map","key":{"shape":"String"},"value":{"shape":"Long"}},"ExecutorPeakMetricsDistributions":{"type":"structure","members":{"quantiles":{"shape":"DoubleList"},"executorMetrics":{"shape":"ExecutorMetricsList"}}},"ExecutorResourceRequest":{"type":"structure","members":{"resourceName":{"shape":"String"},"amount":{"shape":"Long"},"discoveryScript":{"shape":"String"},"vendor":{"shape":"String"}}},"ExecutorResourceRequestMap":{"type":"map","key":{"shape":"String"},"value":{"shape":"ExecutorResourceRequest"}},"ExecutorStageSummary":{"type":"structure","members":{"taskTime":{"shape":"Long"},"failedTasks":{"shape":"Integer"},"succeededTasks":{"shape":"Integer"},"killedTasks":{"shape":"Integer"},"inputBytes":{"shape":"Long"},"inputRecords":{"shape":"Long"},"outputBytes":{"shape":"Long"},"outputRecords":{"shape":"Long"},"shuffleRead":{"shape":"Long"},"shuffleReadRecords":{"shape":"Long"},"shuffleWrite":{"shape":"Long"},"shuffleWriteRecords":{"shape":"Long"},"memoryBytesSpilled":{"shape":"Long"},"diskBytesSpilled":{"shape":"Long"},"isBlacklistedForStage":{"shape":"Boolean"},"peakMemoryMetrics":{"shape":"ExecutorMetrics"},"isExcludedForStage":{"shape":"Boolean"},"metrics":{"shape":"TaskMetrics"}}},"ExecutorStageSummaryMap":{"type":"map","key":{"shape":"String"},"value":{"shape":"ExecutorStageSummary"}},"ExecutorSummary":{"type":"structure","required":["id","hostPort","isActive","rddBlocks","memoryUsed","diskUsed","totalCores","maxTasks","activeTasks","failedTasks","completedTasks","totalTasks","totalDuration","totalGCTime","totalInputBytes","totalShuffleRead","totalShuffleWrite","maxMemory","addTime"],"members":{"id":{"shape":"String"},"hostPort":{"shape":"String"},"isActive":{"shape":"Boolean"},"rddBlocks":{"shape":"Integer"},"memoryUsed":{"shape":"Long"},"diskUsed":{"shape":"Long"},"totalCores":{"shape":"Integer"},"maxTasks":{"shape":"Integer"},"activeTasks":{"shape":"Integer"},"failedTasks":{"shape":"Integer"},"completedTasks":{"shape":"Integer"},"totalTasks":{"shape":"Integer"},"totalDuration":{"shape":"Long"},"totalGCTime":{"shape":"Long"},"totalInputBytes":{"shape":"Long"},"totalShuffleRead":{"shape":"Long"},"totalShuffleWrite":{"shape":"Long"},"isBlacklisted":{"shape":"Boolean"},"maxMemory":{"shape":"Long"},"addTime":{"shape":"DateString"},"removeTime":{"shape":"DateString"},"removeReason":{"shape":"String"},"executorLogs":{"shape":"ExecutorLogs"},"memoryMetrics":{"shape":"MemoryMetrics"},"blacklistedInStages":{"shape":"BlacklistedInStages"},"peakMemoryMetrics":{"shape":"ExecutorMetrics"},"attributes":{"shape":"Attributes"},"resources":{"shape":"Resources"},"resourceProfileId":{"shape":"Integer"},"isExcluded":{"shape":"Boolean"},"excludedInStages":{"shape":"ExcludedInStages"}}},"ExecutorSummaryList":{"type":"list","member":{"shape":"ExecutorSummary"}},"FileList":{"type":"list","member":{"shape":"String"}},"Float":{"type":"float","box":true},"GetEnvironmentInput":{"type":"structure","required":["resourceId","roleArn"],"members":{"resourceId":{"shape":"ResourceId","location":"uri","locationName":"resourceId"},"roleArn":{"shape":"IamRoleArn","location":"querystring","locationName":"roleArn"}}},"GetEnvironmentOutput":{"type":"structure","members":{"environment":{"shape":"ApplicationEnvironmentInfo"}}},"GetExecutorThreadsInput":{"type":"structure","required":["resourceId","executorId","roleArn"],"members":{"resourceId":{"shape":"ResourceId","location":"uri","locationName":"resourceId"},"executorId":{"shape":"ExecutorId","location":"uri","locationName":"executorId"},"roleArn":{"shape":"IamRoleArn","location":"querystring","locationName":"roleArn"}}},"GetExecutorThreadsOutput":{"type":"structure","members":{"executorThreads":{"shape":"ThreadStackTraceList"}}},"GetExecutorsInput":{"type":"structure","required":["resourceId","roleArn"],"members":{"resourceId":{"shape":"ResourceId","location":"uri","locationName":"resourceId"},"roleArn":{"shape":"IamRoleArn","location":"querystring","locationName":"roleArn"}}},"GetExecutorsOutput":{"type":"structure","members":{"executors":{"shape":"ExecutorSummaryList"}}},"GetJobInput":{"type":"structure","required":["resourceId","jobId","roleArn"],"members":{"resourceId":{"shape":"ResourceId","location":"uri","locationName":"resourceId"},"jobId":{"shape":"String","location":"uri","locationName":"jobId"},"roleArn":{"shape":"IamRoleArn","location":"querystring","locationName":"roleArn"},"status":{"shape":"String","location":"querystring","locationName":"status"}}},"GetJobOutput":{"type":"structure","members":{"job":{"shape":"Job"}}},"GetJobsInput":{"type":"structure","required":["resourceId","roleArn"],"members":{"resourceId":{"shape":"ResourceId","location":"uri","locationName":"resourceId"},"roleArn":{"shape":"IamRoleArn","location":"querystring","locationName":"roleArn"},"status":{"shape":"JobExecutionStatus","location":"querystring","locationName":"status"}}},"GetJobsOutput":{"type":"structure","members":{"jobs":{"shape":"JobsList"}}},"GetLastLogParsingStatusInput":{"type":"structure","required":["resourceId","sparkUIpath","roleArn"],"members":{"resourceId":{"shape":"ResourceId","location":"uri","locationName":"resourceId"},"sparkUIpath":{"shape":"GetLastLogParsingStatusInputSparkUIpathString","location":"querystring","locationName":"sparkUIpath"},"roleArn":{"shape":"IamRoleArn","location":"querystring","locationName":"roleArn"},"rolling":{"shape":"Boolean","location":"querystring","locationName":"rolling"}}},"GetLastLogParsingStatusInputSparkUIpathString":{"type":"string","pattern":"s3://([^/]+)/[a-zA-Z0-9-/.!_*\'() ]{1,1024}"},"GetLastLogParsingStatusOutput":{"type":"structure","members":{"parsingJobId":{"shape":"String"},"status":{"shape":"LogParsingJobStatus"}}},"GetQueriesInput":{"type":"structure","required":["resourceId","roleArn"],"members":{"resourceId":{"shape":"ResourceId","location":"uri","locationName":"resourceId"},"details":{"shape":"Boolean","location":"querystring","locationName":"details"},"planDescription":{"shape":"Boolean","location":"querystring","locationName":"planDescription"},"offset":{"shape":"Integer","location":"querystring","locationName":"offset"},"length":{"shape":"Integer","location":"querystring","locationName":"length"},"roleArn":{"shape":"IamRoleArn","location":"querystring","locationName":"roleArn"}}},"GetQueriesOutput":{"type":"structure","members":{"queries":{"shape":"ExecutionDataList"}}},"GetQueryInput":{"type":"structure","required":["resourceId","executionId","roleArn"],"members":{"resourceId":{"shape":"ResourceId","location":"uri","locationName":"resourceId"},"executionId":{"shape":"String","location":"uri","locationName":"executionId"},"details":{"shape":"Boolean","location":"querystring","locationName":"details"},"planDescription":{"shape":"Boolean","location":"querystring","locationName":"planDescription"},"roleArn":{"shape":"IamRoleArn","location":"querystring","locationName":"roleArn"}}},"GetQueryOutput":{"type":"structure","members":{"query":{"shape":"ExecutionData"}}},"GetStageAttemptInput":{"type":"structure","required":["resourceId","stageId","stageAttemptId","roleArn"],"members":{"resourceId":{"shape":"ResourceId","location":"uri","locationName":"resourceId"},"stageId":{"shape":"StageId","location":"uri","locationName":"stageId"},"stageAttemptId":{"shape":"StageId","location":"uri","locationName":"stageAttemptId"},"roleArn":{"shape":"IamRoleArn","location":"querystring","locationName":"roleArn"},"status":{"shape":"String","location":"querystring","locationName":"status"},"details":{"shape":"Boolean","location":"querystring","locationName":"details"},"taskStatus":{"shape":"String","location":"querystring","locationName":"taskStatus"},"withSummaries":{"shape":"Boolean","location":"querystring","locationName":"withSummaries"},"quantiles":{"shape":"String","location":"querystring","locationName":"quantiles"}}},"GetStageAttemptOutput":{"type":"structure","members":{"stageAttempt":{"shape":"Stage"}}},"GetStageAttemptTaskListInput":{"type":"structure","required":["resourceId","roleArn","stageId","stageAttemptId"],"members":{"resourceId":{"shape":"ResourceId","location":"uri","locationName":"resourceId"},"roleArn":{"shape":"IamRoleArn","location":"querystring","locationName":"roleArn"},"stageId":{"shape":"StageId","location":"uri","locationName":"stageId"},"stageAttemptId":{"shape":"StageId","location":"uri","locationName":"stageAttemptId"},"offset":{"shape":"Integer","location":"querystring","locationName":"offset"},"length":{"shape":"Integer","location":"querystring","locationName":"length"},"sortBy":{"shape":"String","location":"querystring","locationName":"sortBy"},"status":{"shape":"String","location":"querystring","locationName":"status"}}},"GetStageAttemptTaskListOutput":{"type":"structure","members":{"tasks":{"shape":"TaskList"}}},"GetStageAttemptTaskSummaryInput":{"type":"structure","required":["resourceId","stageId","stageAttemptId","roleArn"],"members":{"resourceId":{"shape":"ResourceId","location":"uri","locationName":"resourceId"},"stageId":{"shape":"StageId","location":"uri","locationName":"stageId"},"stageAttemptId":{"shape":"StageId","location":"uri","locationName":"stageAttemptId"},"roleArn":{"shape":"IamRoleArn","location":"querystring","locationName":"roleArn"},"quantiles":{"shape":"String","location":"querystring","locationName":"quantiles"}}},"GetStageAttemptTaskSummaryOutput":{"type":"structure","members":{"taskMetrics":{"shape":"TaskMetricDistributions"}}},"GetStageFilesInput":{"type":"structure","required":["resourceId","roleArn"],"members":{"resourceId":{"shape":"ResourceId","location":"uri","locationName":"resourceId"},"roleArn":{"shape":"IamRoleArn","location":"querystring","locationName":"roleArn"}}},"GetStageFilesOutput":{"type":"structure","members":{"stageFiles":{"shape":"FileList"}}},"GetStageInput":{"type":"structure","required":["resourceId","roleArn","stageId"],"members":{"resourceId":{"shape":"ResourceId","location":"uri","locationName":"resourceId"},"roleArn":{"shape":"IamRoleArn","location":"querystring","locationName":"roleArn"},"stageId":{"shape":"StageId","location":"uri","locationName":"stageId"},"status":{"shape":"String","location":"querystring","locationName":"status"},"details":{"shape":"Boolean","location":"querystring","locationName":"details"},"taskStatus":{"shape":"String","location":"querystring","locationName":"taskStatus"},"withSummaries":{"shape":"Boolean","location":"querystring","locationName":"withSummaries"},"quantiles":{"shape":"String","location":"querystring","locationName":"quantiles"}}},"GetStageOutput":{"type":"structure","members":{"stageAttempts":{"shape":"StageAttemptsList"}}},"GetStagesInput":{"type":"structure","required":["resourceId","roleArn"],"members":{"resourceId":{"shape":"ResourceId","location":"uri","locationName":"resourceId"},"roleArn":{"shape":"IamRoleArn","location":"querystring","locationName":"roleArn"},"status":{"shape":"String","location":"querystring","locationName":"status"},"details":{"shape":"Boolean","location":"querystring","locationName":"details"},"taskStatus":{"shape":"String","location":"querystring","locationName":"taskStatus"},"withSummaries":{"shape":"Boolean","location":"querystring","locationName":"withSummaries"},"quantiles":{"shape":"String","location":"querystring","locationName":"quantiles"}}},"GetStagesOutput":{"type":"structure","members":{"stages":{"shape":"StagesList"}}},"GetStorageInput":{"type":"structure","required":["resourceId","roleArn"],"members":{"resourceId":{"shape":"ResourceId","location":"uri","locationName":"resourceId"},"roleArn":{"shape":"IamRoleArn","location":"querystring","locationName":"roleArn"}}},"GetStorageOutput":{"type":"structure","members":{"storage":{"shape":"RddList"}}},"GetStorageUnitInput":{"type":"structure","required":["resourceId","roleArn","rddId"],"members":{"resourceId":{"shape":"ResourceId","location":"uri","locationName":"resourceId"},"roleArn":{"shape":"IamRoleArn","location":"querystring","locationName":"roleArn"},"rddId":{"shape":"RddId","location":"uri","locationName":"rddId"}}},"GetStorageUnitOutput":{"type":"structure","members":{"storage":{"shape":"Rdd"}}},"IamRoleArn":{"type":"string","max":512,"min":16,"pattern":"arn:aws:iam::([0-9]{12}):role/[a-zA-Z/0-9+=,.@_-]+"},"InputMetrics":{"type":"structure","members":{"bytesRead":{"shape":"Long"},"recordsRead":{"shape":"Long"}}},"InputMetricsDistributions":{"type":"structure","members":{"bytesRead":{"shape":"DoubleList"},"recordsRead":{"shape":"DoubleList"}}},"Integer":{"type":"integer","box":true},"IntegerList":{"type":"list","member":{"shape":"Integer"}},"InternalServiceException":{"type":"structure","members":{"message":{"shape":"String"}},"documentation":"<p>This exception is thrown when a call fails due to internal error.</p>","error":{"httpStatusCode":500},"exception":true,"fault":true},"InvalidInputException":{"type":"structure","members":{"message":{"shape":"String"}},"documentation":"<p>This exception is thrown when the format of the input is incorrect.</p>","error":{"httpStatusCode":400,"senderFault":true},"exception":true},"Job":{"type":"structure","required":["jobId","name","stageIds","status","numTasks","numActiveTasks","numCompletedTasks","numSkippedTasks","numFailedTasks","numKilledTasks","numCompletedIndices","numActiveStages","numCompletedStages","completedStages","numSkippedStages","numFailedStages","killedTasksSummary"],"members":{"jobId":{"shape":"Integer"},"name":{"shape":"String"},"description":{"shape":"String"},"submissionTime":{"shape":"DateString"},"completionTime":{"shape":"DateString"},"stageIds":{"shape":"IntegerList"},"jobGroup":{"shape":"String"},"status":{"shape":"JobExecutionStatus"},"numTasks":{"shape":"Integer"},"numActiveTasks":{"shape":"Integer"},"numCompletedTasks":{"shape":"Integer"},"numSkippedTasks":{"shape":"Integer"},"numFailedTasks":{"shape":"Integer"},"numKilledTasks":{"shape":"Integer"},"numCompletedIndices":{"shape":"Integer"},"completedIndices":{"shape":"UniqueItems"},"numActiveStages":{"shape":"Integer"},"numCompletedStages":{"shape":"Integer"},"completedStages":{"shape":"UniqueItems"},"numSkippedStages":{"shape":"Integer"},"skippedStages":{"shape":"UniqueItems"},"numFailedStages":{"shape":"Integer"},"killedTasksSummary":{"shape":"KilledTasksSummaryMap"}}},"JobExecutionStatus":{"type":"string","enum":["RUNNING","SUCCEEDED","FAILED","UNKNOWN"]},"JobStatusMap":{"type":"map","key":{"shape":"String"},"value":{"shape":"String"}},"JobsList":{"type":"list","member":{"shape":"Job"}},"KilledTasksSummaryMap":{"type":"map","key":{"shape":"String"},"value":{"shape":"Integer"}},"ListOfLongList":{"type":"list","member":{"shape":"LongList"}},"LogParsingJobStatus":{"type":"string","enum":["PENDING","RUNNING","COMPLETED","FAILED"]},"LogParsingRequest":{"type":"structure","required":["sparkUIpath","roleArn"],"members":{"sparkUIpath":{"shape":"LogParsingRequestSparkUIpathString"},"roleArn":{"shape":"IamRoleArn"},"rolling":{"shape":"Boolean"}}},"LogParsingRequestSparkUIpathString":{"type":"string","pattern":"s3://([^/]+)/[a-zA-Z0-9-/.!_*\'() ]{1,1024}"},"LogParsingResponse":{"type":"structure","members":{"parsingJobId":{"shape":"String"},"resourceId":{"shape":"String"},"status":{"shape":"LogParsingJobStatus"},"message":{"shape":"String"}}},"LogParsingStatusRequest":{"type":"structure","required":["resourceId","parsingJobId","roleArn"],"members":{"resourceId":{"shape":"ResourceId","location":"uri","locationName":"resourceId"},"parsingJobId":{"shape":"String","location":"uri","locationName":"parsingJobId"},"roleArn":{"shape":"IamRoleArn","location":"querystring","locationName":"roleArn"}}},"LogParsingStatusResponse":{"type":"structure","members":{"status":{"shape":"LogParsingJobStatus"},"message":{"shape":"String"},"bytesRead":{"shape":"Long"},"parseProgress":{"shape":"Float"}}},"Long":{"type":"long","box":true},"LongList":{"type":"list","member":{"shape":"Long"}},"MemoryMetrics":{"type":"structure","members":{"usedOnHeapStorageMemory":{"shape":"Long"},"usedOffHeapStorageMemory":{"shape":"Long"},"totalOnHeapStorageMemory":{"shape":"Long"},"totalOffHeapStorageMemory":{"shape":"Long"}}},"MetricsValuesMap":{"type":"map","key":{"shape":"String"},"value":{"shape":"String"}},"OutputMetrics":{"type":"structure","members":{"bytesWritten":{"shape":"Long"},"recordsWritten":{"shape":"Long"}}},"OutputMetricsDistributions":{"type":"structure","members":{"bytesWritten":{"shape":"DoubleList"},"recordsWritten":{"shape":"DoubleList"}}},"RDDDataDistribution":{"type":"structure","required":["address","memoryUsed","memoryRemaining","diskUsed"],"members":{"address":{"shape":"String"},"memoryUsed":{"shape":"Long"},"memoryRemaining":{"shape":"Long"},"diskUsed":{"shape":"Long"},"onHeapMemoryUsed":{"shape":"Long"},"offHeapMemoryUsed":{"shape":"Long"},"onHeapMemoryRemaining":{"shape":"Long"},"offHeapMemoryRemaining":{"shape":"Long"}}},"RDDDataDistributionMap":{"type":"map","key":{"shape":"String"},"value":{"shape":"RDDDataDistribution"}},"RDDOperationCluster":{"type":"structure","members":{"id":{"shape":"String"},"barrier":{"shape":"Boolean"},"name":{"shape":"String"},"childNodes":{"shape":"RDDOperationNodeList"},"childClusters":{"shape":"RDDOperationClusterList"}}},"RDDOperationClusterList":{"type":"list","member":{"shape":"RDDOperationCluster"}},"RDDOperationEdge":{"type":"structure","members":{"fromId":{"shape":"Integer"},"toId":{"shape":"Integer"}}},"RDDOperationEdgeList":{"type":"list","member":{"shape":"RDDOperationEdge"}},"RDDOperationGraph":{"type":"structure","members":{"edges":{"shape":"RDDOperationEdgeList"},"outgoingEdges":{"shape":"RDDOperationEdgeList"},"incomingEdges":{"shape":"RDDOperationEdgeList"},"rootCluster":{"shape":"RDDOperationCluster"}}},"RDDOperationNode":{"type":"structure","members":{"id":{"shape":"Integer"},"name":{"shape":"String"},"cached":{"shape":"Boolean"},"barrier":{"shape":"Boolean"},"callsite":{"shape":"String"},"outputDeterministicLevel":{"shape":"DeterministicLevel"}}},"RDDOperationNodeList":{"type":"list","member":{"shape":"RDDOperationNode"}},"RDDPartitionInfo":{"type":"structure","required":["blockName","storageLevel","memoryUsed","diskUsed","executors"],"members":{"blockName":{"shape":"String"},"storageLevel":{"shape":"String"},"memoryUsed":{"shape":"Long"},"diskUsed":{"shape":"Long"},"executors":{"shape":"StringList"}}},"RDDPartitionInfoMap":{"type":"map","key":{"shape":"String"},"value":{"shape":"RDDPartitionInfo"}},"Rdd":{"type":"structure","required":["id","name","numPartitions","numCachedPartitions","storageLevel","memoryUsed","diskUsed"],"members":{"id":{"shape":"Integer"},"name":{"shape":"String"},"numPartitions":{"shape":"Integer"},"numCachedPartitions":{"shape":"Integer"},"storageLevel":{"shape":"String"},"memoryUsed":{"shape":"Long"},"diskUsed":{"shape":"Long"},"dataDistribution":{"shape":"RDDDataDistributionMap"},"partitions":{"shape":"RDDPartitionInfoMap"}}},"RddId":{"type":"string","max":64,"min":1},"RddList":{"type":"list","member":{"shape":"Rdd"}},"ResourceId":{"type":"string","max":512,"min":8},"ResourceInformation":{"type":"structure","members":{"name":{"shape":"String"},"addresses":{"shape":"StringList"}}},"ResourceProfileInfo":{"type":"structure","members":{"id":{"shape":"Integer"},"executorResources":{"shape":"ExecutorResourceRequestMap"},"taskResources":{"shape":"TaskResourceRequestMap"}}},"ResourceProfileInfoList":{"type":"list","member":{"shape":"ResourceProfileInfo"}},"Resources":{"type":"map","key":{"shape":"String"},"value":{"shape":"ResourceInformation"}},"RuntimeInfo":{"type":"structure","members":{"javaVersion":{"shape":"String"},"javaHome":{"shape":"String"},"scalaVersion":{"shape":"String"}}},"ShufflePushReadMetrics":{"type":"structure","members":{"corruptMergedBlockChunks":{"shape":"Long"},"mergedFetchFallbackCount":{"shape":"Long"},"remoteMergedBlocksFetched":{"shape":"Long"},"localMergedBlocksFetched":{"shape":"Long"},"remoteMergedChunksFetched":{"shape":"Long"},"localMergedChunksFetched":{"shape":"Long"},"remoteMergedBytesRead":{"shape":"Long"},"localMergedBytesRead":{"shape":"Long"},"remoteMergedReqsDuration":{"shape":"Long"}}},"ShufflePushReadMetricsDistributions":{"type":"structure","members":{"corruptMergedBlockChunks":{"shape":"DoubleList"},"mergedFetchFallbackCount":{"shape":"DoubleList"},"remoteMergedBlocksFetched":{"shape":"DoubleList"},"localMergedBlocksFetched":{"shape":"DoubleList"},"remoteMergedChunksFetched":{"shape":"DoubleList"},"localMergedChunksFetched":{"shape":"DoubleList"},"remoteMergedBytesRead":{"shape":"DoubleList"},"localMergedBytesRead":{"shape":"DoubleList"},"remoteMergedReqsDuration":{"shape":"DoubleList"}}},"ShuffleReadMetrics":{"type":"structure","members":{"readBytes":{"shape":"Long"},"recordsRead":{"shape":"Long"},"remoteBlocksFetched":{"shape":"Long"},"localBlocksFetched":{"shape":"Long"},"fetchWaitTime":{"shape":"Long"},"remoteBytesRead":{"shape":"Long"},"remoteBytesReadToDisk":{"shape":"Long"},"totalBlocksFetched":{"shape":"Long"},"localBytesRead":{"shape":"Long"},"remoteReqsDuration":{"shape":"Long"},"shufflePushReadMetrics":{"shape":"ShufflePushReadMetrics"}}},"ShuffleReadMetricsDistributions":{"type":"structure","members":{"readBytes":{"shape":"DoubleList"},"recordsRead":{"shape":"DoubleList"},"remoteBlocksFetched":{"shape":"DoubleList"},"localBlocksFetched":{"shape":"DoubleList"},"fetchWaitTime":{"shape":"DoubleList"},"remoteBytesRead":{"shape":"DoubleList"},"remoteBytesReadToDisk":{"shape":"DoubleList"},"totalBlocksFetched":{"shape":"DoubleList"},"localBytesRead":{"shape":"DoubleList"},"remoteReqsDuration":{"shape":"DoubleList"},"shufflePushReadMetrics":{"shape":"ShufflePushReadMetricsDistributions"}}},"ShuffleWriteMetrics":{"type":"structure","members":{"bytesWritten":{"shape":"Long"},"recordsWritten":{"shape":"Long"},"writeTime":{"shape":"Long"}}},"ShuffleWriteMetricsDistributions":{"type":"structure","members":{"bytesWritten":{"shape":"DoubleList"},"recordsWritten":{"shape":"DoubleList"},"writeTime":{"shape":"DoubleList"}}},"SparkPlanGraph":{"type":"structure","members":{"nodes":{"shape":"SparkPlanGraphNodeList"},"edges":{"shape":"SparkPlanGraphEdgeList"}}},"SparkPlanGraphEdge":{"type":"structure","members":{"fromId":{"shape":"Long"},"toId":{"shape":"Long"}}},"SparkPlanGraphEdgeList":{"type":"list","member":{"shape":"SparkPlanGraphEdge"}},"SparkPlanGraphNode":{"type":"structure","members":{"id":{"shape":"Long"},"name":{"shape":"String"},"desc":{"shape":"String"},"wholeStageCodegenId":{"shape":"Long"},"metrics":{"shape":"SqlPlanMetricList"}}},"SparkPlanGraphNodeList":{"type":"list","member":{"shape":"SparkPlanGraphNode"}},"SpeculationStageSummary":{"type":"structure","members":{"numTasks":{"shape":"Integer"},"numActiveTasks":{"shape":"Integer"},"numCompletedTasks":{"shape":"Integer"},"numFailedTasks":{"shape":"Integer"},"numKilledTasks":{"shape":"Integer"}}},"SqlPlanMetric":{"type":"structure","members":{"name":{"shape":"String"},"accumulatorId":{"shape":"Long"},"metricType":{"shape":"String"}}},"SqlPlanMetricList":{"type":"list","member":{"shape":"SqlPlanMetric"}},"Stage":{"type":"structure","required":["stageId","status","attemptId","numTasks","numActiveTasks","numCompleteTasks","numFailedTasks","numKilledTasks","numCompletedIndices"],"members":{"stageId":{"shape":"Integer"},"status":{"shape":"StageStatus"},"attemptId":{"shape":"Integer"},"numTasks":{"shape":"Integer"},"numActiveTasks":{"shape":"Integer"},"numCompleteTasks":{"shape":"Integer"},"numFailedTasks":{"shape":"Integer"},"numKilledTasks":{"shape":"Integer"},"numCompletedIndices":{"shape":"Integer"},"completedIndices":{"shape":"UniqueItems"},"submissionTime":{"shape":"DateString"},"firstTaskLaunchedTime":{"shape":"DateString"},"completionTime":{"shape":"DateString"},"failureReason":{"shape":"String"},"executorDeserializeTime":{"shape":"Long"},"executorDeserializeCpuTime":{"shape":"Long"},"executorRunTime":{"shape":"Long"},"executorCpuTime":{"shape":"Long"},"resultSize":{"shape":"Long"},"jvmGcTime":{"shape":"Long"},"resultSerializationTime":{"shape":"Long"},"memoryBytesSpilled":{"shape":"Long"},"diskBytesSpilled":{"shape":"Long"},"peakExecutionMemory":{"shape":"Long"},"inputBytes":{"shape":"Long"},"inputRecords":{"shape":"Long"},"outputBytes":{"shape":"Long"},"outputRecords":{"shape":"Long"},"shuffleRemoteBlocksFetched":{"shape":"Long"},"shuffleLocalBlocksFetched":{"shape":"Long"},"shuffleFetchWaitTime":{"shape":"Long"},"shuffleRemoteBytesRead":{"shape":"Long"},"shuffleRemoteBytesReadToDisk":{"shape":"Long"},"shuffleLocalBytesRead":{"shape":"Long"},"shuffleReadBytes":{"shape":"Long"},"shuffleReadRecords":{"shape":"Long"},"shuffleWriteBytes":{"shape":"Long"},"shuffleWriteTime":{"shape":"Long"},"shuffleWriteRecords":{"shape":"Long"},"name":{"shape":"String"},"description":{"shape":"String"},"details":{"shape":"String"},"schedulingPool":{"shape":"String"},"rddIds":{"shape":"IntegerList"},"accumulatorUpdates":{"shape":"AccumulableInfoList"},"tasks":{"shape":"TaskDataMap"},"executorSummary":{"shape":"ExecutorStageSummaryMap"},"speculationSummary":{"shape":"SpeculationStageSummary"},"killedTasksSummary":{"shape":"KilledTasksSummaryMap"},"resourceProfileId":{"shape":"Integer"},"peakExecutorMetrics":{"shape":"ExecutorMetrics"},"taskMetricsDistributions":{"shape":"TaskMetricDistributions"},"executorMetricsDistributions":{"shape":"ExecutorMetricsDistributions"},"dag":{"shape":"RDDOperationGraph"}}},"StageAttemptsList":{"type":"list","member":{"shape":"Stage"}},"StageId":{"type":"string","max":64,"min":1},"StageStatus":{"type":"string","enum":["ACTIVE","COMPLETE","FAILED","PENDING","SKIPPED"]},"StagesList":{"type":"list","member":{"shape":"Stage"}},"String":{"type":"string"},"StringList":{"type":"list","member":{"shape":"String"}},"StringMap":{"type":"map","key":{"shape":"String"},"value":{"shape":"String"}},"StringPair":{"type":"structure","members":{"key":{"shape":"String"},"value":{"shape":"String"}}},"StringTupleList":{"type":"list","member":{"shape":"StringPair"}},"Task":{"type":"structure","required":["taskId","index","attempt","partitionId","launchTime","executorId","host","status","taskLocality","speculative","accumulatorUpdates","errorMessage","schedulerDelay","gettingResultTime"],"members":{"taskId":{"shape":"Long"},"index":{"shape":"Integer"},"attempt":{"shape":"Integer"},"partitionId":{"shape":"Integer"},"launchTime":{"shape":"DateString"},"resultFetchStart":{"shape":"DateString"},"duration":{"shape":"Long"},"executorId":{"shape":"String"},"host":{"shape":"String"},"status":{"shape":"String"},"taskLocality":{"shape":"String"},"speculative":{"shape":"Boolean"},"accumulatorUpdates":{"shape":"AccumulableInfoList"},"errorMessage":{"shape":"String"},"taskMetrics":{"shape":"TaskMetrics"},"schedulerDelay":{"shape":"Long"},"gettingResultTime":{"shape":"Long"}}},"TaskDataMap":{"type":"map","key":{"shape":"String"},"value":{"shape":"Task"}},"TaskList":{"type":"list","member":{"shape":"Task"}},"TaskMetricDistributions":{"type":"structure","members":{"quantiles":{"shape":"DoubleList"},"duration":{"shape":"DoubleList"},"executorDeserializeTime":{"shape":"DoubleList"},"executorDeserializeCpuTime":{"shape":"DoubleList"},"executorRunTime":{"shape":"DoubleList"},"executorCpuTime":{"shape":"DoubleList"},"resultSize":{"shape":"DoubleList"},"jvmGcTime":{"shape":"DoubleList"},"resultSerializationTime":{"shape":"DoubleList"},"gettingResultTime":{"shape":"DoubleList"},"schedulerDelay":{"shape":"DoubleList"},"peakExecutionMemory":{"shape":"DoubleList"},"memoryBytesSpilled":{"shape":"DoubleList"},"diskBytesSpilled":{"shape":"DoubleList"},"inputMetrics":{"shape":"InputMetricsDistributions"},"outputMetrics":{"shape":"OutputMetricsDistributions"},"shuffleReadMetrics":{"shape":"ShuffleReadMetricsDistributions"},"shuffleWriteMetrics":{"shape":"ShuffleWriteMetricsDistributions"}}},"TaskMetrics":{"type":"structure","members":{"executorDeserializeTime":{"shape":"Long"},"executorDeserializeCpuTime":{"shape":"Long"},"executorRunTime":{"shape":"Long"},"executorCpuTime":{"shape":"Long"},"resultSize":{"shape":"Long"},"jvmGcTime":{"shape":"Long"},"resultSerializationTime":{"shape":"Long"},"memoryBytesSpilled":{"shape":"Long"},"diskBytesSpilled":{"shape":"Long"},"peakExecutionMemory":{"shape":"Long"},"inputMetrics":{"shape":"InputMetrics"},"outputMetrics":{"shape":"OutputMetrics"},"shuffleReadMetrics":{"shape":"ShuffleReadMetrics"},"shuffleWriteMetrics":{"shape":"ShuffleWriteMetrics"}}},"TaskResourceRequest":{"type":"structure","members":{"resourceName":{"shape":"String"},"amount":{"shape":"Double"}}},"TaskResourceRequestMap":{"type":"map","key":{"shape":"String"},"value":{"shape":"TaskResourceRequest"}},"ThreadStackTrace":{"type":"structure","required":["threadId","threadName","threadState","stackTrace","blockedByLock","holdingLocks"],"members":{"threadId":{"shape":"Long"},"threadName":{"shape":"String"},"threadState":{"shape":"String"},"stackTrace":{"shape":"String"},"blockedByThreadId":{"shape":"Long"},"blockedByLock":{"shape":"String"},"holdingLocks":{"shape":"StringList"}}},"ThreadStackTraceList":{"type":"list","member":{"shape":"ThreadStackTrace"}},"ThrottlingException":{"type":"structure","members":{"message":{"shape":"String"}},"documentation":"<p>This exception is thrown when the client doesn\'t is being throttled by the server.</p>","error":{"httpStatusCode":429,"senderFault":true},"exception":true},"UnauthorizedException":{"type":"structure","members":{"message":{"shape":"String"}},"documentation":"<p>This exception is thrown when the client is unauthenticated.</p>","error":{"httpStatusCode":401,"senderFault":true},"exception":true},"UniqueItems":{"type":"list","member":{"shape":"Integer"}}}}')},2798:function(e,t,n){},2799:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n(752),o=n(95),r=n(137);function i(e){var t={JobName:e},n=Object(a.a)({queryKey:["getJob",t.JobName],queryFn:function(){return o.a.getJob(t).promise()},enabled:!!t.JobName}),i=n.data,s=void 0===i?{Job:{}}:i,c=n.status;return{jobConfig:Object(r.a)(s),status:c}}},2800:function(e,t,n){},2801:function(e,t,n){"use strict";n.d(t,"e",(function(){return p})),n.d(t,"d",(function(){return f})),n.d(t,"b",(function(){return h})),n.d(t,"c",(function(){return m})),n.d(t,"a",(function(){return g}));var a=n(3),o=n(46),r=n(0),i=n(30),s=n(206),c=n(57),l=n(1),u=i.a.isEnabled("feature-streaming-worker-type"),d=i.a.isEnabled("feature-large-worker-types"),b=[{label:"G 1X",id:"G.1X",description:u?"(4vCPU and 16GB RAM)":void 0},{label:"G 2X",id:"G.2X",description:u?"(8vCPU and 32GB RAM)":void 0}],p=[{label:"G 4X",id:"G.4X",description:u?"(16vCPU and 64GB RAM)":void 0},{label:"G 8X",id:"G.8X",description:u?"(32vCPU and 128GB RAM)":void 0}],f=function(e){var t=e.workerType;return p.map((function(e){return e.id})).includes(null!==t&&void 0!==t?t:"")},j=[{label:"G 0.25X",id:"G.025X",description:"(2vCPU and 4GB RAM)"}],h=[{label:"Z 2X",id:"Z.2X",description:"(8vCPU and 64GB RAM)"}],m=function(e){return(null===e||void 0===e?void 0:e.command)!==s.a.gluestreaming||"3.0"!==(null===e||void 0===e?void 0:e.version)&&"4.0"!==(null===e||void 0===e?void 0:e.version)||!u?(null===e||void 0===e?void 0:e.command)===s.a.glueray?[].concat(h):("4.0"===(null===e||void 0===e?void 0:e.version)||"3.0"===(null===e||void 0===e?void 0:e.version))&&d?[].concat(b,p):b:[].concat(j,b)},g=function(e){var t=Object.assign({},e),n=Object(o.a)().values.jobConfig,i=Object(r.useMemo)((function(){return m(n)}),[n]);return Object(l.jsx)(c.m,Object(a.a)(Object(a.a)({resourceNameLabel:"worker type"},t),{},{options:i}))}},2802:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return c}));var a=n(0),o=n(30),r=n(2667),i={PYTHON:{label:"Python",changesExplanation:"the job language has been set to Python"},GLUE4:{label:"Version 4.0 or higher",changesExplanation:"the Glue version has been updated to 4.0"},GLUE3:{label:"Version 3.0 or higher",changesExplanation:"the Glue version has been updated to 4.0"}},s=[["Snowflake",{condition:function(){return o.a.isEnabled("feature-snowflake-direct-connections")},reason:"Snowflake connections",requirements:new Set(["GLUE4"])}],["Recipe",{condition:function(){return o.a.isEnabled("feature-transform-databrew-recipe")},reason:"Data Preparation Recipe actions",requirements:new Set(["GLUE4","PYTHON"])}],["EvaluateDataQualityMultiFrame",{condition:function(){return o.a.isEnabled("feature-transform-dq")},reason:"Evaluate data quality actions",requirements:new Set(["GLUE3"])}],["EvaluateDataQuality",{condition:function(){return o.a.isEnabled("feature-transform-dq")},reason:"Evaluate data quality actions",requirements:new Set(["GLUE3"])}]],c=function(e){var t=Object(a.useMemo)((function(){return new Map(s.filter((function(e){return e[1].condition()})))}),[]),n=Object(a.useMemo)((function(){return Array.from(Object(r.g)(e).keys()).reduce((function(e,n){if(t.has(n)){var a=t.get(n);a.requirements.forEach((function(t){return e.set(t,(e.get(t)||[]).concat(a.reason))}))}return e}),new Map)}),[e,t]),o=Object(a.useCallback)((function(e){return Array.from(e.reduce((function(e,t){var a;return null===(a=n.get(t))||void 0===a||a.forEach((function(t){return e.add(t)})),e}),new Set))}),[n]),i=Object(a.useCallback)((function(e){return Array.from(e).filter((function(e){return!n.has(e)}))}),[n]);return{requireGlue4:n.has("GLUE4"),requireGlue4Reasons:n.get("GLUE4"),requireGlue3:n.has("GLUE3"),requireGlue3Reasons:n.get("GLUE3"),requirePython:n.has("PYTHON"),requirePythonReasons:n.get("PYTHON"),getUniqueReasonsForRequirements:o,getNoLongerRequiredList:i}}},2803:function(e,t,n){"use strict";n.d(t,"b",(function(){return d})),n.d(t,"c",(function(){return p})),n.d(t,"a",(function(){return f}));var a=n(5),o=n(3),r=n(2734),i=n(2746),s=n(2750),c=n(2751),l=n(757),u=n(2698),d={spark:!1},b=function(e){if(Object(r.c)(e))return Object(o.a)(Object(o.a)({},c.a),{},{jobMode:"VISUAL_MODE"});if(Object(r.a)(e)){var t=s.b[e];if("glueray"===t.engine)return Object(o.a)(Object(o.a)({},l.j),{},{jobMode:"NOTEBOOK_MODE"});if("glueetl"===t.engine)return Object(o.a)(Object(o.a)(Object(o.a)({},c.a),d),{},{jobMode:"NOTEBOOK_MODE"})}return{}},p=i.a.reduce((function(e,t){var n=function(e){var t=i.b[e],n=i.c.reduce((function(e,t){var n=t.key,a=t.replacement;return e.replaceAll(n,a)}),t);return Object(u.e)(n)}(t),r=b(t),s=Object(u.a)(n,Object(o.a)(Object(o.a)({},r),{},{name:"",role:""}));return Object(o.a)(Object(o.a)({},e),{},Object(a.a)({},t,{config:r,dag:s}))}),{}),f=s.a.reduce((function(e,t){return Object(o.a)(Object(o.a)({},e),{},Object(a.a)({},t,{config:b(t),script:(n=t,s.c[n])}));var n}),{})},2804:function(e){e.exports=JSON.parse('{"node-1685352206564":{"nodeId":"node-1685352206564","dataPreview":false,"previewAmount":0,"inputs":[],"name":"Plans","generatedNodeName":"Plans_node1685352206564","classification":"DataSource","type":"S3","isCatalog":false,"format":"csv","paths":["s3://aws-bigdata-blog/artifacts/telco-data-monetization-configs-<REGION>/data/tariff_plan_desc_20190501.csv.gz"],"compressionType":null,"exclusions":[],"groupFiles":null,"groupSize":null,"recurse":true,"maxBand":null,"maxFilesInBand":null,"additionalOptions":{"boundedSize":null,"boundedFiles":null,"enableSamplePath":false,"samplePath":"s3://aws-bigdata-blog/artifacts/telco-data-monetization-configs-<REGION>/data/tariff_plan_desc_20190501.csv.gz","boundedOption":null},"separator":",","escaper":"","quoteChar":"\\"","multiline":null,"withHeader":true,"writeHeader":null,"skipFirst":null,"optimizePerformance":false,"outputSchemas":[[{"key":"plan_id","fullPath":["plan_id"],"type":"string","glueStudioType":null,"children":null},{"key":"plan_desc","fullPath":["plan_desc"],"type":"string","glueStudioType":null,"children":null},{"key":"plan_price","fullPath":["plan_price"],"type":"string","glueStudioType":null,"children":null}]],"calculatedType":""},"node-1685352066932":{"nodeId":"node-1685352066932","dataPreview":false,"previewAmount":0,"inputs":[],"name":"Plan assignment","generatedNodeName":"Planassignment_node1685352066932","classification":"DataSource","type":"S3","isCatalog":false,"format":"csv","paths":["s3://aws-bigdata-blog/artifacts/telco-data-monetization-configs-<REGION>/data/customer_subscription_map_20190501.csv.gz"],"compressionType":null,"exclusions":[],"groupFiles":null,"groupSize":null,"recurse":true,"maxBand":null,"maxFilesInBand":null,"additionalOptions":{"boundedSize":null,"boundedFiles":null,"enableSamplePath":false,"samplePath":"s3://aws-bigdata-blog/artifacts/telco-data-monetization-configs-<REGION>/data/customer_subscription_map_20190501.csv.gz","boundedOption":null},"separator":",","escaper":"","quoteChar":"\\"","multiline":null,"withHeader":true,"writeHeader":null,"skipFirst":null,"optimizePerformance":false,"outputSchemas":[[{"key":"msisdn","fullPath":["msisdn"],"type":"string","glueStudioType":null,"children":null},{"key":"plan_id","fullPath":["plan_id"],"type":"string","glueStudioType":null,"children":null}]],"calculatedType":""},"node-1685352920969":{"nodeId":"node-1685352920969","dataPreview":false,"previewAmount":0,"inputs":["node-1685353487597"],"name":"Catalog","generatedNodeName":"Catalog_node1685352920969","classification":"DataSink","type":"S3","streamingBatchInterval":100,"format":"glueparquet","compression":"snappy","path":"<TEMPORARY_DIRECTORY>/example/subscriber_plans/","partitionKeys":[["plan_id"]],"schemaChangePolicy":{"enableUpdateCatalog":true,"updateBehavior":"UPDATE_IN_DATABASE","database":"default","table":"subscriber_plans"},"updateCatalogOptions":"schemaAndPartitions","calculatedType":""},"node-1685352536679":{"nodeId":"node-1685352536679","dataPreview":false,"previewAmount":0,"inputs":["node-1685352066932","node-1"],"name":"Join","generatedNodeName":"Join_node1685352536679","classification":"Transform","type":"Join","joinType":"equijoin","columns":[{"from":"node-1685352066932","keys":[["msisdn"]]},{"from":"node-1","keys":[["msisdn"]]}],"columnConditions":["="],"parentsValid":true,"calculatedType":""},"node-1685353487597":{"nodeId":"node-1685353487597","dataPreview":false,"previewAmount":0,"inputs":["node-1685353779136"],"name":"Change Schema","generatedNodeName":"ChangeSchema_node1685353487597","classification":"Transform","type":"ApplyMapping","mapping":[{"toKey":"plan_id","fromPath":["plan_id"],"toType":"bigint","fromType":"string","dropped":false,"children":null},{"toKey":"gender","fromPath":["gender"],"toType":"string","fromType":"string","dropped":false,"children":null},{"toKey":"birth_date","fromPath":["birth_date"],"toType":"string","fromType":"string","dropped":false,"children":null},{"toKey":"is_vip","fromPath":["is_vip"],"toType":"boolean","fromType":"string","dropped":false,"children":null},{"toKey":"plan_desc","fromPath":["plan_desc"],"toType":"string","fromType":"string","dropped":false,"children":null},{"toKey":"plan_price","fromPath":["plan_price"],"toType":"int","fromType":"string","dropped":false,"children":null}],"parentsValid":true,"calculatedType":""},"node-1":{"nodeId":"node-1","dataPreview":false,"previewAmount":0,"inputs":[],"name":"Subscribers","generatedNodeName":"Subscribers_node1","classification":"DataSource","type":"S3","isCatalog":false,"format":"csv","paths":["s3://aws-bigdata-blog/artifacts/telco-data-monetization-configs-<REGION>/data/crm_demographics_20190501.csv.gz"],"compressionType":null,"exclusions":[],"groupFiles":null,"groupSize":null,"recurse":true,"maxBand":null,"maxFilesInBand":null,"additionalOptions":{"boundedSize":null,"boundedFiles":null,"enableSamplePath":false,"samplePath":"s3://aws-bigdata-blog/artifacts/telco-data-monetization-configs-<REGION>/data/crm_demographics_20190501.csv.gz","boundedOption":null},"separator":",","escaper":"","quoteChar":"\\"","multiline":null,"withHeader":true,"writeHeader":null,"skipFirst":null,"optimizePerformance":false,"outputSchemas":[[{"key":"msisdn","fullPath":["msisdn"],"type":"string","glueStudioType":null,"children":null},{"key":"gender","fullPath":["gender"],"type":"string","glueStudioType":null,"children":null},{"key":"birth_date","fullPath":["birth_date"],"type":"string","glueStudioType":null,"children":null},{"key":"is_vip","fullPath":["is_vip"],"type":"string","glueStudioType":null,"children":null}]],"calculatedType":""},"node-1685352743084":{"nodeId":"node-1685352743084","dataPreview":false,"previewAmount":0,"inputs":["node-1685352536679","node-1685352206564"],"name":"Join","generatedNodeName":"Join_node1685352743084","classification":"Transform","type":"Join","joinType":"equijoin","columns":[{"from":"node-1685352536679","keys":[["plan_id"]]},{"from":"node-1685352206564","keys":[["plan_id"]]}],"columnConditions":["="],"parentsValid":true,"calculatedType":""},"node-1685353779136":{"nodeId":"node-1685353779136","dataPreview":false,"previewAmount":0,"inputs":["node-1685352743084"],"name":"Select Fields","generatedNodeName":"SelectFields_node1685353779136","classification":"Transform","type":"SelectFields","paths":[["plan_id"],["gender"],["birth_date"],["is_vip"],["plan_desc"],["plan_price"]],"parentsValid":true,"calculatedType":""}}')},2805:function(e){e.exports=JSON.parse('{"metadata":{"kernelspec":{"name":"glue_pyspark","display_name":"Glue PySpark","language":"python"},"language_info":{"name":"Python_Glue_Session","mimetype":"text/x-python","codemirror_mode":{"name":"python","version":3},"pygments_lexer":"python3","file_extension":".py"}},"nbformat_minor":4,"nbformat":4,"cells":[{"cell_type":"markdown","source":"### This notebook shows examples of using Ray to explore and handle data\xb6\\nTo follow this example notebook, execute the cells in order.\\nThe keyboard shortcut to execute the current cell and jump to the following is: Shift+Enter.\\n\\nTo delete cells no longer needed (including this one), you can use the context menu or use the Escape key (to exit any cell you might be in) and then press the d key twice.  \\nYou can select multiple cells using Shift + Up/Down, to delete many quickly.\\n","metadata":{"editable":true,"trusted":true}},{"cell_type":"markdown","source":"#### Running the following cell will set up and start your interactive session.\\n","metadata":{"editable":true,"tags":[],"trusted":true}},{"cell_type":"code","source":"%idle_timeout 120\\n%number_of_workers 4\\n%glue_ray\\n\\nimport boto3\\nimport ray\\n\\n# Change log_to_driver to True to help troubleshoot or see more details\\nray.init(\'auto\', log_to_driver=False)","metadata":{"editable":true,"trusted":true},"execution_count":null,"outputs":[]},{"cell_type":"code","source":"# Define the Dataset, the data is not actually read until we use it\\n# Check the Ray documentation for a full list of operations: https://docs.ray.io/en/latest/data/api/dataset.html\\n#  or how to read other formats and inputs: https://docs.ray.io/en/latest/data/api/input_output.html\\nds = ray.data.read_parquet(\\"s3://amazon-reviews-pds/parquet/product_category=Video/\\").repartition(100)","metadata":{"trusted":true},"execution_count":null,"outputs":[]},{"cell_type":"code","source":"ds.schema()","metadata":{"trusted":true},"execution_count":null,"outputs":[]},{"cell_type":"code","source":"# Display a few rows to understand how the data looks like\\nds.show(4)","metadata":{"trusted":true},"execution_count":null,"outputs":[]},{"cell_type":"code","source":"# Find reviews with verified purchases and star rating at least of 4, in the lambda, df is a pandas DataFrame that handles the operation efficiently in batches\\nds_verified_4star = ds.map_batches(lambda df: df[(df[\\"star_rating\\"] >= 4) & (df[\\"verified_purchase\\"] == \'Y\')])","metadata":{"trusted":true},"execution_count":null,"outputs":[]},{"cell_type":"code","source":"# Get the 5 products from the subdataset with most reviews and save it as a Python list variable (we know the data is small enough to fit in the driver memory)\\nmost_reviewed_list = ds_verified_4star.groupby(\\"product_title\\").count().sort(\\"count()\\", descending=True).limit(5).take()\\nprint(f\\"The most  reviewed: {most_reviewed_list[0]}\\")","metadata":{"trusted":true},"execution_count":null,"outputs":[]},{"cell_type":"code","source":"# In this example we are interested in the length rather than the full test, to investigate later if there is a correlation between that and the helpful_votes\\n# Add a derived column with the length of the review\\nds_verified_4star_len = ds_verified_4star.add_column(\\"review_len\\", lambda df: len(df[\\"review_body\\"]))","metadata":{"trusted":true},"execution_count":null,"outputs":[]},{"cell_type":"code","source":"# By default this example will save using the glue temporary bucket, you can replace it for another of your choice\\noutput_bucket = f\\"aws-glue-temporary-{boto3.client(\'sts\').get_caller_identity()[\'Account\']}-{boto3.session.Session().region_name}\\"\\n\\n# Save only the columns we need into a CSV, the data is small enough that we can write to a single file, use repartition to 1 to do so\\ncol_list = [\\"review_id\\", \\"customer_id\\", \\"product_id\\", \\"product_title\\", \\"star_rating\\", \\"helpful_votes\\", \\"marketplace\\", \\"review_len\\"]\\noutput_dir = f\\"s3://{output_bucket}/examples/ds_verified_4star_len/\\"\\nds_verified_4star_len.select_columns(col_list).repartition(1).write_csv(output_dir)\\nprint(f\\"Generated a single csv file under: {output_dir}\\")","metadata":{"trusted":true},"execution_count":null,"outputs":[]},{"cell_type":"code","source":"# Use pandas to calculate the correlation between numeric columns\\nds_verified_4star_len.to_pandas().corr()","metadata":{"trusted":true},"execution_count":null,"outputs":[]}]}')},2806:function(e){e.exports=JSON.parse('{"cells":[{"cell_type":"markdown","id":"8cb16da0","metadata":{},"source":["### This notebook shows examples of using Glue on Spark for users familiar with pandas\\n","To follow this example notebook, execute the cells in order.\\n","The keyboard shortcut to execute the current cell and jump to the following is: Shift+Enter.\\n","\\n","To delete cells no longer needed (including this one), you can use the context menu or use the Escape key (to exit any cell you might be in) and then press the d key twice. You can select multiple cells using Shift + Up/Down, to delete many quickly.\\n","\\n","This example assumes the configured role has permission to read/write on the default catalog database and the s3 glue temporary folder, otherwise update the code or the permissions accordingly."]},{"cell_type":"markdown","id":"dc7cacd1","metadata":{},"source":["####  Running the following cell will set up and start your interactive session."]},{"cell_type":"code","execution_count":null,"id":"a3fea417","metadata":{},"outputs":[],"source":["%idle_timeout 120\\n","%glue_version 4.0\\n","%worker_type G.1X\\n","%number_of_workers 2\\n","\\n","import boto3\\n","import sys\\n","from awsglue.dynamicframe import DynamicFrame\\n","from awsglue.transforms import *\\n","from awsglue.utils import getResolvedOptions\\n","from pyspark.context import SparkContext\\n","from pyspark.sql.functions import *\\n","from awsglue.context import GlueContext\\n","from awsglue.job import Job\\n","  \\n","sc = SparkContext.getOrCreate()\\n","glueContext = GlueContext(sc)\\n","spark = glueContext.spark_session\\n","job = Job(glueContext)"]},{"cell_type":"code","execution_count":null,"id":"7a4db5b0","metadata":{},"outputs":[],"source":["# Optimize the data movement from pandas to Spark DataFrame and back\\n","spark.conf.set(\\"spark.sql.execution.arrow.pyspark.enabled\\", \\"true\\")\\n","\\n","# You can define a distributed Spark DataFrame, to read the data in a distributed way and be able to process large data\\n","# Here it takes a bit of time because we ask it to infer schema, in practice could just let it set everything as string\\n","# and handle the schema manually\\n","sdf = spark.read.csv(\\"s3://awsglue-datasets/examples/medicare/Medicare_Hospital_Provider.csv\\", \\n","                     header=True, inferSchema=True)"]},{"cell_type":"code","execution_count":null,"id":"7f867e92","metadata":{},"outputs":[],"source":["# The schema inference considered the dollar amounts as string due to the $ symbol\\n","# Also in the csv there are some header with extra spaces, we\'ll deal with that later\\n","sdf.printSchema()"]},{"cell_type":"code","execution_count":null,"id":"473bf9ac","metadata":{},"outputs":[],"source":["# The last 3 columns are dollar amounts, let\'s parse them into Decimal numbers for calculations\\n","last_3cols = sdf.columns[-3:]\\n","# These transformations are just defined here, until we extract the data Spark won\'t do the work (lazy execution)\\n","for col_name in last_3cols:\\n","    # Note: normally for monies it\'s better to use decimal but pandas doesn\'t support it\\n","    sdf = sdf.withColumn(col_name, regexp_replace(sdf[col_name], \'\\\\$\', \'\').cast(\'double\'))\\n","\\n","# The zip code is not really a number\\n","sdf = sdf.withColumn(\'Provider Zip Code\', sdf[\'Provider Zip Code\'].cast(\'string\'))"]},{"cell_type":"code","execution_count":null,"id":"68372c4f","metadata":{},"outputs":[],"source":["# Check the parsing is working fine\\n","sdf.show(n=10)"]},{"cell_type":"code","execution_count":null,"id":"150b2e81","metadata":{},"outputs":[],"source":["# Let\'s say you are only interested in California\\n","sdf_ca = sdf.filter(\'`Provider State` == \\"CA\\"\')\\n","\\n","# Now that we have narrowed down the data, it\'s small enough that we can convert into a native pandas DataFrame\\n","# Unlike sdf which reads data distributed and when needed, this pdf uses the driver memory to store the data\\n","# so is faster for smaller data as long as it fits\\n","pdf_ca = sdf_ca.toPandas()\\n","\\n","# The column names in the csv have extra spaces, in pandas we can trim that easily\\n","pdf_ca.columns = [c.strip() for c in pdf_ca.columns]"]},{"cell_type":"code","execution_count":null,"id":"4d69ff44","metadata":{},"outputs":[],"source":["# Check the pandas schema\\n","pdf_ca.dtypes"]},{"cell_type":"code","execution_count":null,"id":"42882f97","metadata":{"scrolled":false},"outputs":[],"source":["# Explore the statistics of the numeric columns\\n","import pandas as pd\\n","import numpy as np\\n","pd.set_option(\'display.max_columns\', 5)\\n","pd.set_option(\'max_colwidth\', 30)\\n","pdf_ca.describe()"]},{"cell_type":"code","execution_count":null,"id":"d0310bfc","metadata":{},"outputs":[],"source":["# Plot a histogram on the notebook directly from pandas\\n","import matplotlib.pyplot as plt\\n","plt.figure()\\n","plt.title(\\"Histogram of average Medicare payments\\")\\n","plt.xlabel(\\"Average payment in dollars\\")\\n","histogram = pdf_ca[\'Average Medicare Payments\'].plot.hist(bins=12, alpha=0.5)\\n","%matplot plt"]},{"cell_type":"markdown","id":"fcb425ef","metadata":{},"source":["If you have more experience with the pandas APIs would rather use that instead of Spark DataFrame  \\n","But notice that while we use native pandas, only the driver was doing work and the rest of the cluster is not used   \\n","That\'s why we set the minimum size: *%number_of_workers 2*  \\n","\\n","On Glue 4.0, you can get both distributed computed and the pandas syntax by using the \\"pandas on Spark\\" API, it\'s not yet 100% compatible but should work for most cases"]},{"cell_type":"code","execution_count":null,"id":"a74e182e","metadata":{},"outputs":[],"source":["# The following cells will only work on Glue 4.0\\n","# psdf is a pandas on Spark DataFrame, uses the pandas API but the data and processing is distributed\\n","# this means it has higher latency but also can scale beyond a single node to handler larger data\\n","psdf = sdf.pandas_api()\\n","psdf.columns = [c.strip() for c in psdf.columns]\\n","# Statistics on the full dataset\\n","psdf.describe()"]},{"cell_type":"code","execution_count":null,"id":"fc32263a","metadata":{},"outputs":[],"source":["# Operate the data in a distributed way but using pandas syntax\\n","relevant_psdf = psdf[(psdf[\'Total Discharges\'] > 100) & (psdf[\'Average Medicare Payments\'] > 10000)]\\n","relevant_psdf.groupby([\\"Provider State\\", \\"Provider Id\\"])[\\"Average Medicare Payments\\"].max()"]},{"cell_type":"markdown","id":"78801bf9","metadata":{},"source":["Note that in the previous cell the output is not equivalent than the same on native pandas, which displays the results grouped by the first column.   \\n","Also running a sort before the groupby wouldn\'t work the same way, in this case the data is distributed so it\'s unsorted again when doing the groupby. "]},{"cell_type":"code","execution_count":null,"id":"a264ce60","metadata":{},"outputs":[],"source":["# Convert back to Spark DataFrame if you want leverage the data saving features (for instance creating a catalog table)\\n","# https://spark.apache.org/docs/latest/api/python/reference/pyspark.sql/api/pyspark.sql.DataFrameWriter.html\\n","relevant_sdf = relevant_psdf.to_spark()\\n","relevant_sdf.show()\\n","\\n","# Or go a step further and convert to DynamicFrame to use its sinks and features\\n","# https://docs.aws.amazon.com/glue/latest/dg/aws-glue-api-crawler-pyspark-extensions-dynamic-frame-writer.html\\n","relevant_dynf = DynamicFrame.fromDF(relevant_sdf, glueContext, \\"\\")"]}],"metadata":{"kernelspec":{"display_name":"Glue PySpark","language":"python","name":"glue_pyspark"},"language_info":{"codemirror_mode":{"name":"python","version":3},"file_extension":".py","mimetype":"text/x-python","name":"Python_Glue_Session","pygments_lexer":"python3"}},"nbformat":4,"nbformat_minor":5}')},2807:function(e){e.exports=JSON.parse('{"cells":[{"cell_type":"markdown","id":"c887bb54","metadata":{},"source":["### This notebook shows examples of using SQL to explore and handle data\\n","To follow this example notebook, execute the cells in order.  \\n","The keyboard shortcut to execute the current cell and jump to the following is: Shift+Enter.\\n","\\n","To delete cells no longer needed (including this one), you can use the context menu or use the Escape key (to exit any cell you might be in) and then press the d key twice. You can select multiple cells using Shift + Up/Down, to delete many quickly.  \\n","\\n","This example assumes the configured role has permission to read/write on the default catalog database and the s3 glue temporary folder, otherwise update the code or the permissions accordingly."]},{"cell_type":"markdown","id":"72061504","metadata":{},"source":["####  Running the following cell will set up and start your interactive session."]},{"cell_type":"code","execution_count":null,"id":"c0bc868c","metadata":{"scrolled":true},"outputs":[],"source":["%idle_timeout 120\\n","%glue_version 3.0\\n","%worker_type G.1X\\n","%number_of_workers 3\\n","\\n","import boto3\\n","import sys\\n","from awsglue.transforms import *\\n","from awsglue.utils import getResolvedOptions\\n","from pyspark.context import SparkContext\\n","from pyspark.sql.functions import *\\n","from awsglue.context import GlueContext\\n","from awsglue.job import Job\\n","  \\n","sc = SparkContext.getOrCreate()\\n","glueContext = GlueContext(sc)\\n","spark = glueContext.spark_session\\n","job = Job(glueContext)"]},{"cell_type":"code","execution_count":null,"id":"41aa72ee","metadata":{"scrolled":true},"outputs":[],"source":["%%sql\\n","-- This is a SQL cell running against the account Glue catalog in the same region\\n","-- One query per cell\\n","show databases"]},{"cell_type":"code","execution_count":null,"id":"977ec91c","metadata":{"scrolled":true},"outputs":[],"source":["%%sql\\n","-- You can use ANSI SQL syntax to explore the catalog and run queries that print the results\\n","-- You can even run DDL to make changes, such as ALTER TABLE\\n","-- If your database or table has special characters, you can escape the name with a backtick `\\n","-- for instance: SELECT * FROM `mydb`.`mytable` LIMIT 10\\n","show tables in default"]},{"cell_type":"code","execution_count":null,"id":"9a78e418","metadata":{"scrolled":true},"outputs":[],"source":["# This is a Pyspark cell (which is the default)\\n","# In the previous cell, tables with more than 20 characters in the name would be truncated\\n","# or if you have more than 20 tables, some are not displayed\\n","# Here we do the same but using directly the API to have more control:\\n","spark.sql(\\"show tables in default\\").show(n=30, truncate=False)"]},{"cell_type":"code","execution_count":null,"id":"38bd4ad1","metadata":{"scrolled":true},"outputs":[],"source":["# If you data doesn\'t have a table in the catalog, you can use a temporary view to use SQL\\n","# Here we read all the CSV files under the indicated s3 path\\n","medicareDF = spark.read.csv(\\"s3://awsglue-datasets/examples/medicare/\\", header=True)\\n","# If there data has a reasonable size (like in this case), we can cache in memory/disk (depending on cluster size) \\n","# so after the first query, the following no longer have to go to read and parse from s3\\n","medicareDF.cache()\\n","# Instead of using the DataFrame API, you can register it as a view for SQL usage like this:\\n","medicareDF.registerTempTable(\\"medicare\\")"]},{"cell_type":"code","execution_count":null,"id":"f6c168f1","metadata":{"scrolled":true},"outputs":[],"source":["# Explore the data, since it has many long columns, change the display to be vertical for easier read\\n","spark.sql(\\"SELECT * from medicare\\").show(n=10, truncate=False, vertical=True)"]},{"cell_type":"code","execution_count":null,"id":"0aec2be6","metadata":{"scrolled":true},"outputs":[],"source":["# You can also register as a view the result of another query, to avoid repetition\\n","spark.sql(\\"SELECT * FROM medicare WHERE `Provider State` = \'NY\'\\").registerTempTable(\\"ny_medicare\\")"]},{"cell_type":"code","execution_count":null,"id":"d232a5c0","metadata":{"scrolled":true},"outputs":[],"source":["# You can retrieve the results of the query into a Python variable if it\'s small enough\\n","# For example, retrieve the Diagnostric Related Group with the highest average payments in New York\\n","diagnostic_group = spark.sql(\\"\\"\\"\\n","SELECT DISTINCT FIRST_VALUE(`DRG Definition`)  OVER (ORDER BY `Average Medicare Payments` DESC) AS drg\\n","FROM ny_medicare\\n","\\"\\"\\").collect()[0][\'drg\']\\n","print(diagnostic_group)"]},{"cell_type":"code","execution_count":null,"id":"6c75a5a8","metadata":{"scrolled":true},"outputs":[],"source":["# By default this example will save using the glue temporary bucket, you can replace it for another of your choice\\n","output_bucket = f\\"aws-glue-temporary-{boto3.client(\'sts\').get_caller_identity()[\'Account\']}-{boto3.session.Session().region_name}\\"\\n","\\n","provider_summary_df = spark.sql(\\"\\"\\"\\n","SELECT `Provider Id`, `Provider Name`, sum(` Total Discharges `) as `Total Discharges` \\n","FROM medicare GROUP BY `Provider Id`, `Provider Name`\\n","\\"\\"\\")\\n","# Save as a single CSV file with headers under the indicated s3 path\\n","# Be careful, mode overwrite will wipe the ouput directory before writing\\n","# The parenthesis are an alternative to \\\\ to break a Python command into multiple lines\\n","(provider_summary_df.coalesce(1).write\\n","    .mode(\\"overwrite\\")\\n","    .csv(f\\"s3://{output_bucket}/example/medicare_by_provider_summary/\\", header=True)\\n",")"]},{"cell_type":"code","execution_count":null,"id":"dcb264e5","metadata":{"scrolled":true},"outputs":[],"source":["# Or save it as a parquet table on the catalog, we also rename the columns for the table\\n","(provider_summary_df\\n","    .withColumnRenamed(\\"Provider Id\\", \\"provider_id\\")\\n","    .withColumnRenamed(\\"Provider Name\\", \\"provider_name\\")\\n","    .withColumnRenamed(\\"Total Discharges\\", \\"total_discharges\\")\\n","    .write\\n","    .mode(\\"overwrite\\")\\n","    .option(\\"path\\", f\\"s3://{output_bucket}/example/medicare_by_provider_summary_table/\\")\\n","    .format(\\"parquet\\")\\n","    .saveAsTable(\\"default.example_medicare_by_provider_summary\\")\\n",")"]},{"cell_type":"code","execution_count":null,"id":"d416e49c","metadata":{"scrolled":true},"outputs":[],"source":["%%sql\\n","-- Check the new catalog table\\n","DESCRIBE TABLE default.example_medicare_by_provider_summary"]},{"cell_type":"code","execution_count":null,"id":"34a8d286","metadata":{"scrolled":true},"outputs":[],"source":["# Free the cache when no longer needed \\n","medicareDF.unpersist()\\n","\\n","# Remove the table (but not the s3 files)\\n","spark.sql(\\"DROP TABLE default.example_medicare_by_provider_summary\\")"]},{"cell_type":"code","execution_count":null,"id":"aff80288","metadata":{},"outputs":[],"source":[]}],"metadata":{"kernelspec":{"display_name":"Glue PySpark","language":"python","name":"glue_pyspark"},"language_info":{"codemirror_mode":{"name":"python","version":3},"file_extension":".py","mimetype":"text/x-python","name":"Python_Glue_Session","pygments_lexer":"python3"}},"nbformat":4,"nbformat_minor":5}')},2818:function(e,t,n){"use strict";n.d(t,"b",(function(){return Ae})),n.d(t,"c",(function(){return _e})),n.d(t,"a",(function(){return Pe}));var a=n(2),o=n(5),r=n(0),i=n(2585),s=n(136),c=n(2665),l=n(30),u=n(910),d=n(124),b=n(195),p=n(1209),f=n(103),j=n(752),h=n(95),m=(n(2944),n(2702)),g=n(2788),O=n(1),v=function(e){var t,n,a,o,i=e.observation,s=e.jobName,c=e.evaluationContext,l=Object(m.a)().dataQualityText,u=function(e,t,n){var a,o=Object(j.a)({queryKey:["glue","data-quality",t,n,e],queryFn:function(){return h.a.getDataQualityStatisticHistory({JobCoordinates:{JobName:t,JobContext:n},MetricName:e}).promise()},enabled:!!e}),r=o.data,i=o.isLoading,s=o.isFetching,c=o.isError,l=o.isSuccess,u=o.error;return{data:null!==(a=null===r||void 0===r?void 0:r.Datapoints)&&void 0!==a?a:[],loading:i||s,isError:c,isSuccess:l,error:u}}(null===(t=i.MetricBasedObservation)||void 0===t?void 0:t.MetricName,s,c),d=u.data,b=u.loading,v=u.isError,y=u.error,x=null!==(n=null===(a=i.MetricBasedObservation)||void 0===a?void 0:a.MetricName)&&void 0!==n?n:"Value",S=Object(r.useMemo)((function(){return d?d.filter((function(e){return e.Timestamp&&e.Value})).map((function(e){return{x:e.Timestamp,y:parseInt(e.Value)}})):[]}),[d]);return Object(O.jsxs)("div",{className:"glue__bottom-panel-container",children:[Object(O.jsx)(g.a,{}),Object(O.jsx)("div",{className:"glue__bottom-panel-content-container",children:Object(O.jsx)("div",{className:"glue__ml-observations-chart",children:Object(O.jsx)(p.a,{series:d&&0!==d.length?[{title:"".concat(x," over time"),type:"line",data:S}]:[],ariaLabel:"Single data series line chart",height:200,hideFilter:!0,xScaleType:"time",xTitle:"Time (UTC)",yTitle:x,statusType:b?"loading":v?"error":"finished",errorText:null!==(o=null===y||void 0===y?void 0:y.message)&&void 0!==o?o:l.errorChart,i18nStrings:{xTickFormatter:function(e){return e.toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"numeric",hour12:!1}).split(",").join("\n")},yTickFormatter:function(e){return Math.abs(e)>=1e9?(e/1e9).toFixed(1).replace(/\.0$/,"")+"G":Math.abs(e)>=1e6?(e/1e6).toFixed(1).replace(/\.0$/,"")+"M":Math.abs(e)>=1e3?(e/1e3).toFixed(1).replace(/\.0$/,"")+"K":e.toFixed(2)}},empty:Object(O.jsx)(f.default,{textAlign:"center",color:"inherit",children:Object(O.jsx)("strong",{children:l.emptyChart})}),noMatch:Object(O.jsx)(f.default,{textAlign:"center",color:"inherit",children:Object(O.jsx)("strong",{children:l.noMatchChart})})})})})]})},y=n(2671),x=n(8),S=n(99),k=n(889),C=n(29),E=n(46),w=n(2753),I=n(2781),T=n(15),M=n(2766),N=n(377),L=n(2765),R=n(754),D=n(281),A=n(171),_=n(207),P=n(61),U=n(2739),G=n(146);function F(e){var t=e.jobRun,n=e.isJobInsightsEnabled,o=void 0!==n&&n,i=Object(N.b)(),s=Object(M.a)(t,"log"),c=s.group,l=s.prefix,u=i.getQueriesData(["GetLogEvents",c,l]).map((function(e){var t=Object(a.a)(e,2)[1];return(t=void 0===t?{events:[]}:t).events})),d=Object(r.useState)(),b=Object(a.a)(d,2),p=b[0],f=b[1],h=t.JobRunState,m=Object(r.useMemo)((function(){var e=u.flat(1).sort((function(e,t){return(null===e||void 0===e?void 0:e.timestamp)>(null===t||void 0===t?void 0:t.timestamp)?-1:1})).map((function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).message}));return new Set(e)}),[u]),g=Object(r.useMemo)((function(){var e=Array.from(m);if(!e||0===m.size)return"";var t=B(e.join(", "));try{var n=JSON.parse(t);return JSON.stringify(n,null,4)}catch(a){return""}}),[m]),v=Object(j.a)({queryKey:["GetLogEvents",c,l,p,"".concat(l,"-job-insights-rca-driver")],queryFn:function(){return Object(L.a)({logGroupName:c,logStreamName:"".concat(l,"-job-insights-rca-driver"),startTime:new Date(t.StartedOn).getTime(),startFromHead:!0,nextToken:p})},keepPreviousData:!0,notifyOnChangeProps:["data","errorUpdateCount"],staleTime:144e5}),y=v.data,x=(y=void 0===y?{}:y).nextForwardToken,S=v.error,k=v.refetch,C=v.isFetching;return Object(r.useEffect)((function(){if("RUNNING"===h){var e=setInterval((function(){f(x),k()}),1e3);return function(){return clearInterval(e)}}}),[h,x,k]),Object(O.jsx)(R.a,{header:Object(O.jsx)(D.a,{variant:"h3",info:Object(O.jsx)(P.a,{id:"pages.monitoring.runinsights.info",defaultMessage:"More information for 'Run insights' (shows in sidebar).",description:"Info panel link aria label for the header of the job run insights log job detail tab.",children:function(e){return Object(O.jsx)(G.a,{contentKey:"job-run-details-insights-hp",linkAriaLabel:e})}}),children:Object(O.jsx)(P.a,{id:"pages.monitoring.jobruninsights.header",defaultMessage:"Run insights",description:"Header for the job run insights container on the job run details split panel"})}),children:o?Object(O.jsx)(q,{runInsights:g,isLoading:C,status:h||"",errors:S}):Object(O.jsx)(A.default,{type:"warning",children:Object(O.jsx)(P.a,{id:"pages.monitoring.getcloudwatchlogstreams.disabled",defaultMessage:"Job insights is not enabled for this job.",description:"Alert message when job insights is not enabled."})})})}function B(e){var t,n=!1,a="",o=0,r=Object(T.a)(e);try{for(r.s();!(t=r.n()).done;){var i=t.value;!1===n&&"{"===i&&(n=!0),!0===n&&"{"===i&&(o+=1),!0===n&&(a+=i),!0===n&&"}"===i&&0!==o&&(o-=1),!0===n&&"}"===i&&0===o&&(n=!1)}}catch(s){r.e(s)}finally{r.f()}return a}var q=function(e){var t=e.runInsights,n=e.isLoading,a=e.status,o=e.errors;return"RUNNING"===a?Object(O.jsxs)(A.default,{type:"info",children:[Object(O.jsx)(_.a,{}),Object(O.jsx)(P.a,{id:"tail.logs.alert.info.message.not.found",defaultMessage:"Job run is still in progress",description:"Alert message when logs have not been generated."})]}):n?Object(O.jsxs)(A.default,{type:"info",children:[Object(O.jsx)(_.a,{}),Object(O.jsx)(P.a,{id:"tail.logs.alert.info.message.not.found",defaultMessage:"Fetching job insights.",description:"Alert message when logs have not been generated."})]}):n||t&&"ResourceNotFoundException"!==(null===o||void 0===o?void 0:o.code)?Object(O.jsx)(U.a,{className:"glue__code-snippet",value:t,readOnly:!0}):Object(O.jsx)(P.a,{id:"tail.logs.alert.info.message.not.found",defaultMessage:"There are no log streams for this job.",description:"Alert message when logs have not been generated."})},J=n(206),V=n(2822),W=n(2728),z=(n(2945),n(2687)),H="components.RunDetailsComponent.UpdatedRunTableSplitPanel",K={runDetailsLabel:{id:"".concat(H,".tabs.rundetails"),defaultMessage:"Run details",description:"Tab label for the job run details in the run table split panel"},inputArgumentsLabel:{id:"".concat(H,".tabs.inputarguments"),defaultMessage:"Input arguments",description:"Tab label for the job run input arguments in the run table split panel"},continuousLogsLabel:{id:"".concat(H,".tabs.continuouslogs"),defaultMessage:"Continuous logs",description:"Tab label for the job run continuous logs in the run table split panel"},runInsightsLabel:{id:"".concat(H,".tabs.runinsights"),defaultMessage:"Run insights",description:"Tab label for the job run insights in the run table split panel"},metricsLabel:{id:"".concat(H,".tabs.metrics"),defaultMessage:"Metrics",description:"Tab label for the job run metrics in the run table split panel"},sparkUILabel:{id:"".concat(H,".tabs.sparkui"),defaultMessage:"Spark UI",description:"Tab label for the job run spark UI in the run table split panel"}},Q={inputArgumentsHeader:{id:"".concat(H,".headers.inputarguments"),defaultMessage:"Job run input arguments",description:"Container header for the job run input arguments in the run table split panel"},metricsHeader:{id:"".concat(H,".headers.metrics"),defaultMessage:"Metrics",description:"Container header for the job run metrics in the run table split panel"}},Y=function(){return{tabs:Object(C.useMessages)(K),headers:Object(C.useMessages)(Q)}},X=n(2695),Z=n(2799),$=n(2826);function ee(e){var t=e.jobRun,n=(null===t||void 0===t?void 0:t.JobName)||"",a=Object(Z.a)(n).jobConfig,o=Object(r.useMemo)((function(){return t&&a?Object(X.g)(n,t.Id,t,(null===a||void 0===a?void 0:a.command)===J.a.gluestreaming):[]}),[t,a,n]);return Object(O.jsx)($.a,{cloudWatchMetricsWidgets:o})}var te=n(402),ne=n(2733);var ae=function(e){var t=e.jobRun,n=Object(ne.d)(t);return Object(O.jsxs)(R.a,{children:[(null===t||void 0===t?void 0:t.ErrorMessage)&&Object(O.jsx)(f.default,{margin:{vertical:"m"},children:Object(O.jsx)(A.default,{type:"error",statusIconAriaLabel:"Error icon for job run error message",children:null===t||void 0===t?void 0:t.ErrorMessage})}),null!==(null===t||void 0===t?void 0:t.StateDetail)&&"WAITING"===(null===t||void 0===t?void 0:t.JobRunState)&&Object(O.jsx)(f.default,{margin:{vertical:"m"},children:Object(O.jsx)(A.default,{type:"info",statusIconAriaLabel:"Error icon for job run waiting message",children:null===t||void 0===t?void 0:t.StateDetail})}),Object(O.jsx)(te.a,{disableGutters:!0,columns:4,minColumnWidth:50,children:n})]})},oe=n(2743);var re=function(e){var t=e.jobRun,n=Y().headers;return Object(O.jsx)(R.a,{header:Object(O.jsx)(D.a,{variant:"h3",children:n.inputArgumentsHeader}),children:Object(O.jsx)(oe.a,{args:null===t||void 0===t?void 0:t.ExecutionArguments})})};var ie=function(e){var t,n,a=e.jobRun,o=void 0===a?{}:a,i=Y().tabs,u=Object(y.b)().isJobInsightsAndPanelLayoutEnabled,d=o.ExecutionArguments,b=void 0===d?{}:d,p=Object(c.b)((function(e){return{runTablePanelActiveTabId:e.runTablePanelActiveTabId,setRunTablePanelActiveTabId:e.setRunTablePanelActiveTabId,selectedJobRun:e.selectedJobRun}}),s.shallow),f=p.runTablePanelActiveTabId,j=p.setRunTablePanelActiveTabId,h=p.selectedJobRun,m="job-bookmark-enable"===(null===h||void 0===h||null===(t=h.ExecutionArguments)||void 0===t?void 0:t["--job-bookmark-option"]),v="true"===(null===h||void 0===h||null===(n=h.ExecutionArguments)||void 0===n?void 0:n["--enable-job-insights"]),T=Object(r.useCallback)((function(){return Object(C.captureCustomAnalytics)(C.PanoramaEventType.CLICK,"UpdatedRunTableSplitPanel","RewindJobBookmark")}),[]),M=Object(r.useCallback)((function(){return Object(C.captureCustomAnalytics)(C.PanoramaEventType.CLICK,"UpdatedRunTableSplitPanel","JobStopped")}),[]),N=Object(E.a)().values.jobConfig.command;return Object(O.jsxs)("div",{className:"glue__bottom-panel-container",children:[Object(O.jsx)(g.a,{}),h&&Object(O.jsxs)("div",{className:"glue__bottom-panel-content-container",children:[Object(O.jsx)("div",{className:"glue__job-runs-table-split-panel-cta-buttons",children:Object(O.jsxs)(S.default,{size:"s",direction:"horizontal",children:[Object(z.a)(null===h||void 0===h?void 0:h.JobRunState)&&Object(O.jsx)("div",{className:"glue__job-runs-stop-job-button",children:Object(O.jsx)(z.b,{jobName:null===h||void 0===h?void 0:h.JobName,jobRunId:null===h||void 0===h?void 0:h.Id,jobRunState:null===h||void 0===h?void 0:h.JobRunState,onActionComplete:M})}),m&&Object(O.jsx)("div",{className:"glue__job-runs-bookmark-button",children:Object(O.jsx)(W.a,{onActionComplete:T,jobName:null===h||void 0===h?void 0:h.JobName,jobRunId:null===h||void 0===h?void 0:h.Id})})]})}),Object(O.jsx)(k.a,{activeTabId:f,onChange:function(e){var t=e.detail.activeTabId;Object(C.captureCustomAnalytics)(C.PanoramaEventType.CLICK,"UpdatedRunTableSplitPanel","Tabs",t),j(t)},tabs:[{label:i.runDetailsLabel,id:"run-details-tab",content:Object(w.b)(Object(O.jsx)(ae,{jobRun:h}))},{label:"".concat(i.inputArgumentsLabel," ").concat(Object.keys(b).length?" (".concat(Object.keys(b).length,")"):""),id:"input-arguments-tab",content:Object(w.b)(Object(O.jsx)(re,{jobRun:h}))},{label:i.continuousLogsLabel,id:"cloudwatch-logs-tab",content:Object(w.b)(Object(O.jsx)(I.a,{jobRun:o,disabled:N===J.a.pythonshell}))}].concat(Object(x.a)(u?[{label:i.runInsightsLabel,id:"run-insights-tab",content:Object(O.jsx)(F,{jobRun:h,isJobInsightsEnabled:v})}]:[]),[{label:i.metricsLabel,id:"metrics-tab",content:Object(w.b)(Object(O.jsx)(ee,{jobRun:h}))}],Object(x.a)(l.a.isEnabled("feature-spark-ui")&&"glueray"!==N?[{id:"spark-ui-tab",label:i.sparkUILabel,content:Object(w.b)(Object(O.jsx)(V.a,{jobRun:h}))}]:[]))})]})]})},se=n(3),ce=n(42),le=n(2946),ue=n.n(le);function de(e){var t,n=e.className,a=void 0===n?"":n,r=e.viewBox,i=void 0===r?"0 0 24 24":r,s=e.type,c=Object(b.b)((t={},Object(o.a)(t,a,!!a),Object(o.a)(t,ue.a.Icon,!0),t)),l={get type(){switch(s){case"drag-handle-horizontal":return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("rect",{x:"0.25",y:"0.25",width:"13.5",height:"0.5",fill:"currentColor",stroke:"#95A5A6",strokeWidth:"0.5"}),Object(O.jsx)("rect",{x:"0.25",y:"3.25",width:"13.5",height:"0.5",fill:"currentColor",stroke:"#95A5A6",strokeWidth:"0.5"})]});case"drag-handle-vertical":return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("rect",{x:"0.25",y:"0.25",width:"0.5",height:"13.5",fill:"currentColor",stroke:"#95A5A6",strokeWidth:"0.5"}),Object(O.jsx)("rect",{x:"3.25",y:"0.25",width:"0.5",height:"13.5",fill:"currentColor",stroke:"#95A5A6",strokeWidth:"0.5"})]});default:return Object(O.jsx)(O.Fragment,{})}}};return Object(O.jsx)("svg",{className:c,viewBox:i,children:l.type})}var be=n(2947),pe=n.n(be),fe=["className","collapsed"];function je(e){var t,n=e.className,a=void 0===n?"":n,r=e.collapsed,s=void 0!==r&&r,c=Object(ce.a)(e,fe),l=Object(b.b)((t={},Object(o.a)(t,pe.a.ResizeHandleOuter,!0),Object(o.a)(t,"className",!!a),t));return Object(O.jsx)(i.c,Object(se.a)(Object(se.a)({className:l},c),{},{children:Object(O.jsxs)("div",{className:pe.a.ResizeHandleInner,"data-collapsed":s||void 0,children:[Object(O.jsx)(de,{className:pe.a.HorizontalIcon,viewBox:"0 0 5 14",type:"drag-handle-vertical"}),Object(O.jsx)(de,{className:pe.a.VerticalIcon,viewBox:"0 0 14 4",type:"drag-handle-horizontal"})]})}))}var he=n(2868),me=n.n(he),ge=n(2667),Oe=n(2886),ve=function(e){var t=e.selectedNodeId,n=Object(E.a)().values.dag,a=t?Object(ge.f)(n[t]).form:void 0;return a&&t?Object(O.jsx)(Oe.a,{form:a}):null},ye=(n(2951),n(2870)),xe=n(2882),Se=n(2884),ke=n(295),Ce=n(41),Ee=n(922),we=n(76),Ie=n(97),Te=n(2760),Me=n(396),Ne=function(){var e=Object(r.useState)(!1),t=Object(a.a)(e,2),n=t[0],o=t[1],i=Object(Ce.i)(),s=Object(r.useMemo)((function(){var e=i.pathname.split("/").at(-1);return["graph","editor"].includes(e||"")}),[i.pathname]),c=Object(r.useState)(void 0),l=Object(a.a)(c,2),u=l[0],d=l[1];return Object(r.useEffect)((function(){return function(){null!=u&&Ee.b.dismiss(u)}}),[u,i]),n||!s?null:Object(O.jsx)(Le,{setIsDataFetched:o,setActiveToastId:d})};function Le(e){var t=e.setIsDataFetched,n=e.setActiveToastId,o=Object(Te.a)(),i=o.connections,s=o.isLoading,c=o.hasNextPage,l=Object(Ce.j)().jobName,u=l?Object(Me.b)(l):"",d=Object(Ie.b)({JobName:u,IncludeTags:!1}),b=Object(a.a)(d,1)[0],p=Object(Ie.d)(we.f,"getJob",{},b),f=Object(a.a)(p,2),j=f[0],h=f[1].status,m=Object(ke.useFormikContext)().values.dag;return Object(r.useEffect)((function(){if(!["init","loading"].includes(h)&&!s&&!c){t(!0);var e=Re(i,j.Job,m);null!=e&&n(e)}}),[i,c,t,s,h,j,n,m]),Object(O.jsx)(O.Fragment,{})}var Re=function(e,t,n){var a=De(e,t);if(null!==a&&void 0!==a&&a.length&&n){var o=1===a.length?"The following connection lives on your job but no longer exists: ".concat(a[0]):"Connections [".concat(a.join(", "),"] exist(s) on your job, but no longer exist");return Object(Ee.b)("Stale connections on job",{description:"".concat(o,"."),duration:1/0})}},De=function(e,t){var n,a=(null===t||void 0===t||null===(n=t.Connections)||void 0===n?void 0:n.Connections)||[],r=e.reduce((function(e,t){return Object(se.a)(Object(se.a)({},e),{},Object(o.a)({},t.Name,!0))}),{});return null===a||void 0===a?void 0:a.filter((function(e){return!r[e]}))},Ae="glue-panel-layout-vertical",_e=34,Pe=function(e){var t=e.lastSaved,n=e.onJobRun,s=e.forceJobRunsRefresh,l=Object(r.useRef)(null),u=Object(r.useRef)(null),d=Object(r.useRef)(null),p=Object(y.b)().isResourcePanelAndPanelLayoutEnabled,f=Object(r.useCallback)((function(){var e;return null===(e=l.current)||void 0===e?void 0:e.focus()}),[l]),j=Object(c.b)((function(e){return e.setFocusOnPanel})),h=Object(c.b)((function(e){return e.setSetLayout})),m=Object(c.b)((function(e){return e.setOptimalBottomPanelSize})),g=Object(c.b)((function(e){return e.setSetHorizontalLayout})),v=Object(r.useCallback)((function(e){var t=u.current;t&&t.setLayout(e)}),[]),x=Object(r.useCallback)((function(e){var t=d.current;t&&t.setLayout(e)}),[]),S=Object(b.b)(Object(o.a)({"glue__graph-editor":!0,"glue__graph-editor--panel-layout":!0},me.a.PanelGroupWrapper,!0)),k=Object(r.useMemo)((function(){return{getItem:function(e){return localStorage.getItem(e)},setItem:function(e,t){var n=JSON.parse(t)["10,32"]||[],o=Object(a.a)(n,2)[1];"number"===typeof o&&0!==o&&m(o),localStorage.setItem(e,t)}}}),[m]);return Object(r.useEffect)((function(){h(v),g(x)}),[h,v,x,g]),Object(r.useEffect)((function(){p&&j(f)}),[f,p,j]),p?Object(O.jsx)("div",{className:S,children:Object(O.jsxs)(i.b,{className:me.a.PanelGroup,direction:"vertical",children:[Object(O.jsx)(i.a,{className:me.a.Notification,children:Object(O.jsx)(Fe,{})}),Object(O.jsxs)(i.a,{className:me.a.Single,children:[Object(O.jsx)(xe.a,{lastSaved:t,onJobRun:n}),Object(O.jsx)(ye.a,{}),Object(O.jsx)(Ne,{})]}),Object(O.jsx)(i.a,{className:me.a.PanelRow,children:Object(O.jsxs)(i.b,{className:me.a.PanelGroup,direction:"horizontal",ref:d,children:[Object(O.jsx)(i.a,{className:me.a.PanelRow,minSize:32,children:Object(O.jsxs)(i.b,{autoSaveId:Ae,storage:k,className:me.a.PanelGroup,direction:"vertical",ref:u,children:[Object(O.jsx)(i.a,{className:me.a.PanelRow,minSize:32,collapsible:!0,children:Object(O.jsx)(Se.a,{forceJobRunsRefresh:s,showNodeDetails:!1})}),Object(O.jsx)(Ge,{})]})}),Object(O.jsx)(Ue,{panelRef:l})]})})]})}):null},Ue=function(e){var t=e.panelRef,n=Object(r.useRef)(null),a=Object(c.b)((function(e){return{setExpandPanel:e.setExpandPanel,setCollapsePanel:e.setCollapsePanel,selectedNodeId:e.selectedNodeId,activeTabId:e.activeTabId,isDetailPanelExpanded:e.isDetailPanelExpanded}}),s.shallow),o=a.setExpandPanel,l=a.setCollapsePanel,u=a.selectedNodeId,d=a.activeTabId,b=a.isDetailPanelExpanded,p=u?_e:0,f=Object(r.useCallback)((function(){var e=n.current;e&&setTimeout(e.collapse)}),[]),j=Object(r.useCallback)((function(){var e=n.current;e&&setTimeout(e.expand)}),[]);return Object(r.useEffect)((function(){o(j),l(f)}),[f,j,l,o]),"graph"!==d?null:Object(O.jsxs)(O.Fragment,{children:[!b&&Object(O.jsx)(je,{className:me.a.ResizeHandle}),Object(O.jsx)(i.a,{ref:n,className:me.a.PanelRow,defaultSize:p,maxSize:50,minSize:p,children:Object(O.jsx)("div",{className:"glue__node-panel",ref:t,tabIndex:-1,children:Object(O.jsx)(ve,{selectedNodeId:u},u)})})]})},Ge=function(){var e=Object(r.useRef)(null),t=Object(y.b)(),n=t.isJobMonitoringUpdatesAndPanelLayoutEnabled,a=t.isResourcePanelAndPanelLayoutEnabled,o=Object(c.b)((function(e){return{activeTabId:e.activeTabId,bottomPanelContent:e.bottomPanelContent,setExpandBottomPanel:e.setExpandBottomPanel,setCollapseBottomPanel:e.setCollapseBottomPanel,optimalBottomPanelSize:e.optimalBottomPanelSize,setBottomPanelContent:e.setBottomPanelContent,selectedJobRun:e.selectedJobRun,dqActiveTab:e.dqActiveTab,selectedDQResult:e.selectedDQResult,selectedObservation:e.selectedObservation}}),s.shallow),u=o.activeTabId,d=o.bottomPanelContent,b=o.setExpandBottomPanel,p=o.setCollapseBottomPanel,f=o.optimalBottomPanelSize,j=o.setBottomPanelContent,h=o.selectedJobRun,m=o.dqActiveTab,g=o.selectedDQResult,x=o.selectedObservation,S=Object(r.useCallback)((function(){var t=e.current;t&&setTimeout(t.collapse)}),[]),k=Object(r.useCallback)((function(){var t=e.current;t&&setTimeout(t.expand)}),[]);return Object(r.useEffect)((function(){b(k),p(S)}),[S,k,b,p]),Object(r.useEffect)((function(){"runs"!==u?"dataquality"===u&&"observations"===m&&g&&x&&l.a.isEnabled("feature-dq-observations")?j(Object(O.jsx)(v,{observation:x[0],evaluationContext:g.EvaluationContext,jobName:g.JobName})):j(Object(O.jsx)(w.a,{})):j(Object(O.jsx)(ie,{jobRun:h}))}),[u,m,g,h,x,j]),function(e,t,n,a,o,r,i){var s={graph:!0,runs:e&&!!i,dataquality:t&&"observations"===n&&!!r};return o&&Object.keys(s).includes(o)&&s[o]?a:null}(n,a,m,Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(je,{className:me.a.ResizeHandle}),Object(O.jsx)(i.a,{ref:e,className:me.a.PanelRow,maxSize:70,defaultSize:f,collapsible:!0,children:Object(O.jsx)("div",{className:me.a.Centered,children:d})})]}),u,x,h)},Fe=function(){return 0===Object(d.a)().notifications.length?null:Object(O.jsx)(u.a,{})}},2819:function(e,t,n){"use strict";n.d(t,"a",(function(){return Te})),n.d(t,"d",(function(){return De})),n.d(t,"b",(function(){return Ge}));var a=n(42),o=n(3),r=n(2),i=n(196),s=n(171),c=n(103),l=n(754),u=n(354),d=n(879),b=n(50),p=n(281),f=n(551),j=n(99),h=n(557),m=n(46),g=n(0),O=n(61),v=n(100),y=n(30),x=n(2848),S=n(2682),k=n(2700),C=n(1);function E(){var e=Object(S.b)().sessionStatus,t=Object(g.useMemo)((function(){return!y.a.isEnabled("feature-datapreview-v2")}),[]);return"IDLE"!==e&&t?Object(C.jsx)(k.g,{}):null}var w=n(57),I=n(1130),T=n(48);function M(){var e=Object(T.a)("jobConfig.jobMode"),t=Object(r.a)(e,1)[0].value;return Object(C.jsxs)(C.Fragment,{children:["NOTEBOOK_MODE"!==t&&Object(C.jsx)(C.Fragment,{}),"NOTEBOOK_MODE"===t&&Object(C.jsx)(c.default,{children:Object(C.jsx)(s.default,{type:"warning",children:Object(C.jsx)(O.a,{id:"notebook.field.alert",defaultMessage:"JobConfig fields are controlled by notebook configuration magics. If you want to change any of these fields use the  appropiate <code>%magic</code> in your notebook.",description:"Alert to indicate this field is disabled in notebook mode.",values:{code:function(e){return Object(C.jsx)("code",{children:e})}}})})})]})}var N=n(2801),L=n(403),R=n(146),D=n(118),A=n(2720),_=n(2689),P=n(251),U=n(8),G=n(2770),F=n(2667),B=n(560),q=n(206),J=n(2802);var V=y.a.isEnabled("feature-job-details-streaming-glue-2"),W=y.a.isEnabled("feature-enable-autotune"),z=y.a.isEnabled("feature-manta")||y.a.isEnabled("feature-glue-4"),H=!y.a.isEnabled("feature-deprecate-glue-2"),K=function(){var e=Object(m.a)().values,t=e.jobConfig,n=e.hasBeenSaved,a=e.dag,r=void 0===a?{}:a,i=Object(J.b)(r).requireGlue4,s=Object(G.a)(r),c=Object.values(r).some((function(e){return"DataSource"===e.classification&&Object(F.j)(e.type)})),l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.values(e).some((function(e){return"Transform"===e.classification&&("EvaluateDataQuality"===(t=e.type)||"EvaluateDataQualityMultiFrame"===t);var t}))}(r),u=(null!==t&&void 0!==t&&t.createdOn?new Date(null===t||void 0===t?void 0:t.createdOn):new Date).getTime(),d=n&&u<=16766784e5,b=[].concat(Object(U.a)("0.9"===t.version||d?[{label:"Glue 0.9 - Supports spark 2.2, Scala 2",id:"0.9"}]:[]),Object(U.a)("1.0"===t.version||d?[{label:"Glue 1.0 - Supports spark 2.4, Scala 2, Python 3",id:"1.0"}]:[]),Object(U.a)(H?[{label:"Glue 2.0 - Supports spark 2.4, Scala 2, Python 3",id:"2.0"}]:[]));return(s||c||"DEVELOPER_MODE"===t.jobMode&&t.command===q.a.gluestreaming)&&(b=b.filter((function(e){return"0.9"!==e.id}))),l&&(b=b.map((function(e){return Object(o.a)(Object(o.a)({},e),{},{disabled:"2.0"===e.id})}))),y.a.isEnabled("feature-spark-3")&&b.push({label:"Glue 3.0 - Supports spark 3.1, Scala 2, Python 3",id:"3.0"}),z&&b.push({label:"Glue 4.0 - Supports ".concat(t.command===q.a.glueray?"ray":"spark 3.3, Scala 2",", Python 3"),id:"4.0"}),"DEVELOPER_MODE"!==t.jobMode&&i&&(b=b.map((function(e){return Object(o.a)(Object(o.a)({},e),{},{disabled:Number(e.id)<4})}))),b},Q=n(233),Y=function(e){var t=e.message,n=e.iconName;return Object(C.jsxs)(C.Fragment,{children:[n&&Object(C.jsx)("span",{className:"awsui-util-mr-xs",children:Object(C.jsx)(Q.a,{name:n,size:"small"})}),t]})},X="job-bookmark-disable",Z=(n(2953),["name","info","headerInfo","innerProps","sectionTitle","internalValidations","disableCondition"]);function $(e){var t=e.name,n=e.info,r=e.headerInfo,i=e.innerProps,s=e.sectionTitle,l=e.internalValidations,u=e.disableCondition,d=Object(a.a)(e,Z),f="jobConfig.".concat(t),j=Object(m.a)(),h=j.values,O=h.hasBeenSaved,v=h.jobConfig,x=j.getFieldMeta,S=v.jobMode,k=x(f),E=k.error,w=k.touched,I="DEVELOPER_MODE"===S&&!y.a.isEnabled("feature-developer-mode"),T="NOTEBOOK_MODE"===S,M=d.labelledOptional?Object(D.a)(d.label):d.label,N=T||I||!!u&&u(v);return Object(C.jsxs)(c.default,{children:[s&&Object(C.jsx)(p.a,{variant:"h3",info:r,className:"glue__job-details-title",children:s}),i?Object(C.jsx)(b.default,{i18nStrings:{errorIconAriaLabel:"Error icon for invalid ".concat(t)},info:n,label:M,stretch:d.stretch||!1,errorText:w&&!l?E:void 0,constraintText:d.constraintText,"data-testid":"job-details-form-field-".concat(t),controlId:f,children:Object(C.jsx)(d.children,{name:f,disabled:N,description:Object(C.jsx)(c.default,{color:"text-status-inactive",fontSize:"body-m",children:d.description}),editable:!0})},"awsui-form-field-".concat(t)):Object(g.createElement)(b.default,Object(o.a)(Object(o.a)({},d),{},{i18nStrings:{errorIconAriaLabel:"Error icon for invalid ".concat(t)},info:n,label:M,stretch:d.stretch||!1,errorText:w&&!l?E:void 0,constraintText:d.constraintText,key:"awsui-form-field-".concat(t),"data-testid":"job-details-form-field-".concat(t)}),Object(C.jsx)(d.children,{name:f,disabled:N,editable:!O||"name"!==t}))]})}var ee=n(235),te=n(29),ne=n(896),ae=n(756),oe=n(401),re=n(550),ie=n(397),se=n(49),ce=Object(se.defineMessages)({buttonLabel:{id:"job.details.network.connections.refresh.button.label",defaultMessage:"Refresh network connections",description:"Label for networkconnections refresh button label."}}),le=Object(se.defineMessages)({loading:{id:"network.connection.select.refresh.loading",defaultMessage:"Loading network connections",description:"Loading message to announce in live region for network connection selector refresh button."},error:{id:"network.connection.select.refresh.error",defaultMessage:"Failed to fetch network connections",description:"Error message to announce in live region for network connection selector refresh button."},success:{id:"network.connection.select.refresh.success",defaultMessage:"Finished loading network connections",description:"Success message to announce in live region for network connection selector refresh button."}}),ue=function(e){var t=e.status,n=e.refresh,a=e.isDagless,o=e.networkConnectionOptions,r=e.handleChange,i=e.error,s=e.touched,c=e.disabled,l=e.selectedOption,u=e.selectedOptions,d=e.handleMultipleOptionsChange,b=e.networkConnectionOptionsMultiSelect,p="loading"===t,f=Object(te.useMessages)(le),j=Object(te.useMessages)(ce);return Object(C.jsx)(ie.a,{refresh:n,disabled:p,loading:p,buttonLabel:j.buttonLabel,fetched:!0,i18nStrings:f,status:t,children:a?Object(C.jsx)(oe.a,{disabled:p||c,selectedOptions:u,onChange:d,deselectAriaLabel:function(e){var t=e.label;return"Remove ".concat(t)},i18nStrings:{tokenLimitShowMore:"Show more chosen options",tokenLimitShowFewer:"Show fewer chosen options"},options:b,placeholder:"Choose options",selectedAriaLabel:"Selected",tokenLimit:3,filteringType:"auto",virtualScroll:!0,filteringAriaLabel:"Filter options",filteringClearAriaLabel:"Clear option filter",filteringPlaceholder:"Filter options"}):Object(C.jsx)(re.a,{filteringType:"auto",triggerVariant:"label",selectedOption:l,options:o,onChange:r,invalid:!!i&&s,disabled:c,filteringAriaLabel:"Filter options",filteringClearAriaLabel:"Clear option filter",filteringPlaceholder:"Filter options"})})},de=n(2586),be=n(254),pe=function(e){var t=e.loading,n=e.connectionData,a=e.selectedId,r=e.currentConnections,i=Object(be.a)().data,s=Object(g.useMemo)((function(){return n.map((function(e){var t,n=i&&i[null===e||void 0===e||null===(t=e.Connection)||void 0===t?void 0:t.ConnectionType];return n?Object(o.a)(Object(o.a)({},e),{},{Connection:Object(o.a)(Object(o.a)({},e.Connection),{},{ConnectionType:n.basic.label})}):e}))}),[i,n]).filter((function(e){var t,n;return(null===e||void 0===e||null===(t=e.Connection)||void 0===t?void 0:t.Name)===a||r.includes(null===e||void 0===e||null===(n=e.Connection)||void 0===n?void 0:n.Name)})).map((function(e){var t,n=e.Connection,a=e.vpcInfo.Subnets,o=void 0===a?[]:a,r=n||{},i=r.Name,s=void 0===i?"":i,c=r.ConnectionType,l=void 0===c?"-":c,u=r.PhysicalConnectionRequirements,d=(u=void 0===u?{}:u).SubnetId,b=void 0===d?"":d,p=u.SecurityGroupIdList,f=void 0===p?[]:p;return{name:s,type:l,vpc:(null===(t=o[0])||void 0===t?void 0:t.VpcId)||"None",subnet:b||"-",securityGroups:f.length?f.join(", "):"-"}}));return Object(C.jsx)(de.a,{loadingText:"Loading connections",loading:t,columnDefinitions:[{header:"Name",cell:function(e){return e.name}},{header:"Type",cell:function(e){return e.type}},{header:"VPC",cell:function(e){return e.vpc}},{header:"Subnet",cell:function(e){return e.subnet}},{header:"Security Groups",cell:function(e){return e.securityGroups}}],items:s,header:Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)("h2",{children:Object(C.jsx)(O.a,{id:"job.details.networkHeader",defaultMessage:"Current connections",description:"Label for the current connections table header"})}),Object(C.jsx)("p",{className:"awsui-form-field-description awsui-util-pb-n",children:Object(C.jsx)(O.a,{id:"job.details.networkHeaderDesc",defaultMessage:"These are the connections currently associated with the job.",description:"Label for the current connections table header"})})]}),empty:Object(C.jsxs)("div",{className:"awsui-util-t-c",children:[Object(C.jsx)("div",{className:"awsui-util-pt-xs awsui-util-mb-xs",children:Object(C.jsx)("strong",{children:"No connections"})}),Object(C.jsx)("p",{className:"awsui-util-mb-s",children:"No connections attached."})]})})},fe=n(5),je=n(909);function he(e){var t=e.connectionData,n=e.name,a=e.loading,i=Object(te.useFixedField)(n),s=Object(r.a)(i,3),c=s[0].value,l=s[2].setValue,u=Object(g.useMemo)((function(){var e=t.reduce((function(e,t){var n=t.Connection,a=(n=void 0===n?{}:n).Name;return a?Object(o.a)(Object(o.a)({},e),{},Object(fe.a)({},a,!0)):e}),{});return c.filter((function(t){return!e[t]}))}),[t,c]),d=Object(g.useCallback)((function(e){var t=e.detail.itemIndex,n=c.filter((function(e){return e!==u[t]}));l(n)}),[c,l,u]),b=Object(g.useMemo)((function(){return u.map((function(e){return{label:e,dismissLabel:"Remove item"}}))}),[u]);return a||!u.length?null:Object(C.jsxs)(j.default,{size:"m",direction:"vertical",children:[Object(C.jsx)(O.a,{id:"network.connections.stale.connections.token.group",defaultMessage:Object(te.processAwsString)("The following connections are defined in your job but no longer exist within AWS Glue. The job will fail unless you replace these references in your Glue job."),description:"Message describing which connection will be required to be removed in order to prevent job failures"}),Object(C.jsx)(je.a,{onDismiss:d,items:b})]})}var me=n(2896),ge=Object(i.getAWSStringReplacerForConsole)().processString,Oe=n(2737),ve=n(195),ye=function(e){var t=e.requirementType,n=Object(m.a)().values.dag,a=void 0===n?{}:n,o=(0,Object(J.b)(a).getUniqueReasonsForRequirements)([t]);return o.length?Object(C.jsx)(Y,{message:J.a[t].label+" is required due to the presence of "+Object(ve.g)(o)+".",iconName:"status-info"}):null},xe=n(137),Se=n(2681),ke=["label"],Ce=["label"],Ee=["label"],we=["label"],Ie=Object(i.getAWSStringReplacerForConsole)().processString,Te=[{label:Object(C.jsxs)(C.Fragment,{children:["Standard - ",Object(C.jsx)("i",{children:"default"})]}),value:"standard",description:"Write logs using the Glue job run id as the filename. Enable Spark UI monitoring in Glue console."},{label:"Legacy",description:"Write logs using 'spark-application-{timestamp}' as the filename. Do not enable Spark UI monitoring in Glue console.",value:"legacy"},{label:"Standard and legacy",description:"Write logs to both the standard and legacy locations. Enable Spark UI monitoring in Glue console.",value:"both"}],Me=function(e){var t=Object(m.a)().values.jobConfig,n=t.command,a=t.jobMode,r=[{label:q.b.glueetl,id:q.a.glueetl},{label:q.b.gluestreaming,id:q.a.gluestreaming}];return y.a.isEnabled("feature-manta")&&n===q.a.glueray&&(r=[{label:q.b.glueray,id:q.a.glueray}]),["DEVELOPER_MODE","NOTEBOOK_MODE"].includes(a)&&n!==q.a.pythonshell?Object(C.jsx)(w.m,Object(o.a)(Object(o.a)({resourceNameLabel:"ETL job type"},e),{},{options:r,getOptionValue:function(e){return e.id}})):Object(C.jsx)(I.a,Object(o.a)(Object(o.a)({},e),{},{valueMapper:Fe}))},Ne=function(e){var t=e.label,n=Object(a.a)(e,Ee);return Object(C.jsx)(w.b,Object(o.a)(Object(o.a)({},n),{},{label:t,controlId:n.name}))},Le=function(e){var t=Object(m.a)().getFieldMeta,n=e.name,a=e.label,r=e.description,i=t(n),s=i.touched,l=i.error;return Object(C.jsx)(c.default,{padding:{left:"l"},children:Object(C.jsx)(b.default,{label:a,description:r,stretch:!0,errorText:s?l:null,children:Object(C.jsx)(P.a,Object(o.a)(Object(o.a)({required:!1},e),{},{unsetOnEmpty:!0}))})})},Re=function(e){return Pe("autoscale",e.version,[void 0,"0.9","1.0","2.0"],!0)},De=[{name:"name",label:Object(C.jsx)(O.a,{id:"job.details.name",defaultMessage:"Name",description:"Label for the job name."}),stretch:!0,children:w.p,validations:Oe.a.test("name",(function(){return Object(C.jsx)(O.a,{id:"job.details.name.error",defaultMessage:"Your job requires a unique name and cannot be named 'Untitled job'.",description:"Validation error message when the job name is the same as the default."})}),(function(){return"Untitled job"!==this.parent.name}))},{name:"description",label:Object(C.jsx)(O.a,{id:"job.details.description",defaultMessage:"Description",description:"Label for the job description."}),labelledOptional:!0,constraintText:Object(C.jsx)(Y,{message:"Descriptions can be up to 2048 characters long."}),stretch:!0,children:w.o,validations:v.i().max(2048,(function(e){var t=e.max;return Object(C.jsx)(O.a,{id:"jobs.details.description.max",defaultMessage:"Description must be at most {max} characters.",description:"Validation error message when the description for a job is too long.",values:{max:t}})}))},{name:"role",label:"IAM Role",description:"Role assumed by the job with permission to access your data stores. Ensure that this role has permission to your Amazon S3 sources, targets, temporary directory, scripts, and any libraries used by the job.",stretch:!0,children:A.a,validations:v.i().required((function(){return Object(C.jsx)(O.a,{id:"jobs.details.role.required",defaultMessage:"IAM Role is required.",description:"Validation error message when the IAM role for a job is missing."})}))},{name:"command",label:"Type",description:"The type of ETL job. This is set automatically based on the types of data sources you have selected.",stretch:!0,children:function(e){return Object(C.jsx)(Me,Object(o.a)({},e))}},{name:"version",info:Object(C.jsx)(O.a,{id:"job.details.version.linkAriaLabel",defaultMessage:"More information for 'Glue version' (shows in sidebar).",description:"Info panel link aria label for the label of the glue version dropdown.",children:function(e){return Object(C.jsx)(R.a,{contentKey:"edit-job-details-gluever-hp",linkAriaLabel:e})}}),label:Object(C.jsx)(O.a,{id:"job.details.version",defaultMessage:"Glue version",description:"Label for the glue version dropdown."}),description:y.a.isEnabled("feature-job-details-streaming-glue-2")?void 0:"Glue version 2.0 does not support streaming ETL jobs.",stretch:!0,constraintText:Object(C.jsx)(ye,{requirementType:"GLUE4"}),children:function(e){var t=Object(T.a)(e.name),n=Object(r.a)(t,1)[0].value,a=Object(m.a)(),i=a.values.dag,s=a.setFieldValue,c=K(),l=Object(G.a)(i);return!V&&"1.0"===n&&l?Object(C.jsx)("span",{children:"Glue 1.0 - Supports spark 2.4, Scala 2, Python 3"}):Object(C.jsx)(B.a,Object(o.a)(Object(o.a)({resourceNameLabel:"job version"},e),{},{getOptionValue:function(e){return e.id},options:c,onChange:function(e){!function(e,t){W&&("2.0"===e.id||"3.0"===e.id?t("jobConfig.etlAutoTuning",!0):t("jobConfig.etlAutoTuning",!1))}(e.detail.selectedOption,s)}}))},condition:function(e){return e.jobConfig.command!==q.a.pythonshell},disableCondition:function(e){return e.command===q.a.glueray},validations:v.i().required((function(){return Object(C.jsx)(O.a,{id:"jobs.details.version.required",defaultMessage:"Glue version is required.",description:"Validation error message when the Glue version for a job is missing."})}))},{name:"runtime",label:Object(C.jsx)(O.a,{id:"job.details.runtime",defaultMessage:"Runtime version",description:"Label for the glue runtime version dropdown."}),stretch:!0,disableCondition:function(){return!0},children:w.j,condition:function(e){return e.jobConfig.command===q.a.glueray&&y.a.isEnabled("feature-manta-runtime-field")},validations:v.i().required((function(){return Object(C.jsx)(O.a,{id:"jobs.details.runtime.required",defaultMessage:"Glue runtime is required.",description:"Validation error message when the Glue version for a job is missing."})}))},{name:"language",label:function(){var e=Object(T.a)("jobConfig");return Object(r.a)(e,1)[0].value.command===q.a.pythonshell?"Python version":"Language"},stretch:!0,children:w.e,disableCondition:function(e){return e.command===q.a.glueray},validations:v.i().required((function(){return Object(C.jsx)(O.a,{id:"jobs.details.language.required",defaultMessage:"Language is required.",description:"Validation error message when the script language for a job is missing."})})),constraintText:Object(C.jsx)(ye,{requirementType:"PYTHON"})},{name:"workerType",label:"Worker type",description:"Set the type of predefined worker that is allowed when a job runs.",stretch:!0,children:N.a,disableCondition:function(e){return e.command===q.a.glueray},condition:function(e){return e.jobConfig.command!==q.a.pythonshell}},{name:"etlAutoScaling",label:"Automatically scale the number of workers",description:Object(C.jsx)("div",{children:"AWS Glue will optimize costs and resource usage by dynamically scaling the number of workers up and down throughout the job run. Requires Glue 3.0 or later."}),stretch:!0,innerProps:!0,children:function(e){var t=e.label,n=Object(a.a)(e,ke),i=Object(m.a)().values.jobConfig,s=Object(T.a)(n.name),c=Object(r.a)(s,3)[2].setValue,l=n.disabled||!Re(i)||"python-3.9"===i.language;return Object(g.useEffect)((function(){l&&"NOTEBOOK_MODE"!==i.jobMode&&c(!1)}),[l,i.jobMode,c]),Object(C.jsx)(w.b,Object(o.a)(Object(o.a)({},n),{},{disabled:l,label:t,controlId:n.name}))},condition:function(e){return e.jobConfig.command!==q.a.glueray}},{name:"numberOfWorkers",label:function(){var e=Object(T.a)("jobConfig"),t=Object(r.a)(e,1)[0].value,n=t.command,a=t.etlAutoScaling&&Re(t);return"glueray"===n||a?Object(C.jsx)(O.a,{id:"jobs.details.numberOfWorkers.label.max",defaultMessage:"Maximum number of workers",description:"Label for max workers"}):Object(C.jsx)(O.a,{id:"jobs.details.numberOfWorkers.label.req",defaultMessage:"Requested number of workers",description:"Label for requested workers"})},description:Object(C.jsx)("div",{children:Object(C.jsx)(O.a,{id:"jobs.details.numberOfWorkers.description",defaultMessage:"The number of workers you want AWS Glue to allocate to this job.",description:"Description for requested workers"})}),stretch:!0,children:w.g,condition:function(e){return e.jobConfig.command!==q.a.pythonshell},validations:v.g().min(1,(function(e){var t=e.min;return Object(C.jsx)(O.a,{id:"jobs.details.numberOfWorkers.min",defaultMessage:"At least {min, plural, one {# worker} other {# workers}} is required to run a job.",description:"Validation error message when the less than 1 worker has been allocated to a job.",values:{min:t}})})).typeError((function(){return Object(C.jsx)(O.a,{id:"jobs.details.numberOfWorkers.type",defaultMessage:"Number of workers must be a number.",description:"Validation error message when number of workers for a job is not a number."})})).nullable()},{name:"etlAutoTuning",label:"Generate job insights",description:Object(C.jsx)("div",{children:"AWS Glue will analyze your job runs and provide insights on how to optimize your jobs and the reasons for job failures."}),stretch:!0,innerProps:!0,children:function(e){var t=e.label,n=Object(a.a)(e,Ce),i=Object(m.a)().values.jobConfig,s=Object(T.a)(n.name),c=Object(r.a)(s,3)[2].setValue,l=n.disabled||!Pe("autotune",i.version,[void 0,"0.9","1.0"],!0)||"python-3.9"===i.language;return Object(g.useEffect)((function(){l&&c(!1)}),[l,c]),Object(C.jsx)(w.b,Object(o.a)(Object(o.a)({},n),{},{disabled:l,label:t,controlId:n.name}))},condition:function(e){return e.jobConfig.command!==q.a.glueray}},{name:"etlAutoTuningJobRules",stretch:!0,internalValidations:_.c,children:function(e){return Object(C.jsx)(Le,Object(o.a)(Object(o.a)({},e),{},{label:Object(D.a)(Object(C.jsx)(O.a,{id:"jobs.details.jobRules.label",defaultMessage:"Custom rules file",description:"Label for autotuning - etlAutoTuningJobRules."})),description:Object(C.jsx)(O.a,{id:"jobs.details.jobRules.description",defaultMessage:"The location of a custom job rules file for the Analyzer's decision tree.",description:"Description for autotuning - etlAutoTuningJobRules."})}))},condition:function(e){var t=e.jobConfig;return y.a.isEnabled("feature-enable-autotune-custom-rules")&&Pe("autotune",t.version,[void 0,"0.9","1.0"],t.etlAutoTuning)&&t.command!==q.a.gluestreaming}},{name:"maxCapacity",label:"Data processing units",description:Ie("The number of AWS Glue data processing units (DPUs) that will be allocated when this job runs."),stretch:!0,children:function(e){var t=Object(T.a)(e.name),n=Object(r.a)(t,3),a=n[0].value,o=n[1],i=o.error,s=o.touched,c=n[2],l=c.setValue,u=c.setTouched,d=Object(g.useMemo)((function(){return void 0===a?void 0:"".concat(a)}),[a]),b=Object(g.useCallback)((function(e){l(Number(e.detail.selectedId)),u(!0)}),[u,l]);return Object(C.jsx)(h.a,{filteringType:"auto",triggerVariant:"option",options:[{label:"1/16 DPU",id:"0.0625"},{label:"1 DPU",id:"1"}],selectedId:d,onChange:b,invalid:!!i&&s})},condition:function(e){return e.jobConfig.command===q.a.pythonshell}},{name:"bookmark",info:Object(C.jsx)(O.a,{id:"job.details.bookmark.label.linkAriaLabel",defaultMessage:"More information for 'Job bookmark' (shows in sidebar).",description:"Info panel link aria label for the label of the job bookmark dropdown.",children:function(e){return Object(C.jsx)(R.a,{contentKey:"edit-job-details-bookmark-hp",linkAriaLabel:e})}}),label:Object(C.jsx)(O.a,{id:"job.details.bookmark.label",defaultMessage:"Job bookmark",description:"Label for the job bookmark dropdown."}),description:Ie("Specifies how AWS Glue processes job bookmark when the job runs. It can remember previously processed data (Enable), update state information (Pause), or ignore state information (Disable)."),stretch:!0,children:function(e){var t=Object(m.a)().values,n=t.dag,a=t.jobConfig,i=Object(G.a)(n||{}),s=Object(T.a)(e.name),c=Object(r.a)(s,3),l=c[0].value,u=c[2].setValue,d=a.command===q.a.gluestreaming,b=i||d,p=e.disabled||b;return Object(g.useEffect)((function(){l!==X&&b&&u(X)}),[i,d,b,l,u]),Object(C.jsx)(w.m,Object(o.a)(Object(o.a)({resourceNameLabel:"job bookmark"},e),{},{options:[{label:"Enable",id:"job-bookmark-enable"},{label:"Pause",id:"job-bookmark-pause"},{label:"Disable",id:"job-bookmark-disable"}],disabled:p}))},condition:function(e){var t=e.jobConfig;return!["pythonshell","glueray"].includes(t.command)},validations:v.i()},{name:"jobRunQueue",label:Object(C.jsx)(O.a,{id:"job.details.jobRunQueueStatus",defaultMessage:"Job queuing",description:"Label for the Job Run Queue Status checkbox."}),description:Ie("Enable job runs to be queued to run later when they cannot run immediately due to service quotas"),stretch:!0,innerProps:!0,children:function(e){var t=e.label,n=Object(a.a)(e,we),r=Object(m.a)().values.jobConfig;return y.a.isEnabled("feature-job-queuing-enabled")&&void 0===r.jobRunQueue&&(r.jobRunQueue=!0),Object(C.jsx)(w.b,Object(o.a)(Object(o.a)({},n),{},{label:t,editable:!1,controlId:n.name}))},condition:function(e){e.jobConfig;return!1}},{name:"flexExecution",label:Object(C.jsx)(O.a,{id:"job.details.flexExecution",defaultMessage:"Flex execution",description:"Label for Flex Execution checkbox."}),info:Object(C.jsx)(O.a,{id:"job.details.flexExecution.linkAriaLabel",defaultMessage:"More information for 'Flex execution' (shows in sidebar).",description:"Info panel link aria label for the label of the Flex Execution checkbox.",children:function(e){return Object(C.jsx)(R.a,{contentKey:"edit-job-details-flexjobs-hp",linkAriaLabel:e})}}),description:Ie("Reduce costs by running this job on spare capacity. Ideal for non-urgent workloads that don't require fast jobs start times or consistent execution times. See recommendations, limitations and pricing in the help panel by clicking on the Info link above."),stretch:!0,disableCondition:function(e){var t=e.workerType;return N.e.map((function(e){return e.id})).includes(null!==t&&void 0!==t?t:"")},innerProps:!0,children:Ne,condition:function(e){var t=e.jobConfig;return!!y.a.isEnabled("feature-flex-job")&&[q.a.glueetl,q.a.gluestreaming].includes(t.command)}},{name:"maxRetries",label:"Number of retries",stretch:!0,children:w.g,validations:Object(x.b)(0,x.a).nullable()},{name:"timeout",label:"Job timeout (minutes)",description:"Set the execution time. The default is 2,880 minutes (48 hours) for a Glue ETL job. No job timeout is defaulted for a Glue Streaming job.",stretch:!0,children:function(e){return Object(C.jsx)(w.g,Object(o.a)(Object(o.a)({},e),{},{emptyToUndefined:!0}))},disableCondition:function(e){return e.command===q.a.glueray},validations:v.g().min(1,(function(){return Object(C.jsx)(O.a,{id:"jobs.details.timeout.min",defaultMessage:"Timeout needs to be positive.",description:"Validation error message when the timeout for a job is 0 or less."})})).typeError((function(){return Object(C.jsx)(O.a,{id:"jobs.details.timeout.type",defaultMessage:"Timeout must be a number.",description:"Validation error message when the timeout for a job is not a number."})}))}],Ae=y.a.isEnabled("feature-enable-autoscale")||y.a.isEnabled("feature-enable-autoscale-ga"),_e=y.a.isEnabled("feature-enable-autotune"),Pe=function(e,t,n,a){return("autoscale"===e?Ae:_e)&&!(!a||n.includes(t))},Ue=y.a.isEnabled("feature-spark-ui"),Ge=[{name:"scriptName",label:"Script filename",stretch:!0,children:w.p,validations:v.i().when("role",(function(e,t){return e?t.max(1024-e.length-1,(function(e){var t=e.max;return Object(C.jsx)(O.a,{id:"jobs.details.scriptName.max",defaultMessage:"Script name must be at most {max} characters.",description:"Validation error message when the script name for a job is too long.",values:{max:t}})})):t})).required((function(){return Object(C.jsx)(O.a,{id:"jobs.details.scriptName.required",defaultMessage:"Script name is required.",description:"Validation error message when the script name for a job is missing."})})).test("scriptName",(function(){return Object(C.jsx)(O.a,{id:"job.details.name.error",defaultMessage:"Your job requires a unique script name and cannot be named 'Untitled job'.",description:"Validation error message when the job scriptName is the same as the default."})}),(function(){var e=this.parent.scriptName;return!(null!==e&&void 0!==e&&e.includes("Untitled job"))}))},{name:"scriptLocation",label:"Script path",description:"S3 location of the script. Path must be in the form s3://bucket/prefix/path/. It must end with a slash (/) and not include any files.",stretch:!0,children:P.a,validations:_.f},{name:"metrics",label:Object(C.jsx)(O.a,{id:"job.details.metrics",defaultMessage:"Job metrics",description:"Label for the job metrics checkbox."}),info:Object(C.jsx)(O.a,{id:"job.details.metrics.linkAriaLabel",defaultMessage:"More information for 'Job metrics' (shows in sidebar).",description:"Info panel link aria label for the label of the job metrics checkbox.",children:function(e){return Object(C.jsx)(R.a,{contentKey:"edit-job-details-jobmetrics-hp",linkAriaLabel:e})}}),description:"Enable the creation of CloudWatch metrics when this job runs.",stretch:!0,innerProps:!0,children:Ne,condition:function(e){var t=e.jobConfig;return t.command!==q.a.pythonshell&&t.command!==q.a.glueray}},{name:"observabilityMetrics",label:Object(C.jsx)(O.a,{id:"job.details.observabilityMetrics",defaultMessage:"Job observability metrics",description:"Label for the job metrics checkbox."}),info:Object(C.jsx)(O.a,{id:"job.details.observabilityMetrics.linkAriaLabel",defaultMessage:"More information for 'Job observability metrics' (shows in sidebar).",description:"Info panel link aria label for the label of the job observability metrics checkbox.",children:function(e){return Object(C.jsx)(R.a,{contentKey:"edit-job-details-observability-metrics-hp",linkAriaLabel:e})}}),description:"Enable the creation of additional observability CloudWatch metrics when this job runs.",stretch:!0,innerProps:!0,children:Ne,condition:function(e){var t=e.jobConfig;return y.a.isEnabled("feature-monitoring-resource-usage")&&t.command!==q.a.pythonshell&&t.command!==q.a.glueray}},{name:"logging",label:Object(C.jsx)(O.a,{id:"job.details.logging",defaultMessage:"Continuous logging",description:"Label for the continuous logging checkbox."}),info:Object(C.jsx)(O.a,{id:"job.details.logging.linkAriaLabel",defaultMessage:"More information for 'Continuous logging' (shows in sidebar).",description:"Info panel link aria label for the label of the continuous logging checkbox.",children:function(e){return Object(C.jsx)(R.a,{contentKey:"edit-job-details-contlogging-hp",linkAriaLabel:e})}}),description:"Enable logs in CloudWatch.",stretch:!0,innerProps:!0,children:Ne,condition:function(e){var t=e.jobConfig;return t.command!==q.a.pythonshell&&t.command!==q.a.glueray}},{name:"spark",label:Object(C.jsx)(O.a,{id:"job.details.spark",defaultMessage:Se.b,description:"Label for the spark ui info link."}),info:Object(C.jsx)(O.a,{id:"job.details.spark.linkAriaLabel",defaultMessage:"More information for 'Spark UI' (shows in sidebar).",description:"Info panel link aria label for the label of the spark ui checkbox.",children:function(e){return Object(C.jsx)(R.a,{contentKey:"edit-job-details-sparkui-hp",linkAriaLabel:e})}}),description:Se.a,stretch:!0,innerProps:!0,children:Ne,condition:function(e){var t=e.jobConfig;return Object(xe.g)(t.command)}},{name:"sparkPath",label:Se.d,stretch:!0,children:P.a,validations:_.g,condition:function(e){var t=e.jobConfig;return!0===t.spark&&Object(xe.g)(t.command)}},{name:"sparkConfiguration",label:Object(C.jsx)(O.a,{id:"job.details.sparkui.sparkConfiguration",defaultMessage:Se.c,description:"Label for the Spark UI logging and monitoring configuration."}),stretch:!0,innerProps:!0,children:function(e){return Object(C.jsx)(w.i,{name:e.name,editable:!0,items:Te})},condition:function(e){var t=e.jobConfig;return!0===t.spark&&Ue&&Object(xe.g)(t.command)&&"NOTEBOOK_MODE"!==t.jobMode}},{name:"maxConcurrentRuns",label:"Maximum concurrency",description:"Sets the maximum number of concurrent runs that are allowed for this job. An error is returned when this threshold is reached.",stretch:!0,children:w.g,validations:v.g().min(1,(function(){return Object(C.jsx)(O.a,{id:"jobs.details.maxConcurrentRuns.min",defaultMessage:"Maximum concurrency needs to be positive.",description:"Validation error message when the maximum concurrency for a job is 0 or less."})})).typeError((function(){return Object(C.jsx)(O.a,{id:"jobs.details.maxConcurrentRuns.type",defaultMessage:"Maximum concurrency must be a number.",description:"Validation error message when the maximum concurrency for a job is not a number."})}))},{name:"temporaryDirectory",label:"Temporary path",description:"Working directory. Path must be in the form s3://bucket/prefix/path/. It must end with a slash (/) and not include any files.",stretch:!0,children:function(e){return Object(C.jsx)(P.a,Object(o.a)(Object(o.a)({},e),{},{required:!1}))},validations:_.a,condition:function(e){return e.jobConfig.command!==q.a.glueray}},{name:"delay",label:Object(C.jsx)(O.a,{id:"job.details.delay",defaultMessage:"Delay notification threshold (minutes)",description:"Label for the delay notification threshold input."}),info:Object(C.jsx)(O.a,{id:"job.details.delay.linkAriaLabel",defaultMessage:"More information for 'Delay notification threshold (minutes)' (shows in sidebar).",description:"Info panel link aria label for the label of thedelay notification threshold input.",children:function(e){return Object(C.jsx)(R.a,{contentKey:"edit-job-details-delaynotif-hp",linkAriaLabel:e})}}),description:"Set a delay threshold in minutes. If the job runs longer than the specified time Glue will send a delay notification via CloudWatch.",stretch:!0,children:function(e){return Object(C.jsx)(w.g,Object(o.a)(Object(o.a)({},e),{},{emptyToUndefined:!0}))},validations:v.g().min(1,(function(){return Object(C.jsx)(O.a,{id:"jobs.details.delay.min",defaultMessage:"Delay notification threshold needs to be positive.",description:"Validation error message when the delay notification threshold for a job is 0 or less."})})).typeError((function(){return Object(C.jsx)(O.a,{id:"jobs.details.delay.type",defaultMessage:"Delay notification threshold must be a number.",description:"Validation error message when the delay notification threshold for a job is not a number."})}))},{name:"security",label:"Security configuration",description:Ie("Defines the encryption options of the ETL job. The security configuration specifies how the script is encrypted using server-side encryption with AWS KMS-managed keys (SSE-KMS) or Amazon S3-managed encryption keys (SSE-S3)."),stretch:!0,children:w.k,condition:function(e){return e.jobConfig.command!==q.a.glueray}},{name:"serverEncryption",label:"Server-side encryption",condition:function(e){return e.jobConfig.command!==q.a.glueray},description:Object(C.jsxs)("div",{children:["Select this option to enable S3-SSE encryption on both your data target and any data that is written to an S3 temporary directory. Ignored if a security configuration is specified"," ",Object(C.jsx)(f.a,{fontSize:"body-s",external:!0,ariaLabel:"Learn more on using server side encryption (opens in new tab)",href:"https://docs.aws.amazon.com/AmazonS3/latest/dev/UsingServerSideEncryption.html",children:Object(C.jsx)("b",{children:"Learn More"})})]}),stretch:!0,innerProps:!0,children:Ne},{name:"glueHiveMetastore",label:"Use Glue data catalog as the Hive metastore",description:Object(C.jsx)("div",{children:'To use Glue data catalog as the Hive metastore, the IAM role used for the job should have glue:CreateDatabase permissions. A database called "default" is created in the Glue data catalog if it does not exist.'}),stretch:!0,innerProps:!0,children:Ne,condition:function(e){return e.jobConfig.command!==q.a.glueray}},{sectionTitle:Object(C.jsx)(p.a,{variant:"h3",children:Object(C.jsx)(O.a,{id:"job.details.connections",defaultMessage:"Connections",description:"Label for the Connections section"})}),name:"connectionsList",stretch:!0,innerProps:!0,children:function(e){var t=e.name,n=e.disabled,a=Object(T.a)(t),o=Object(r.a)(a,3),i=o[0].value,s=o[1],c=s.error,l=s.touched,u=o[2],d=u.setValue,p=u.setTouched,f=Object(g.useState)([]),j=Object(r.a)(f,2),h=j[0],v=j[1],y=Object(ne.a)(v),x=Object(m.a)(),S=x.values,k=S.dag,E=S.jobConfig.jobMode,w=x.setFieldValue,I=Object(ne.a)(w),M="VISUAL_MODE"!==E,N=Object(me.b)(M),L=N.connectionList,D=N.refresh,A=N.getAllConnectionsByName,_=N.networkConnectionOptions,P=N.networkConnectionOptionsMultiSelect,G=N.networkConnectionsLoaded,F=N.tableLoading,B=N.buildConnectionsListFromDag,q=N.status,J=i.find((function(e){return L.find((function(t){return t.Name===e}))}))||me.a.id,V=_.find((function(e){var t=e.id;return J===t}))||me.a,W=i.map((function(e){return P.find((function(t){return t.value===e}))})).filter(Boolean),z=Object(g.useCallback)((function(e){var t=e.detail.selectedOption,n=i.filter((function(e){return!_.find((function(t){var n=t.id;return e===n}))})),a=t.id===me.a.id?[]:[t.id];d([].concat(a,Object(U.a)(n))),p(!0)}),[p,d,i,_]),H=Object(g.useCallback)((function(e){var t=e.detail.selectedOptions.sort((function(e){return"NETWORK"===e.connectionType?-1:0})).map((function(e){return e.value}));d(t),p(!0)}),[p,d]);return Object(g.useEffect)((function(){A(i).then((function(e){y(e)})).catch((function(e){}))}),[i,A,y]),Object(g.useEffect)((function(){G&&"VISUAL_MODE"===E&&B(k).then((function(e){var t=[].concat(Object(U.a)(J!==me.a.id?[J]:[]),Object(U.a)(e));I("jobConfig.connectionsList",t)})).catch((function(e){}))}),[G,J,k,B,I,E]),Object(C.jsx)(C.Fragment,{children:Object(C.jsx)(ee.a,{children:Object(C.jsxs)("div",{"data-awsui-column-layout-root":"true",children:[Object(C.jsx)(b.default,{stretch:!0,info:Object(C.jsx)(O.a,{id:"job.details.network.linkAriaLabel",defaultMessage:"More information for 'Additional network connections' (shows in sidebar).",description:"Info panel link aria label for the label of the network connection field.",children:function(e){return Object(C.jsx)(R.a,{contentKey:"edit-job-details-networkconnection-hp",linkAriaLabel:e})}}),label:Object(C.jsx)(O.a,{id:"job.details.network",defaultMessage:"Additional network connections",description:"Label for the network connection field"}),description:Object(C.jsx)(O.a,{id:"job.details.network.description",defaultMessage:"Choose a VPC configuration to access Amazon S3 data sources located in your virtual private cloud (VPC). You can create and manage Network connections in {glueConsoleConnectionLink}",description:"Label for the network connection field",values:{glueConsoleConnectionLink:Object(C.jsx)(ae.a,{url:"".concat(Object(te.getPartitionedBaseUrl)(),"glue/home#catalog:tab=connections"),label:ge("AWS Glue.")})}}),children:Object(C.jsx)(ue,{disabled:n,refresh:D,status:q,isDagless:M,selectedOption:V,networkConnectionOptions:_,handleChange:z,error:c,touched:l,selectedOptions:W,handleMultipleOptionsChange:H,networkConnectionOptionsMultiSelect:P})}),Object(C.jsx)(pe,{loading:F,connectionData:h,selectedId:J,currentConnections:i}),Object(C.jsx)(he,{name:t,connectionData:h,loading:F})]})})})},condition:function(e){return e.jobConfig.command!==q.a.glueray}},{sectionTitle:Object(C.jsx)(O.a,{id:"job.details.libraries",defaultMessage:"Libraries",description:"Label for the Libraries info link."}),headerInfo:Object(C.jsx)(O.a,{id:"job.details.libraries.linkAriaLabel",defaultMessage:"More information for 'Libraries' (shows in sidebar).",description:"Info panel link aria label for the label of the Libraries field.",children:function(e){return Object(C.jsx)(R.a,{contentKey:"edit-job-details-libraries-hp",linkAriaLabel:e})}}),name:"pythonPath",label:"Python library path",stretch:!0,condition:function(e){return e.jobConfig.command!==q.a.glueray},children:function(e){return Object(C.jsx)(w.p,Object(o.a)(Object(o.a)({},e),{},{dropWhenEmpty:!0}))}},{name:"dependentPath",label:"Dependent JARs path",stretch:!0,children:function(e){return Object(C.jsx)(w.p,Object(o.a)(Object(o.a)({},e),{},{dropWhenEmpty:!0}))},condition:function(e){var t=e.jobConfig;return!["pythonshell","glueray"].includes(t.command)}},{name:"referencedPath",label:"Referenced files path",stretch:!0,children:function(e){return Object(C.jsx)(w.p,Object(o.a)(Object(o.a)({},e),{},{dropWhenEmpty:!0}))},condition:function(e){return e.jobConfig.command!==q.a.glueray}},{name:"jobParameters",sectionTitle:Object(C.jsx)(O.a,{id:"job.details.jobParameters",defaultMessage:"Job parameters",description:"Label for the job parameters info link."}),headerInfo:Object(C.jsx)(O.a,{id:"job.details.jobParameters.linkAriaLabel",defaultMessage:"More information for 'Job parameters' (shows in sidebar).",description:"Info panel link aria label for the label of the job parameters field.",children:function(e){return Object(C.jsx)(R.a,{contentKey:"edit-job-details-jobparams-hp",linkAriaLabel:e})}}),stretch:!0,children:w.d},{name:"tags",sectionTitle:Object(C.jsx)("div",{children:"Tags"}),stretch:!0,children:w.n}],Fe=function(e){return q.b[e]},Be=function(e,t){return e.filter((function(e){var n=e.condition;return!n||n(t)})).map((function(e){var n=e.label?"function"===typeof e.label?e.label(t):e.label:void 0,a=Object(o.a)(Object(o.a)({},e),{},{label:n});return Object(C.jsx)(L.a,{ErrorContent:function(t){return Object(C.jsxs)(s.default,{type:"error",statusIconAriaLabel:"Error icon, for ".concat(n.toString()),children:[Object(C.jsx)(O.a,{id:"jobs.details.".concat(e.name,".error"),defaultMessage:"Failed to properly render job config field for: {name}. Please verify its value.",values:{name:e.name}}),Object(C.jsx)(u.a,{header:"Error details",children:JSON.stringify(t)})]})},children:Object(C.jsx)($,Object(o.a)({},a),e.name)},e.name)}))},qe=function(){var e=Object(m.a)(),t=e.values,n=e.errors,a=e.submitCount,o=Object(g.useState)(!1),i=Object(r.a)(o,2),s=i[0],c=i[1],l=Object(g.useMemo)((function(){return Ge.map((function(e){return e.name}))}),[]),d=Object(g.useMemo)((function(){return l.some((function(e){return(null===n||void 0===n?void 0:n.jobConfig)&&e in n.jobConfig}))}),[l,null===n||void 0===n?void 0:n.jobConfig])&&0!==a;return Object(g.useEffect)((function(){d&&!s&&c(!0)}),[d,s]),Object(C.jsx)(u.a,{headerText:"Advanced properties",variant:"default","data-e2e":"jobDetailsAdvancedProperties",expanded:s,onChange:function(){!d&&c(!s)},children:Object(C.jsx)(j.default,{size:"l",direction:"vertical",children:Be(Ge,t)})})};t.c=function(){var e=Object(m.a)().values,t=y.a.isEnabled("feature-interactive-session")&&"VISUAL_MODE"===e.jobConfig.jobMode;return Object(C.jsx)("div",{className:"awsui-util-p-xl glue__job-details-container",children:Object(C.jsx)("div",{className:"glue__job-details-form-container",children:Object(C.jsxs)(j.default,{size:"l",direction:"vertical",children:[t&&Object(C.jsx)(E,{}),Object(C.jsx)(M,{}),Object(C.jsx)(d.a,{children:Object(C.jsx)(l.a,{header:Object(C.jsx)(p.a,{variant:"h2",info:Object(C.jsx)(O.a,{id:"job.details.header.linkAriaLabel",defaultMessage:"More information for 'Basic properties' (shows in sidebar).",description:"Info panel link aria label for the header of the job details.",children:function(e){return Object(C.jsx)(R.a,{contentKey:"edit-job-details-hp",linkAriaLabel:e})}}),children:Object(C.jsx)(O.a,{id:"job.details.header",defaultMessage:"Basic properties",description:"Header for job details"})}),footer:Object(C.jsx)(qe,{}),children:Object(C.jsx)(j.default,{size:"l",direction:"vertical",children:Be(De,e)})})})]})})})}},2821:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return xe}));var a=n(171),o=n(46),r=n(61),i=n(2697),s=n(2682),c=n(2700),l=n(24),u=n(2),d=n(10),b=n.n(d),p=n(0),f=n(754),j=n(103),h=n(99),m=n(82),g=n(551),O=n(354),v=n(50),y=n(972),x=n(2696),S=n(2714),k=n(2673),C=n(2706),E=n(2756),w=n(2755),I=n(29),T=n(252),M=n(1),N=function(){var e=Object(o.a)().values.jobConfig,t=Object(I.usePreferencesContext)().preferences.dataPreviewAutoStartEnabled,n=void 0===t||t,a=k.b.use.autoInferSchema(),r=k.b.use.autoImportGlueLibraries(),i=Object(o.a)().setFieldValue,s=Object(w.a)().createSession,c=Object(E.a)().stopSession,d=Object(p.useState)(e.role),N=Object(u.a)(d,2),L=N[0],R=N[1],D=Object(p.useState)(!1),A=Object(u.a)(D,2),_=A[0],P=A[1],U=Object(x.a)(),G=Object(p.useMemo)((function(){return!L}),[L]),F=Object(p.useCallback)((function(e){e&&(R(e),i("jobConfig.role",e))}),[i]),B=Object(p.useCallback)(Object(l.a)(b.a.mark((function e(){var t,a,o,r,i;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(P(!0),n){e.next=19;break}return e.next=4,c();case 4:return k.b.set.resetSession(),e.prev=5,e.next=8,s({RoleArn:L});case 8:o=e.sent,null===(t=(a=k.b.set).currentSession)||void 0===t||t.call(a,o),k.b.set.endedSessionManually(!1),P(!1),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(5),null===(r=(i=k.b.set).sessionAwsError)||void 0===r||r.call(i,e.t0);case 17:e.next=22;break;case 19:k.b.set.resetSession(),k.b.set.endedSessionManually(!1),P(!1);case 22:Object(I.captureCustomAnalytics)(I.PanoramaEventType.CLICK,T.f,"StartSession",1),k.b.set.captureSettingsInAnalytics(n);case 24:case"end":return e.stop()}}),e,null,[[5,14]])}))),[n,s,L,c]);return Object(M.jsx)(f.a,{header:U.createSessionHeader,footer:Object(M.jsx)(j.default,{float:"right",children:Object(M.jsx)(h.default,{direction:"horizontal",size:"xs",children:Object(M.jsx)(m.default,{variant:"primary",loading:_,onClick:B,disabled:G,formAction:"none",children:U.createSessionButton})})}),children:Object(M.jsxs)(h.default,{direction:"vertical",size:"m",children:[Object(M.jsxs)(j.default,{children:[Object(M.jsx)(C.a,{selectedRole:L,setSelectedRole:function(e){return F(e)}}),Object(M.jsx)(g.a,{href:Object(S.a)(),external:!0,externalIconAriaLabel:"Create an IAM role (opens in new tab)",children:U.createIamRole})]}),Object(M.jsxs)(O.a,{headerText:U.createSessionSettings,children:[Object(M.jsx)(j.default,{children:Object(M.jsx)(v.default,{children:Object(M.jsx)(y.a,{onChange:function(e){var t,n,a=e.detail.checked;null===(t=(n=k.b.set).autoInferSchema)||void 0===t||t.call(n,a)},checked:a,description:U.autoInferSchemaToggleHeaderDescription,children:U.autoInferSchemaHeaderLabel})})}),Object(M.jsx)(j.default,{children:Object(M.jsx)(v.default,{children:Object(M.jsx)(y.a,{onChange:function(e){var t,n,a=e.detail.checked;null===(t=(n=k.b.set).autoImportGlueLibraries)||void 0===t||t.call(n,a)},checked:r,description:U.autoImportLibrariesToggleHeaderDescription,children:U.autoImportLibrariesHeaderLabel})})})]})]})})},L=n(877),R=n(2709),D=n(3),A=n(15),_=n(2584),P=n(908),U=n(552),G=n(281),F=n(253),B=n(550),q=n(284),J=n(399),V=n(2668),W=n(2730),z=n(498),H=n(882),K=n(195),Q=n(755),Y=n(2688),X=n(875),Z=n(878),$=n(48),ee=n(759),te=n(2671),ne=n(146),ae=n(170),oe=n(2735),re=n(310),ie=n(402),se=n(927),ce=n(30),le=n(2729);function ue(){var e,t,n,a,o,r,i,s,c=null===(e=(t=k.b.useTracked).currentSession)||void 0===e?void 0:e.call(t),l=Object(p.useState)(!1),d=Object(u.a)(l,2),b=d[0],f=d[1],g=function(e){var t=e.label,n=e.children;return Object(M.jsxs)("div",{children:[Object(M.jsx)(j.default,{variant:"awsui-key-label",children:t}),Object(M.jsx)("div",{children:n})]})};return c?Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)(m.default,{iconName:"status-info",variant:"icon",onClick:function(){return f(!0)}}),Object(M.jsx)(re.default,{size:"max",onDismiss:function(){return f(!1)},visible:b,footer:Object(M.jsx)(j.default,{float:"right",children:Object(M.jsx)(h.default,{direction:"horizontal",size:"xs",children:Object(M.jsx)(m.default,{variant:"primary",formAction:"none",onClick:function(){return f(!1)},children:"Close"})})}),header:"Session Details",children:Object(M.jsxs)(ie.a,{columns:3,variant:"text-grid",children:[Object(M.jsxs)(h.default,{size:"l",children:[Object(M.jsx)(g,{label:"Id",children:c.Id}),Object(M.jsx)(g,{label:"Created on",children:null===(n=c.CreatedOn)||void 0===n?void 0:n.toLocaleString()}),Object(L.b)(c)&&c.DPUSeconds&&Object(M.jsx)(g,{label:"DPU hours",children:(c.DPUSeconds/3600).toFixed(3)}),Object(M.jsxs)(g,{label:"Status",children:[Object(M.jsx)(P.a,{type:Object(L.b)(c)?"success":Object(L.a)(c)?"in-progress":"error",children:Object(L.a)(c)?"STARTING":c.Status}),Object(L.a)(c)&&Object(M.jsx)(se.a,{value:100*(null!==(a=null===c||void 0===c?void 0:c.Progress)&&void 0!==a?a:0),status:Object(L.a)(c)?"in-progress":"success",label:"Progress",resultText:"Session ".concat(null!==(o=null===c||void 0===c?void 0:c.Id)&&void 0!==o?o:""," Created")})]}),ce.a.isEnabled("feature-usage-profiles")&&Object(M.jsx)(g,{label:"Usage profile",children:Object(M.jsx)(le.a,{item:c})})]}),Object(M.jsx)(h.default,{size:"l",children:Object.entries(null!==(r=null===c||void 0===c?void 0:c.DefaultArguments)&&void 0!==r?r:{}).map((function(e,t){var n=Object(u.a)(e,2),a=n[0],o=n[1];return Object(M.jsx)(g,{label:a,children:o},t)}))}),Object(M.jsxs)(h.default,{size:"l",children:[Object(M.jsx)(g,{label:"Role",children:Object(M.jsx)("div",{className:"custom-wrapping",children:c.Role})}),Object(M.jsx)(g,{label:"Glue Version",children:c.GlueVersion}),Object(M.jsx)(g,{label:"Max Capacity",children:c.MaxCapacity}),Object(M.jsx)(g,{label:"Idle Timeout (min)",children:T.b}),Object(M.jsx)(g,{label:"Connections",children:null===(i=c.Connections)||void 0===i||null===(s=i.Connections)||void 0===s?void 0:s.map((function(e,t){return Object(M.jsx)("p",{children:e},t)}))})]})]})})]}):null}var de=n(928);function be(){var e,t,n,a=null===(e=(t=k.b.useTracked).currentSession)||void 0===e?void 0:e.call(t),o=Object(R.a)().isCurrentSessionValid,r=Object(x.a)();return Object(M.jsxs)(M.Fragment,{children:[a&&Object(L.b)(a)&&Object(M.jsx)(de.a,{color:"green",children:r.sessionReadyStatus.toUpperCase()}),a&&Object(L.a)(a)&&o&&Object(M.jsx)(de.a,{color:"blue",children:"".concat(r.sessionStartingStatus.toUpperCase()," (").concat(100*(null!==(n=null===a||void 0===a?void 0:a.Progress)&&void 0!==n?n:0),"%)")}),a&&Object(L.a)(a)&&!o&&Object(M.jsx)(de.a,{color:"grey",children:"".concat(r.sessionRestartingStatus.toUpperCase())}),a&&Object(L.f)(a)&&Object(M.jsx)(de.a,{color:"grey",children:r.sessionTimeoutStatus.toUpperCase()}),a&&Object(L.e)(a)&&Object(M.jsx)(de.a,{color:"grey",children:r.sessionStoppedStatus.toUpperCase()}),a&&Object(L.c)(a)&&Object(M.jsx)(de.a,{color:"grey",children:r.sessionStoppingStatus.toUpperCase()}),a&&Object(L.d)(a)&&Object(M.jsx)(de.a,{color:"red",children:r.sessionFailedStatus.toUpperCase()})]})}var pe=n(2731),fe=n(2757),je=n(2579),he=n(232),me=Object(W.a)();function ge(e,t){if("object"===e.type&&e.children){var n,a=Object(z.b)(e.children,(function(e){return"object"!==e.type}),(function(e){return"array"===e.type}));t.push(Object(V.c)((null!==(n=null===a||void 0===a?void 0:a.node)&&void 0!==n?n:e).fullPath))}else t.push(Object(V.c)(e.fullPath))}var Oe={id:"0",value:"0",label:"Output 1"};function ve(e){var t=e.selectedNodeId,n=Object(s.b)().schemas,a=void 0===n?{}:n,o=Object(he.a)(t),r=Object(p.useState)(Oe),i=Object(u.a)(r,2),c=i[0],l=i[1],d=Object(p.useMemo)((function(){var e;return null!==(e=a[t])&&void 0!==e?e:[]}),[a,t]),b=Object(p.useMemo)((function(){var e;return null!==(e=d[+c.id])&&void 0!==e?e:[]}),[d,c.id]),f=JSON.stringify(b);return Object(p.useEffect)((function(){t!==o&&l(Oe)}),[o,t]),Object(M.jsx)(ye,{selectedNodeId:t,selectedFrame:c,setSelectedFrame:l},f)}function ye(e){var t,n,a=e.selectedNodeId,i=e.selectedFrame,c=e.setSelectedFrame,l=Object(o.a)(),d=l.values,b=l.setFieldValue,f=Object($.a)("dag.".concat(a)),m=Object(u.a)(f,2)[1].error,O=Object(s.b)(),E=O.schemas,w=void 0===E?{}:E,N=O.preview,L=O.previewState,R=O.previewProgress,W=O.previewCompletedOn,z=O.sessionStatus,re=O.helpers,ie=O.sampleRows,se=O.setSampleRows,ce="READY"!==z||"RUNNING"===L||"WAITING"===L,le=Object(te.b)().isResourcePanelAndPanelLayoutEnabled,de=Object(p.useMemo)((function(){var e;return null!==(e=w[a])&&void 0!==e?e:[]}),[w,a]),he=Object(p.useMemo)((function(){var e;return null!==(e=de[+i.id])&&void 0!==e?e:[]}),[de,i.id]),Oe=Object(p.useMemo)((function(){return Object(pe.a)({dag:d.dag,preview:N,selectedNodeId:a,error:m})||[]}),[m,N,a,d.dag]),ve=Object(p.useMemo)((function(){var e=Number(i.id);return Oe?Oe[e]:[]}),[Oe,i.id]),ye=Object(p.useMemo)((function(){return Oe.map((function(e,t){return{id:"".concat(t),value:"".concat(t),label:"Output ".concat(t+1)}}))}),[Oe]),xe=k.b.useTracked.visiblePreviewFieldsForNode("".concat(a,":").concat(i.id)),Se=Object(p.useMemo)((function(){var e=Object(je.intersection)(xe,he.map((function(e){return e.key})));return xe&&xe.length>0&&(null===e||void 0===e?void 0:e.length)>0?e:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1?arguments[1]:void 0,a=[],o=Object(A.a)(t);try{for(o.s();!(e=o.n()).done;){var r=e.value;r.previewField&&ge(r,a)}}catch(c){o.e(c)}finally{o.f()}if(0===a.length){var i,s=Object(A.a)(t.slice(0,n?50:5));try{for(s.s();!(i=s.n()).done;)ge(i.value,a)}catch(c){s.e(c)}finally{s.f()}}return a}(he,le)}),[le,he,xe]),ke=Object(p.useState)(Se),Ce=Object(u.a)(ke,2),Ee=Ce[0],we=Ce[1],Ie=Object(p.useCallback)((function(e){var t,n;we(e),null===(t=(n=k.b.set).addPreviewFields)||void 0===t||t.call(n,"".concat(a,":").concat(i.id),e)}),[a,i]),Te=Object(p.useCallback)((function(e){c(e)}),[c]),Me=Object(p.useCallback)((function(){var e;null===(e=re.refresh)||void 0===e||e.call(re),Object(I.captureCustomAnalytics)(I.PanoramaEventType.CLICK,T.f,"RefreshStatement",1)}),[re]),Ne=Object(x.a)(),Le=Object(p.useMemo)((function(){return"TIMEOUT"===z?Ne.sessionTimedOut:"READY"!==z?Ne.loadingSession:Ne.loadingPreview.replace("%currentProgress%",me.format(R))}),[Ne.loadingPreview,Ne.sessionTimedOut,Ne.loadingSession,R,z]),Re=Object(p.useState)({wrapLines:!0,visibleContent:Ee}),De=Object(u.a)(Re,2),Ae=De[0],_e=De[1],Pe=Object(H.a)(),Ue=Object(p.useMemo)((function(){return Ee.map((function(e){return Object(D.a)(Object(D.a)({id:e,header:e},Ee.length>0?{width:"".concat(1/Ee.length*100,"%")}:{}),{},{cell:function(t){var n=e.toLowerCase(),a="object"===typeof t&&!(n in t)&&e in t,o=Object(V.b)(t,a?e:n);return"object"===typeof o&&(o=JSON.stringify(o)),o},width:200,ariaLabel:function(t){return ae.i.columnHeaderLabel(e,t.sorted,t.descending)},sortingField:e})}))}),[Ee]),Ge=Object(_.useCollection)(ve||[],{filtering:{empty:"AVAILABLE"===L?Object(M.jsx)(ee.a,{title:Object(M.jsx)(r.a,{id:"node.detail.tab.data-preview.table.empty.title",defaultMessage:"No data to display",description:"Title text to show when the data preview table has no data available for the current node."}),description:Object(M.jsx)(r.a,{id:"node.detail.tab.data-preview.table.empty.description",defaultMessage:"Try increasing the number of rows being sampled.",description:"Extra text to show when the data preview table has no data available for the current node."})}):null,noMatch:Object(M.jsx)(ee.a,{title:Object(M.jsx)(r.a,{id:"node.detail.tab.data-preview.table.noMatch.title",defaultMessage:"No matches found",description:"Title text to show when the data preview table has no data matching the current filter."}),description:Object(M.jsx)(r.a,{id:"node.detail.tab.data-preview.table.noMatch.description",defaultMessage:"Your search terms did not match any sample.",description:"Extra text to show when the data preview table has no data matching the current filter."}),cta:Object(M.jsx)(r.a,{id:"node.detail.tab.data-preview.table.noMatch.cta",defaultMessage:"Clear search",description:"Button to clear the current filter for the data preview table when no match have been found."}),onCtaClick:function(){return Ve.setFiltering("")}})},sorting:{}}),Fe=Ge.items,Be=Ge.filteredItemsCount,qe=Ge.collectionProps,Je=Ge.filterProps,Ve=Ge.actions,We=null===(t=(n=k.b.use).sampleRows)||void 0===t?void 0:t.call(n),ze=Object(p.useState)("".concat(We)),He=Object(u.a)(ze,2),Ke=He[0],Qe=He[1],Ye=Object(I.usePreferencesContext)(),Xe=Ye.preferences.dataPreviewAutoStartEnabled,Ze=void 0===Xe||Xe,$e=Ye.setPreferences,et=Object(p.useState)(Ze),tt=Object(u.a)(et,2),nt=tt[0],at=tt[1],ot=Object(p.useState)(k.b.get.autoInferSchema()),rt=Object(u.a)(ot,2),it=rt[0],st=rt[1],ct=Object(p.useState)(k.b.get.autoImportGlueLibraries()),lt=Object(u.a)(ct,2),ut=lt[0],dt=lt[1],bt=Object(p.useState)(null===d||void 0===d?void 0:d.jobConfig.role),pt=Object(u.a)(bt,2),ft=pt[0],jt=pt[1],ht=isNaN(Number(Ke))||Number(Ke)<1||Number(Ke)>1e3,mt=ht?Ne.numberRowsError:void 0,gt=Object(p.useCallback)((function(){var e,t,n,a,o,r,i=ht?We:Math.max(1,parseInt(Ke));se(i),Qe("".concat(i)),b("jobConfig.role",ft),null===(e=(t=k.b.set).sampleRows)||void 0===e||e.call(t,i),null===(n=(a=k.b.set).autoImportGlueLibraries)||void 0===n||n.call(a,ut),null===(o=(r=k.b.set).autoInferSchema)||void 0===o||o.call(r,it),$e((function(e){return Object(D.a)(Object(D.a)({},e),{},{dataPreviewAutoStartEnabled:nt})})),k.b.set.captureSettingsInAnalytics(nt)}),[ht,We,Ke,se,b,ft,ut,it,nt,$e]),Ot=Object(p.useCallback)((function(){var e,t,n,a,o,r;Qe("".concat(ie)),Qe("".concat(null===(e=(t=k.b.get).sampleRows)||void 0===e?void 0:e.call(t))),dt(null===(n=(a=k.b.get).autoImportGlueLibraries)||void 0===n?void 0:n.call(a)),st(null===(o=(r=k.b.get).autoInferSchema)||void 0===o?void 0:o.call(r)),at(Ze)}),[ie,Ze]),vt=Object(Y.d)("sample dataset"),yt=vt.preferencesMessages,xt=vt.textFilterMessages,St=Object(X.b)("frame"),kt=Object(K.b)({"glue__no-container-padding":!le});return Object(M.jsx)("div",{className:kt,children:Object(M.jsx)(q.default,Object(D.a)(Object(D.a)({},qe),{},{ariaLabels:Object(Z.c)(Ee[0]),columnDefinitions:Ue,resizableColumns:Ae.wrapLines,firstIndex:1,header:Object(M.jsx)(G.a,{info:Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)(r.a,{id:"node.detail.tab.data-preview.table.header.linkAriaLabel",defaultMessage:"More information for 'Data preview' (shows in sidebar).",description:"Info panel link aria label for the title of the data preview table shown in the node detail panel.",children:function(e){return Object(M.jsx)(ne.a,{contentKey:"data-previews-tab-hp",linkAriaLabel:e})}}),Object(M.jsxs)(j.default,{variant:"span",padding:{left:"s"},children:[Object(M.jsx)(be,{}),Object(M.jsx)(ue,{})]})]}),counter:!!ve&&" (".concat(ve.length,")"),actions:he&&Object(M.jsxs)(h.default,{size:"m",direction:"horizontal",children:[Oe.length>1&&Object(M.jsx)(B.a,Object(D.a)(Object(D.a)({},St),{},{disabled:!!ce,selectedOption:i,options:ye,onChange:function(e){var t=e.detail.selectedOption;return Te(t)}})),"READY"===z&&Object(M.jsx)(I.RefreshButton,{disabled:ce,isRefreshing:ce,dataE2E:"datapreview-refresh",resourceName:"Refresh datapreview results",ariaLabel:"Refresh results last updated on ".concat(W?new Date(W).toLocaleString():""),onRefresh:Me}),Object(M.jsx)(fe.a,{}),Object(M.jsx)(oe.a,{schema:he,selected:Ee,onChange:Ie})]}),children:Object(M.jsx)(r.a,{id:"node.detail.tab.data-preview.table.header",defaultMessage:"Data preview",description:"Title of the data preview table shown in the node detail panel."})}),renderAriaLive:Pe,loading:!!ce,loadingText:Le,items:Fe,filter:Object(M.jsx)(J.a,Object(D.a)(Object(D.a)(Object(D.a)({},Je),xt),{},{disabled:!!ce,countText:Object(Q.a)(Be)})),preferences:Object(M.jsx)(U.a,{title:yt.title,confirmLabel:yt.confirmLabel,cancelLabel:yt.cancelLabel,onConfirm:function(e){var t=e.detail;gt(),_e(t)},onCancel:function(){Ot()},preferences:Ae,wrapLinesPreference:yt.wrapLinesPreference,customPreference:function(){return Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)(j.default,{children:Object(M.jsx)(v.default,{label:Ne.numberRowsLabel,description:Ne.numberRowsDescription,stretch:!0,errorText:mt,children:Object(M.jsx)(F.default,{type:"number",invalid:ht,value:Ke,onChange:function(e){return Qe(e.detail.value)}})})}),Object(M.jsx)(j.default,{padding:{vertical:"l"},children:Object(M.jsxs)(h.default,{direction:"vertical",size:"l",children:[Object(M.jsxs)(j.default,{children:[Object(M.jsx)(C.a,{selectedRole:ft,setSelectedRole:jt}),Object(M.jsx)(g.a,{href:Object(S.a)(),external:!0,externalIconAriaLabel:"Create an IAM role (opens in new tab)",children:Ne.createIamRole})]}),Object(M.jsx)(j.default,{children:Object(M.jsx)(v.default,{children:Object(M.jsx)(y.a,{onChange:function(e){var t=e.detail.checked;at(t)},checked:nt,description:Object(M.jsxs)(M.Fragment,{children:[Ne.autoStartToggleHeaderDescription,Object(M.jsx)(P.a,{type:"warning",children:Ne.autoStartToggleHeaderSubDescription})]}),children:Ne.autoStartHeaderLabel})})}),Object(M.jsx)(j.default,{children:Object(M.jsx)(v.default,{children:Object(M.jsx)(y.a,{onChange:function(e){var t=e.detail.checked;st(t)},checked:it,description:Ne.autoInferSchemaToggleHeaderDescription,children:Ne.autoInferSchemaHeaderLabel})})}),Object(M.jsx)(j.default,{children:Object(M.jsx)(v.default,{children:Object(M.jsx)(y.a,{onChange:function(e){var t=e.detail.checked;dt(t)},checked:ut,description:Ne.autoImportLibrariesToggleHeaderDescription,children:Ne.autoImportLibrariesHeaderLabel})})})]})})]})}}),stickyHeader:!0,stickyColumns:{first:0,last:0},wrapLines:Ae.wrapLines}))})}function xe(e){var t,n,l,u,d,b,p,f,m,g,O,v,y,x,S,C=e.selectedNodeId,E=Object(o.a)().values.dag,w=Object(s.b)().helpers,T=null===(t=(n=k.b.useTracked).sessionAwsError)||void 0===t?void 0:t.call(n),D=null===(l=(u=k.b.useTracked).statementAwsError)||void 0===l?void 0:l.call(u),A=k.b.useTracked.statementError(),_=null===(d=(b=k.b.useTracked).hasStatementError)||void 0===d?void 0:d.call(b),P=null===(p=(f=k.b.useTracked).currentSession)||void 0===p?void 0:p.call(f),U=Object(I.usePreferencesContext)().preferences.dataPreviewAutoStartEnabled,G=void 0===U||U,F=null===(m=(g=k.b.useTracked).shouldSessionManuallyRestart)||void 0===m?void 0:m.call(g,G),B=Object(R.a)(),q=B.isNewSessionRequestValid,J=B.isCurrentSessionValid,V=null===(O=(v=k.b.useTracked).dagErrors)||void 0===O?void 0:O.call(v);return Object(i.d)(E)?Object(M.jsx)(a.default,{id:"datapreview-tab-wrapper.alert.unsupported-source",type:"info",dismissible:!1,header:Object(M.jsx)(r.a,{id:"datapreview-tab-wrapper.alert.unsupported-source.header",defaultMessage:"Unsupported sources detected.",description:"Title for alert when unsupported sources are used"}),children:Object(M.jsx)("div",{className:"awsui-util-d-ib",children:Object(M.jsx)(r.a,{id:"datapreview-tab-wrapper.alert.unsupported-source.content",defaultMessage:"Data preview is not available for Kinesis, Kafka, and custom connection sources.",description:"Content for alert when unsupported sources are used"})})}):T||Object(L.d)(P)?Object(M.jsxs)(h.default,{size:"m",direction:"vertical",children:[Object(M.jsx)(j.default,{padding:"l",children:Object(M.jsx)(c.d,{awsError:T,sessionError:{message:null!==(x=null===P||void 0===P?void 0:P.ErrorMessage)&&void 0!==x?x:"",sessionId:null!==(S=null===P||void 0===P?void 0:P.Id)&&void 0!==S?S:""}})}),Object(M.jsx)(N,{})]}):!G&&Object(L.f)(P)?Object(M.jsxs)(j.default,{padding:"l",children:[Object(M.jsx)(c.e,{}),Object(M.jsx)(N,{})]}):V&&(null===(y=Object.keys(V))||void 0===y?void 0:y.length)>0?Object(M.jsxs)(j.default,{padding:"l",children:[Object(M.jsx)(c.a,{dagErrors:V})," "]}):F||!q?Object(M.jsx)(N,{}):C&&"DataSink"===E[C].classification?Object(M.jsx)(j.default,{padding:"l",children:Object(M.jsx)(c.l,{})}):!C||C&&!E[C]?Object(M.jsx)(c.i,{}):Object(M.jsxs)(M.Fragment,{children:[F&&!J&&Object(M.jsx)(c.b,{onButtonClick:w.createNewSession}),_&&Object(M.jsx)(j.default,{padding:"l",children:Object(M.jsx)(c.f,{awsError:D,statementError:A})}),Object(M.jsx)(ve,{selectedNodeId:C})]})}},2822:function(e,t,n){"use strict";n.d(t,"a",(function(){return te}));var a=n(171),o=n(103),r=n(207),i=n(0),s=n(61),c=n(283),l=n(137),u=n(2684),d=n(396),b=n(195),p=n(897),f=n(758),j=n(74),h=n(5),m=n(24),g=n(15),O=n(8),v=n(2),y=n(10),x=n.n(y),S=n(99),k=n(354),C=n(927),E=n(29),w=n(3),I=n(151),T=n.n(I),M=n(2797),N=n(14),L=n(426),R=n(58),D=L.b||N.d,A="https://".concat(D,"-").concat(N.c,".sparkui.gluestudio.aws.dev"),_={beta:A,gamma:A,prod:A},P=[{serviceName:"glue",apiVersion:"2020-01-20",models:Object(w.a)(Object(w.a)({},M),{},{operations:Object(w.a)({},M.operations),shapes:Object(w.a)({},M.shapes)})}],U=T.a,G=U.Service,F=U.apiLoader,B=N.c,q=Object(L.a)(_),J=P.map((function(e){var t=e.serviceName,n=e.apiVersion,a=e.models;return F.services[t]={},Object.defineProperty(F.services[t],n,{get:function(){return Object(w.a)({},a)},enumerable:!0,configurable:!0}),G.defineService(t,[n])})),V=new(0,Object(v.a)(J,1)[0])({credentials:R.a,region:B,endpoint:q}),W=n(76),z=n(153),H=n(923);var K=n(232),Q=n(756),Y=n(2767),X=n(1),Z=Object(i.memo)((function(e){var t=e.status,n=e.sparkPath,r=e.role,c=e.endTime,l=e.lastUpdated,u=e.fileNotFoundMessage,d=void 0===u?"File not found.":u,p=e.fileNotFoundAsWarning,f=void 0!==p&&p,j=Object(i.useRef)(null),y=Object(i.useState)(),w=Object(v.a)(y,2),I=w[0],T=w[1],M="/spark-ui/index.html#home",L=N.e?"".concat(null===N.e||void 0===N.e?void 0:N.e.getCdnUrl(N.e.getCustomContext("sparkuiAssetPath"))).concat(M):M,R="/spark-ui/static",D=N.e?"".concat(null===N.e||void 0===N.e?void 0:N.e.getCdnUrl(N.e.getCustomContext("sparkuiAssetPath"))).concat(R):R,A=Object(E.useSparkJob)(V,r,H.b).getSparkJob,_=Object(E.useSparkStage)(V,r,H.b).getSparkStage,P=Object(E.useSparkStageAttemptTaskSummary)(V,r,H.b).getSparkStageAttemptTaskSummary,U=Object(E.useSparkStageAttemptTaskList)(V,r,H.b).getSparkStageAttemptTaskList,G=Object(i.useRef)(!1),F=Object(i.useCallback)((function(e,t){var n,a,o,r,i={type:e,payload:t},s=N.e?"".concat(null===N.e||void 0===N.e?void 0:N.e.getCdnUrl(null===N.e||void 0===N.e?void 0:N.e.getCustomContext("sparkuiAssetPath"))):"http://localhost:3000/",c=new URL(s),l=N.e?c.origin:"*";null===j||void 0===j||null===(n=j.current)||void 0===n||null===(a=n.contentWindow)||void 0===a||a.postMessage(i,l),null===j||void 0===j||null===(o=j.current)||void 0===o||null===(r=o.contentWindow)||void 0===r||r.postMessage(i,"*")}),[j]),B=Object(i.useMemo)((function(){var e="".concat(n||"");return{path:e,inProgressPath:"".concat(e,".inprogress")}}),[n]),q=B.path,J=B.inProgressPath,Z=Object(i.useState)(t===Y.a.RUNNING?J:q),$=Object(v.a)(Z,2),ee=$[0],te=$[1],ne=Object(i.useState)((new Date).getTime()),ae=Object(v.a)(ne,2),oe=ae[0],re=ae[1],ie=Object(i.useState)((new Date).getTime()),se=Object(v.a)(ie,2),ce=se[0],le=se[1],ue=Object(i.useState)(0),de=Object(v.a)(ue,2),be=de[0],pe=de[1],fe=Object(i.useState)(0),je=Object(v.a)(fe,2),he=je[0],me=je[1],ge=Object(i.useMemo)((function(){return ee===J}),[ee,J]),Oe=t===Y.a.RUNNING,ve=Object(E.useJobRunSparkUIData)(W.s,V,W.i,ee,r,me,H.b),ye=ve.contentLength,xe=ve.parsingJobId,Se=ve.fileTooBigMessage,ke=ve.parsingStatus,Ce=ve.parsingStatusUpdatedAt,Ee=ve.loadingParsing,we=ve.loadingData,Ie=ve.fileNotFound,Te=ve.jobs,Me=ve.environment,Ne=ve.executors,Le=ve.networkError,Re=ve.networkErrorLabel,De=ve.parsingError,Ae=ve.reparseLogs,_e=ve.resourceId,Pe=Object(E.useGetStages)({glueSparkUIClient:V,role:r,resourceId:_e,parsingJobId:xe}).getStages,Ue=Object(i.useMemo)((function(){var e,t,n=null===Ne||void 0===Ne||null===(e=Ne.executors)||void 0===e||null===(t=e.at(0))||void 0===t?void 0:t.addTime;if(n){var a=new Date(n);return new Date(a.getTime()-6e4*a.getTimezoneOffset())}}),[null===Ne||void 0===Ne?void 0:Ne.executors]),Ge=Object(E.useSparkRequests)(V,xe,_e,r,H.b),Fe=Ge.getQueries,Be=Ge.getStorage,qe=Ge.getQuery,Je=Object(i.useCallback)((function(e,t){return function(n){var a=e.split(":"),o=Object(v.a)(a,3)[2];if("string"===typeof n){var r,i={},s=Object(O.a)(n.matchAll(/([^:]+):\s([^;]+);/g)),c={Service:"service","Status Code":"statusCode","Error Code":"code","Request ID":"requestId"},l=Object(g.a)(s);try{for(l.s();!(r=l.n()).done;){var u=r.value,d=u[1].trim(),b=u[2].trim();i[c[d]]=b}}catch(f){l.e(f)}finally{l.f()}var p=n.match(/^(.*?)\s*\(/);n&&(i.message=null===p||void 0===p?void 0:p[1].trim()),T({errorType:null!==t&&void 0!==t?t:o,retrievedError:i,displayError:n})}else T({errorType:null!==t&&void 0!==t?t:o,displayError:Se||n.message||"There was an error loading job run data",retrievedError:n})}}),[T,Se]);Object(i.useEffect)((function(){De&&!De.toLowerCase().includes("request")?T({displayError:De,errorType:"RequestLogParsingStatus",retrievedError:{message:De,code:"N/A",name:"N/A",time:new Date,requestId:"N/A"}}):Le||De?Je("awsgs:spark-ui:RequestJobs",Re)(De||Le):T(void 0)}),[Le,De,T,Re,Je]);var Ve=Object(i.useMemo)((function(){var e;return e={},Object(h.a)(e,E.SparkEventType.RouteChange,(function(e,t,n){F(e,{__seq:n})})),Object(h.a)(e,E.SparkEventType.Loading,(function(e,t,n){F(e,{__seq:n})})),Object(h.a)(e,E.SparkEventType.RequestApp,(function(e,t,n){var a=c&&Ue?new Date(c).valueOf()-new Date(Ue).valueOf():void 0,o="3.0.0-amzn-0",r={startTime:Ue,endTime:c,lastUpdated:l,duration:Object(b.f)(a),completed:!!c,sparkUser:"spark",appSparkVersion:o,startTimeEpoch:Ue?new Date(Ue).valueOf():void 0,lastUpdatedEpoch:l?new Date(l).valueOf():void 0,endTimeEpoch:c?new Date(c).valueOf():void 0,log:"/spark-ui/static/api/v1/applications/".concat(_e,"/logs"),durationMillisec:a,id:_e,name:_e,version:o,attemptUrl:"/spark-ui/static/history/".concat(_e,"/jobs/")};F(e,{selectedApp:r,__seq:n})})),Object(h.a)(e,E.SparkEventType.RequestJobs,(function(e,t,n){t.appId;var a={jobs:null===Te||void 0===Te?void 0:Te.jobs,executors:null===Ne||void 0===Ne?void 0:Ne.executors,environment:null===Me||void 0===Me?void 0:Me.environment,__seq:n};F(e,a)})),Object(h.a)(e,E.SparkEventType.RequestEnvironment,(function(e,t,n){F(e,{environment:null===Me||void 0===Me?void 0:Me.environment,__seq:n})})),Object(h.a)(e,E.SparkEventType.RequestStages,(function(e,t,n){Pe().then((function(t){F(e,{stages:t,__seq:n})}))})),Object(h.a)(e,E.SparkEventType.RequestExecutors,(function(e,t,n){F(e,{executors:null===Ne||void 0===Ne?void 0:Ne.executors,__seq:n})})),Object(h.a)(e,E.SparkEventType.RequestJob,(function(e,t,n){A(t.appId,t.jobId).then(function(){var a=Object(m.a)(x.a.mark((function a(o){var r,i,s,c,l,u,d,b,p;return x.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:i=(null===(r=o.job)||void 0===r?void 0:r.stageIds)||[],s=5,c=[],l=0;case 4:if(!(l<i.length)){a.next=15;break}return u=i.slice(l,l+s),d=u.map((function(e){return _(t.appId,e.toString())})),a.next=9,Promise.all(d);case 9:b=a.sent,p=b.flatMap((function(e){var t;return null!==(t=e.stageAttempts)&&void 0!==t?t:[]})),c=[].concat(Object(O.a)(c),Object(O.a)(p));case 12:l+=s,a.next=4;break;case 15:F(e,{job:o.job,stageAttempts:c,__seq:n});case 16:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()).catch(Je(E.SparkEventType.RequestJob))})),Object(h.a)(e,E.SparkEventType.RequestStage,(function(e,t,n){Promise.all([_(t.appId,t.stageId),P(t.appId,t.stageId,t.attemptId),U(t.appId,t.stageId,t.attemptId)]).then((function(t){var a=Object(v.a)(t,3),o=a[0],r=a[1],i=a[2].tasks,s=void 0===i?[]:i;F(e,{stageAttempts:o.stageAttempts,executors:null===Ne||void 0===Ne?void 0:Ne.executors,taskMetrics:r.taskMetrics,tasks:s,__seq:n})})).catch(Je(E.SparkEventType.RequestStage))})),Object(h.a)(e,E.SparkEventType.RequestQueries,(function(e,t,n){Fe().then((function(t){F(e,{queries:t.queries,__seq:n})})).catch(Je(E.SparkEventType.RequestQueries))})),Object(h.a)(e,E.SparkEventType.RequestStorage,(function(e,t,n){Be().then((function(t){F(e,{storage:t.storage,__seq:n})})).catch(Je(E.SparkEventType.RequestStorage))})),Object(h.a)(e,E.SparkEventType.RequestQuery,(function(e,t,n){qe(t.queryId).then((function(t){F(e,{query:t.query,__seq:n})})).catch(Je(E.SparkEventType.RequestQueries))})),Object(h.a)(e,E.SparkEventType.IFrameLoaded,(function(e,t,n){F(e,{root:encodeURIComponent(D),__seq:n}),G.current||(F(E.SparkEventType.RouteChange,{route:"history/".concat(_e,"/jobs")}),G.current=!0)})),Object(h.a)(e,E.SparkEventType.SendApp,(function(){})),e}),[F,Ue,c,l,_e,null===Te||void 0===Te?void 0:Te.jobs,null===Ne||void 0===Ne?void 0:Ne.executors,null===Me||void 0===Me?void 0:Me.environment,A,_,P,U,Fe,qe,D,Be,Pe,Je]),We=Object(i.useMemo)((function(){return new Set(Object.values(E.SparkEventType))}),[]),ze=Object(i.useCallback)((function(e,t){We.has(e)&&(Object(E.captureCustomAnalytics)(E.PanoramaEventType.VIEW,e,JSON.stringify(t)),z.b.addEvent({context:e,message:JSON.stringify(t)}))}),[We]);Object(i.useEffect)((function(){var e=function(e){var t,n=e.data,a=n.type,o=n.message,r=n.__seq;null===(t=Ve[a])||void 0===t||t.call(Ve,a,o,r),ze(a,o)};return window.addEventListener("message",e),function(){window.removeEventListener("message",e)}}),[j,F,Ve,ze]);var He=Object(i.useState)(!1),Ke=Object(v.a)(He,2),Qe=Ke[0],Ye=Ke[1],Xe=Object(i.useCallback)((function(){var e=(new Date).getTime();re(e),me(0),le(e),pe(0),Ye(!0),G.current=!1,I&&T(void 0)}),[T,I,Ye,le,pe,me]),Ze=Object(i.useCallback)((function(){Xe(),te(q),Ae()}),[Xe,te,q,Ae]),$e=Object(i.useCallback)((function(){Xe(),Ae()}),[Xe,Ae]),et=Object(i.useCallback)((function(){Oe?$e():Ze()}),[Oe,Ze,$e]),tt=Object(K.a)(Ce);Object(i.useEffect)((function(){Qe&&Ce!==tt&&Ye(!1)}),[tt,Qe,Ce]);var nt=!I&&(Qe||we||Ee),at=Object(K.a)(null===ke||void 0===ke?void 0:ke.parseProgress);Object(i.useEffect)((function(){null!==ke&&void 0!==ke&&ke.parseProgress&&ke.parseProgress!==at&&ke.parseProgress!==be&&ke.parseProgress>be&&pe(ke.parseProgress)}),[at,null===ke||void 0===ke?void 0:ke.parseProgress,be]);var ot=Object(K.a)(t);Object(i.useEffect)((function(){!nt&&ot&&ot!==t&&t===Y.a.SUCCEEDED&&I&&Ze()}),[nt,ot,t,Ze,I]);var rt=Object(i.useMemo)((function(){return Object(X.jsx)(E.RefreshButton,{disabled:nt,onRefresh:et,resourceName:"Reload Spark UI logs",ariaLabel:"Reload Spark UI logs",isRefreshing:nt})}),[nt,et]),it=Object(i.useMemo)((function(){return Object(E.getLoadingStage)({refreshing:Qe,downloadDataPercentage:he,parseProgress:be,parsingStatus:null===ke||void 0===ke?void 0:ke.status,jobs:Te})}),[he,null===ke||void 0===ke?void 0:ke.status,Qe,Te,be]),st=Object(K.a)(it);!function(e,t){var n=Object(i.useRef)();Object(i.useEffect)((function(){e&&(n.current=e)}),[e]),Object(i.useEffect)((function(){if(null!==t){var e=setInterval((function(){n.current()}),t);return function(){return clearInterval(e)}}}),[t])}((function(){re((new Date).getTime())}),"PREPARING_DOWNLOAD"===it||"PARSING_READ_FILE"===it||"PARSING_UPLOAD_FILES"===it?350:null),Object(i.useEffect)((function(){if(st!==it){var e=(new Date).getTime();e!==ce&&le(e)}}),[st,it,ce]);var ct=Object(i.useMemo)((function(){if(Ie){var e=ge?{type:"info",message:"Spark UI logs are not yet available. Use the refresh button to try again. Otherwise, data will appear automatically when the job completes.",action:rt}:{type:f?"warning":"error",message:d},n=e.action,r=e.message,i=e.type;return Object(X.jsx)(a.default,{statusIconAriaLabel:"Info",type:i,header:Object(X.jsx)(s.a,{id:"spark.ui.logsNotFound",defaultMessage:r,description:"Spark UI info message."}),action:n},"alert")}return I?Object(X.jsx)(a.default,{statusIconAriaLabel:Se?"warning":"Error",type:Se?"warning":"error",header:Object(X.jsx)(s.a,{id:"spark.ui.error",defaultMessage:"We encountered an issue trying to parse your Spark logs.",description:"Spark UI alert error message header."}),action:rt,children:Object(X.jsxs)(S.default,{direction:"vertical",size:"s",children:[Object(X.jsx)(o.default,{children:I.displayError}),Object(X.jsx)(k.a,{headerText:Object(X.jsx)(s.a,{id:"spark.ui.error.details",defaultMessage:"Error details",description:"Spark UI alert error details header."}),children:Object(X.jsxs)("ul",{children:[Object(X.jsxs)("li",{children:["ErrorType: ",I.errorType]}),Object(X.jsxs)("li",{children:["ErrorCode: ",I.retrievedError.code]}),Object(X.jsxs)("li",{children:["RequestID: ",I.retrievedError.requestId]}),Object(X.jsxs)("li",{children:["StatusCode: ",I.retrievedError.statusCode]}),Object(X.jsxs)("li",{children:["FileLocation:"," ",Object(X.jsx)(Q.a,{url:Object(E.getS3ViewHref)(ee),label:Object(X.jsx)(s.a,{id:"spark.ui.error.details.s3Url.view.label",defaultMessage:ee})})]})]})})]})},"alert"):nt?Object(X.jsx)(a.default,{type:"info",action:rt,children:ye?Object(X.jsx)(C.a,{value:Object(E.getFakeProgressPercentage)({contentLength:ye,updatedTime:oe,loadingStage:it,loadingStageLastChangeTime:ce,downloadDataPercentage:he,parseProgress:be}),label:Object(X.jsx)(s.a,{id:"spark.ui.info.loading",defaultMessage:"".concat(Object(E.getLoadingMessage)(it)),description:"Message to show data is loading."})}):Object(X.jsx)(s.a,{id:"spark.ui.info.loading",defaultMessage:"Parsing Spark UI logs",description:"Message to show data is loading."})},"alert"):ge?Object(X.jsx)(a.default,{type:t===Y.a.SUCCEEDED?"success":"info",action:rt,children:Object(X.jsx)(s.a,{id:"spark.ui.info.refreshMessage",defaultMessage:"".concat(Oe?"This job is still running.":"The job has finished."," Use the refresh button to get the latest available data."),description:"Message to show refresh action available."})},"alert"):void 0}),[d,f,Ie,ge,nt,rt,I,Oe,ye,ee,t,ce,it,he,oe,Se,be]);return Object(X.jsxs)(o.default,{children:[ct,!I&&!nt&&!Se&&Object(X.jsx)("iframe",{ref:j,className:ge?"running":"",title:"Spark UI",src:L,sandbox:Object(E.getSandboxValue)()})]})})),$=(n(2798),new Date(2023,10,20)),ee=$.getTime();function te(e){var t,n,h,m,g,O,v=e.jobRun,y=e.height,x=void 0===y?"100%":y,S=Object(p.a)().jobs,k=Object(u.a)(!0),C=k.roles,E=k.isFetched,w=k.hasNextPage,I=E&&!w,T=Object(i.useMemo)((function(){return null===S||void 0===S?void 0:S.find((function(e){return e.Name===(null===v||void 0===v?void 0:v.JobName)}))}),[null===v||void 0===v?void 0:v.JobName,S]),M=Object(l.l)(null===T||void 0===T?void 0:T.Role,C),N=null===v||void 0===v||null===(t=v.ExecutionArguments)||void 0===t?void 0:t[l.e.sparkPath],L="true"===(null===v||void 0===v||null===(n=v.ExecutionArguments)||void 0===n?void 0:n[j.a.SparkUIStandardPath]),R=v&&(!N||!L),D=(null===v||void 0===v||null===(h=v.GlueVersion)||void 0===h?void 0:h.startsWith("0"))||(null===v||void 0===v||null===(m=v.GlueVersion)||void 0===m?void 0:m.startsWith("1"))||(null===v||void 0===v||null===(g=v.GlueVersion)||void 0===g?void 0:g.startsWith("2")),A=!!T&&!Object(l.g)(null===(O=T.Command)||void 0===O?void 0:O.Name),_=(null===v||void 0===v?void 0:v.StartedOn)&&v.StartedOn.getTime()<ee||!1,P=_?"Job runs with Spark UI logs older than ".concat(Object(f.f)($)," cannot be parsed.  Please try again with a more recent job run."):"No Spark UI logs found for this job run.",U=Object(i.useMemo)((function(){var e=void 0,t=void 0;return A?(e="Spark UI was not enabled for this job type.",t="Spark UI can be enabled for future job runs"):D?(e="Spark UI is only available for job runs on Glue 3.0 and later.",t="The Glue version can be updated"):R&&(e="Spark UI logging was not enabled for this job run."),{unavailableReason:e,unavailable:!!e,solutionPrefix:t}}),[A,D,R]),G=U.unavailableReason,F=U.unavailable,B=U.solutionPrefix,q=!F&&!(null===v||void 0===v||!v.Id)&&!(null===T||void 0===T||!T.Role)&&!(null===v||void 0===v||!v.JobRunState)&&I,J=!F&&!q,V=Object(b.c)("glue-spark-container__wrapper",{block:J});return Object(X.jsxs)("div",{className:F?void 0:V,style:{height:F?void 0:x},children:[F&&Object(X.jsx)(a.default,{statusIconAriaLabel:"Info",type:"info",header:Object(X.jsx)(s.a,{id:"spark.ui.loggingNotEnabled",defaultMessage:G,description:"Spark UI info message.",children:function(e){return Object(X.jsxs)(o.default,{children:[e," ",!(null===T||void 0===T||!T.Name)&&B&&Object(X.jsxs)(X.Fragment,{children:[B," on the"," ",Object(X.jsx)(c.b,{to:"/editor/job/".concat(Object(d.a)(T.Name),"/details"),children:"job details"})," page."]})]})}})},"alert"),J&&Object(X.jsx)(r.a,{}),q&&Object(X.jsx)(Z,{status:v.JobRunState,sparkPath:"".concat(N).concat(v.Id),role:M,endTime:v.CompletedOn,lastUpdated:v.LastModifiedOn,fileNotFoundMessage:P,fileNotFoundAsWarning:_},v.Id)]})}},2823:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return ae}));var a=n(171),o=n(46),r=n(61),i=n(2697),s=n(2682),c=n(2),l=n(103),u=n(82),d=n(551),b=n(310),p=n(99),f=n(0),j=n(62),h=n(52),m=n(181),g=n(2706),O=n(50),v=n(253),y=n(30),x=n(1);function S(e){var t=e.sessionTimeout,n=e.setSessionTimeout,a=isNaN(Number(t))||Number(t)<20;return Object(x.jsx)(p.default,{size:"m",direction:"vertical",children:y.a.isEnabled("feature-session-time")&&Object(x.jsx)(l.default,{children:Object(x.jsx)(O.default,{label:"Session Time",description:"Enter the amount of time in minutes",stretch:!0,errorText:a?"The session time must be a positive integer with a minimum of 20 minutes.":void 0,children:Object(x.jsx)(v.default,{type:"number",invalid:a,value:"".concat(t),onChange:function(e){return n(Number(e.detail.value))},"data-e2e":"datapreviewModalSessionTimeoutInput"})})})})}n(2800);function k(){var e=Object(o.a)(),t=e.values.jobConfig,n=e.errors.dag,i=void 0===n?{}:n,O=Object.keys(i).length>0,v=Object(o.a)().setFieldValue,k=Object(f.useState)(!1),C=Object(c.a)(k,2),E=C[0],w=C[1],I=Object(s.b)(),T=I.sessionTime,M=I.setSessionTime,N=I.helpers,L=Object(f.useState)(t.role),R=Object(c.a)(L,2),D=R[0],A=R[1],_=Object(f.useState)(T),P=Object(c.a)(_,2),U=P[0],G=P[1],F=Object(f.useCallback)((function(){Object(j.unstable_batchedUpdates)((function(){v("jobConfig.role",D),M(U),N.createNewSession(),Object(h.e)(h.d.CLICK,"datapreview","initialized data preview","init"),w(!1)}))}),[v,D,M,U,N]),B="4.0"===t.version&&!y.a.isEnabled("feature-glue-4"),q=B,J=B?"Glue 4.0":"this region",V=function(){return Object(x.jsx)(a.default,{visible:!0,statusIconAriaLabel:"Info icon for data preview session",action:Object(x.jsx)(u.default,{formAction:"none",disabled:O,onClick:function(){return w(!0)},children:"Start data preview session"}),children:Object(x.jsx)(l.default,{children:Object(x.jsxs)("div",{className:"glue__data-preview-alert",children:[O?Object(x.jsx)(r.a,{id:"DataPreviewInitiate.invalid-nodes-detected",defaultMessage:"Some nodes are incomplete. Fill in the required fields in order to start a data preview session.",description:"First sentence for the datapreview block info if dag has invalid nodes."}):Object(x.jsx)(r.a,{id:"DataPreviewInitiate.info",defaultMessage:"To see a transformed sample of your data at each node, start a data preview session.",description:"Intro sentence for the datapreview block info"})," ",Object(x.jsx)(m.a,{id:"DatapreviewInitiate.info-details",defaultMessage:'Data previews use 2 DPU. Choose "End session" or navigate away from the job to end billing for the session.',description:"Detail info on data preview session start"})," ",Object(x.jsx)(d.a,{external:!0,externalIconAriaLabel:"Using data previews in the visual job editor (opens in new tab)",href:"https://docs.aws.amazon.com/glue/latest/ug/job-editor-features.html#data-previews",children:"Learn more"})]})})})},W=function(e){var t=e.reason;return Object(x.jsx)(a.default,{type:"warning",header:Object(x.jsx)(r.a,{id:"datapreview.unavailable.alert.header",defaultMessage:"Data preview not supported"}),children:Object(x.jsx)(r.a,{id:"datapreview.unavailable.alert.content",defaultMessage:"Data preview is not yet supported for ".concat(t,".")})})};return Object(x.jsxs)(x.Fragment,{children:[q?Object(x.jsx)(W,{reason:J}):null,q?null:Object(x.jsx)(V,{}),Object(x.jsx)(b.default,{onDismiss:function(){w(!1),A(void 0)},visible:E,closeAriaLabel:"Close modal",size:"medium",footer:Object(x.jsx)(l.default,{float:"right",children:Object(x.jsxs)(p.default,{direction:"horizontal",size:"xs",children:[Object(x.jsx)(u.default,{formAction:"none",variant:"link",onClick:function(){w(!1),A(void 0)},children:"Cancel"}),Object(x.jsx)(u.default,{disabled:!D||isNaN(Number(U))||Number(U)<20,formAction:"none",variant:"primary",onClick:F,"data-e2e":"datapreviewModalConfirmButton",children:"Confirm"})]})}),header:Object(x.jsx)(r.a,{id:"DataPreviewInitiateModal.header",defaultMessage:"Retrieve data preview"}),children:Object(x.jsxs)(p.default,{direction:"vertical",size:"m",children:[E?Object(x.jsx)(g.a,{selectedRole:D,setSelectedRole:A}):null,E?Object(x.jsx)(S,{sessionTimeout:U,setSessionTimeout:G}):null]})})]})}var C=n(2700),E=n(3),w=n(15),I=n(2584),T=n(552),M=n(281),N=n(550),L=n(284),R=n(399),D=n(2668),A=n(2730),_=n(498),P=n(232),U=n(882),G=n(195),F=n(755),B=n(2688),q=n(875),J=n(878),V=n(48),W=n(759),z=n(2671),H=n(146),K=n(170),Q=n(2696),Y=n(2735),X=n(2731),Z=Object(A.a)();function $(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1?arguments[1]:void 0,a=[],o=Object(w.a)(t);try{for(o.s();!(e=o.n()).done;){var r=e.value;r.previewField&&ee(r,a)}}catch(c){o.e(c)}finally{o.f()}if(0===a.length){var i,s=Object(w.a)(t.slice(0,n?50:5));try{for(s.s();!(i=s.n()).done;){ee(i.value,a)}}catch(c){s.e(c)}finally{s.f()}}return a}function ee(e,t){if("object"===e.type&&e.children){var n,a=Object(_.b)(e.children,(function(e){return"object"!==e.type}),(function(e){return"array"===e.type}));t.push(Object(D.c)((null!==(n=null===a||void 0===a?void 0:a.node)&&void 0!==n?n:e).fullPath))}else t.push(Object(D.c)(e.fullPath))}function te(e){var t=e.selectedNodeId,n=Object(s.b)().schemas,a=void 0===n?{}:n,o=Object(f.useState)({id:"0",value:"0",label:"Output 1"}),r=Object(c.a)(o,2),i=r[0],l=r[1],u=Object(f.useMemo)((function(){var e;return null!==(e=a[t])&&void 0!==e?e:[]}),[a,t]),d=Object(f.useMemo)((function(){var e;return null!==(e=u[+i.id])&&void 0!==e?e:[]}),[u,i.id]),b=JSON.stringify(d);return Object(x.jsx)(ne,{selectedNodeId:t,selectedFrame:i,setSelectedFrame:l},b)}function ne(e){var t=e.selectedNodeId,n=e.selectedFrame,i=e.setSelectedFrame,u=Object(o.a)().values,d=Object(V.a)("dag.".concat(t)),b=Object(c.a)(d,2)[1].error,j=Object(s.b)(),h=j.schemas,m=void 0===h?{}:h,g=j.preview,y=j.previewState,S=j.previewProgress,k=j.sessionStatus,w=j.error,A=j.shouldRestartSessionOnNewPythonPath,_=j.helpers,ee=j.sampleRows,te=j.setSampleRows,ne="READY"!==k||"RUNNING"===y||"WAITING"===y,ae=Object(z.b)().isResourcePanelAndPanelLayoutEnabled,oe=Object(f.useMemo)((function(){var e;return null!==(e=m[t])&&void 0!==e?e:[]}),[m,t]),re=Object(f.useMemo)((function(){var e;return null!==(e=oe[+n.id])&&void 0!==e?e:[]}),[oe,n.id]),ie=Object(f.useMemo)((function(){return Object(X.a)({dag:u.dag,preview:g,selectedNodeId:t,error:b})||[]}),[b,g,t,u.dag]),se=Object(f.useMemo)((function(){var e=Number(n.id);return ie?ie[e]:[]}),[ie,n.id]),ce=Object(f.useMemo)((function(){return ie.map((function(e,t){return{id:"".concat(t),value:"".concat(t),label:"Output ".concat(t+1)}}))}),[ie]),le=Object(f.useMemo)((function(){return $(re,ae)}),[ae,re]),ue=Object(P.a)(t),de=Object(f.useState)(le),be=Object(c.a)(de,2),pe=be[0],fe=be[1],je=Object(f.useState)(!1),he=Object(c.a)(je,2),me=he[0],ge=he[1];Object(f.useEffect)((function(){!me&&re.length>0&&(fe(le),ge(!0))}),[pe.length,re,me,ae,le]),Object(f.useEffect)((function(){t!==ue&&fe(le)}),[le,ue,t]);var Oe=Object(Q.a)(),ve=Object(f.useMemo)((function(){return"TIMEOUT"===k?Oe.sessionTimedOut:"READY"!==k?Oe.loadingSession:Oe.loadingPreview.replace("%currentProgress%",Z.format(S))}),[Oe.loadingPreview,Oe.sessionTimedOut,Oe.loadingSession,S,k]),ye=Object(f.useState)({wrapLines:!0,visibleContent:pe}),xe=Object(c.a)(ye,2),Se=xe[0],ke=xe[1],Ce=Object(U.a)(),Ee=Object(f.useMemo)((function(){return pe.map((function(e){return Object(E.a)(Object(E.a)({id:e,header:e},pe.length>0?{width:"".concat(1/pe.length*100,"%")}:{}),{},{cell:function(t){var n=e.toLowerCase(),a="object"===typeof t&&!(n in t)&&e in t,o=Object(D.b)(t,a?e:n);return"object"===typeof o&&(o=JSON.stringify(o)),o},ariaLabel:function(t){return K.i.columnHeaderLabel(e,t.sorted,t.descending)},sortingField:e})}))}),[pe]),we=Object(I.useCollection)(se||[],{filtering:{empty:"AVAILABLE"===y?Object(x.jsx)(W.a,{title:Object(x.jsx)(r.a,{id:"node.detail.tab.data-preview.table.empty.title",defaultMessage:"No data to display",description:"Title text to show when the data preview table has no data available for the current node."}),description:Object(x.jsx)(r.a,{id:"node.detail.tab.data-preview.table.empty.description",defaultMessage:"Try increasing the number of rows being sampled.",description:"Extra text to show when the data preview table has no data available for the current node."})}):null,noMatch:Object(x.jsx)(W.a,{title:Object(x.jsx)(r.a,{id:"node.detail.tab.data-preview.table.noMatch.title",defaultMessage:"No matches found",description:"Title text to show when the data preview table has no data matching the current filter."}),description:Object(x.jsx)(r.a,{id:"node.detail.tab.data-preview.table.noMatch.description",defaultMessage:"Your search terms did not match any sample.",description:"Extra text to show when the data preview table has no data matching the current filter."}),cta:Object(x.jsx)(r.a,{id:"node.detail.tab.data-preview.table.noMatch.cta",defaultMessage:"Clear search",description:"Button to clear the current filter for the data preview table when no match have been found."}),onCtaClick:function(){return Le.setFiltering("")}})},sorting:{}}),Ie=we.items,Te=we.filteredItemsCount,Me=we.collectionProps,Ne=we.filterProps,Le=we.actions,Re=ee,De=Object(f.useState)("".concat(Re)),Ae=Object(c.a)(De,2),_e=Ae[0],Pe=Ae[1],Ue=isNaN(Number(_e))||Number(_e)<1||Number(_e)>1e3,Ge=Ue?Oe.numberRowsError:void 0,Fe=Object(f.useCallback)((function(){var e=Ue?Re:Math.max(1,parseInt(_e));te(e),Pe("".concat(e))}),[Ue,Re,_e,te]),Be=Object(f.useCallback)((function(){Pe("".concat(ee))}),[ee]),qe=Object(B.d)("sample dataset"),Je=qe.preferencesMessages,Ve=qe.textFilterMessages,We=Object(q.b)("frame");if("SERVICE_ERROR"===k)return Object(x.jsx)(C.j,{onButtonClick:_.createNewSession,error:w});if(w)return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(a.default,{id:"datapreview-tab-container.alert.data-retrieval",type:"error",dismissible:!1,header:Object(x.jsx)(r.a,{id:"datapreview-tab-container.alert.data-retrieval-header",defaultMessage:"Unable to retrieve data preview.",description:"Title for error message when data preview runs into an error"}),buttonText:"Retry",onButtonClick:function(){return _.createNewSession()},children:Object(x.jsxs)("div",{className:"awsui-util-d-ib",children:[Object(x.jsxs)("em",{children:[w.errorName,":"]})," ",w.errorValue]})}),A&&Object(x.jsx)(C.h,{})]});var ze=Object(G.b)({"glue__no-container-padding":!ae});return Object(x.jsxs)("div",{className:ze,children:[A&&Object(x.jsx)(C.h,{}),Object(x.jsx)(L.default,Object(E.a)(Object(E.a)({},Me),{},{ariaLabels:Object(J.c)(pe[0]),columnDefinitions:Ee,resizableColumns:!0,firstIndex:1,header:Object(x.jsx)(M.a,{info:Object(x.jsx)(x.Fragment,{children:Object(x.jsx)(r.a,{id:"node.detail.tab.data-preview.table.header.linkAriaLabel",defaultMessage:"More information for 'Data preview' (shows in sidebar).",description:"Info panel link aria label for the title of the data preview table shown in the node detail panel.",children:function(e){return Object(x.jsx)(H.a,{contentKey:"data-previews-tab-hp",linkAriaLabel:e})}})}),counter:!!se&&" (".concat(se.length,")"),actions:re&&Object(x.jsxs)(p.default,{size:"m",direction:"horizontal",children:[ie.length>1&&Object(x.jsx)(N.a,Object(E.a)(Object(E.a)({},We),{},{disabled:!!ne,selectedOption:n,options:ce,onChange:function(e){var t=e.detail.selectedOption;i(t),fe($(oe[+t.id]||[],ae))}})),Object(x.jsx)(Y.a,{schema:re,selected:pe,onChange:fe})]}),children:Object(x.jsx)(r.a,{id:"node.detail.tab.data-preview.table.header",defaultMessage:"Data preview",description:"Title of the data preview table shown in the node detail panel."})}),renderAriaLive:Ce,loading:!!ne,loadingText:ve,items:Ie,filter:Object(x.jsx)(R.a,Object(E.a)(Object(E.a)(Object(E.a)({},Ne),Ve),{},{disabled:!!ne,countText:Object(F.a)(Te)})),preferences:Object(x.jsx)(T.a,{disabled:!!ne,title:Je.title,confirmLabel:Je.confirmLabel,cancelLabel:Je.cancelLabel,onConfirm:function(e){var t=e.detail;Fe(),ke(t)},onCancel:function(){Be()},preferences:Se,wrapLinesPreference:Je.wrapLinesPreference,customPreference:function(){return Object(x.jsx)(x.Fragment,{children:Object(x.jsx)(l.default,{children:Object(x.jsx)(O.default,{label:Oe.numberRowsLabel,description:Oe.numberRowsDescription,stretch:!0,errorText:Ge,children:Object(x.jsx)(v.default,{type:"number",invalid:Ue,value:_e,onChange:function(e){return Pe(e.detail.value)}})})})})}}),stickyHeader:!0,stickyHeaderVerticalOffset:-15,wrapLines:Se.wrapLines}))]})}function ae(e){var t=e.selectedNodeId,n=Object(o.a)().values.dag,c=Object(s.b)(),l=c.sessionStatus,u=c.helpers,d="IDLE"===l,b="TIMEOUT"===l;return Object(i.d)(n)?Object(x.jsx)(a.default,{id:"datapreview-tab-wrapper.alert.unsupported-source",type:"info",dismissible:!1,header:Object(x.jsx)(r.a,{id:"datapreview-tab-wrapper.alert.unsupported-source.header",defaultMessage:"Unsupported sources detected.",description:"Title for alert when unsupported sources are used"}),children:Object(x.jsx)("div",{className:"awsui-util-d-ib",children:Object(x.jsx)(r.a,{id:"datapreview-tab-wrapper.alert.unsupported-source.content",defaultMessage:"Data preview is not available for Kinesis, Kafka, and custom connection sources.",description:"Content for alert when unsupported sources are used"})})}):d?Object(x.jsx)(k,{}):b?Object(x.jsx)(C.k,{onButtonClick:u.createNewSession}):!t||t&&!n[t]?Object(x.jsx)(C.i,{}):Object(x.jsx)(te,{selectedNodeId:t})}},2826:function(e,t,n){"use strict";var a=n(2),o=n(61),r=n(146),i=n(3),s=n(0),c=n(2588),l=n(14),u=n(195),d=n(396),b=n(41),p=n(2703),f=n(2704),j=n(30),h={style:"polarisCard",addToDashboardEnabled:!1},m=function(){return Object(u.e)()<992?1:2},g=function(e,t,n){var o=Object(b.j)(),r=o.jobName,u=o.runId,g=Object(d.b)(r),O=Object(p.a)(g,u).data,v=Object(s.useState)(),y=Object(a.a)(v,2),x=y[0],S=y[1],k=Object(s.useState)(m()),C=Object(a.a)(k,2),E=C[0],w=C[1],I=Object(s.useCallback)((function(n){if(n&&!x){var a=t.displayMode,o=t.height,r=t.marginX,s=t.marginY,u=Object(i.a)({displayMode:a,heightUnit:o,widgetMarginX:r,widgetMarginY:s},h),d=new c.Dashboard(n,e,l.c,u,{});S(d)}}),[e,t,x,S]);return Object(s.useEffect)((function(){var e=function(){return w(m())};return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}),[w]),Object(s.useEffect)((function(){null===x||void 0===x||x.update(j.a.isEnabled("feature-monitoring-resource-usage")?function(e,t,n){if(!t||!n)return{start:"-P3H",periodOverride:"auto",widgets:e};var a=new Date(t.getTime()-f.b).toISOString(),o=new Date(n.getTime()+f.b).toISOString();return{start:a,end:o,periodOverride:"auto",widgets:e}}(n,null===O||void 0===O?void 0:O.StartedOn,null===O||void 0===O?void 0:O.CompletedOn):{widgets:n},{widgetHeightInUnits:6,widgetsPerRow:E})}),[x,n,null===O||void 0===O?void 0:O.CompletedOn,null===O||void 0===O?void 0:O.StartedOn,E]),Object(s.useEffect)((function(){return function(){return null===x||void 0===x?void 0:x.release()}}),[x]),[x,I]};var O=n(354),v=n(1),y={displayMode:"static",height:30,marginX:20,marginY:20};t.a=function(e){var t=e.cloudWatchMetricsWidgets,n=e.isExpanded,i=void 0===n||n,s=g("cwDashboard",y,t),c=Object(a.a)(s,2)[1];return Object(v.jsx)(O.a,{variant:"container",defaultExpanded:i,headerInfo:Object(v.jsx)(o.a,{id:"monitoring.jobRun.jobRunMetrics.header.linkAriaLabel",defaultMessage:"More information for 'Metrics' (shows in sidebar).",description:"Info panel link aria label for the metrics panel header of job run details.",children:function(e){return Object(v.jsx)(r.a,{contentKey:"monitoring-job-runs-metrics-hp",linkAriaLabel:e})}}),headerText:Object(v.jsx)(o.a,{id:"monitoring.jobRun.jobRunMetrics.header",defaultMessage:"Metrics",description:"Header for metrics panel of job run details"}),children:Object(v.jsx)("div",{ref:c})})}},2868:function(e,t,n){e.exports={PanelGroupWrapper:"shared_PanelGroupWrapper__2-VWj",PanelGroup:"shared_PanelGroup__hyIOb",Panel:"shared_Panel__3YeIj",PanelColumn:"shared_PanelColumn__3_zpS",PanelRow:"shared_PanelRow__2ANhw",PanelRowScroll:"shared_PanelRowScroll__1WVcQ",Centered:"shared_Centered__CH7DY",Single:"shared_Single__1uCu7",Notification:"shared_Notification__S1m12",Overflow:"shared_Overflow__34Wxy",Button:"shared_Button__3tC4m",ButtonDisabled:"shared_ButtonDisabled__1gPyN",Buttons:"shared_Buttons__zvlkU",Capitalize:"shared_Capitalize__1zYXQ",WarningBlock:"shared_WarningBlock__3ndPd"}},2869:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var a=n(2623),o=(n(0),n(1));function r(e){var t=e.errors;return t>0?Object(o.jsxs)(a.a,{className:"glue__visual-editor-error-badge",color:"red",children:[Object(o.jsx)("span",{className:"awsui-util-hide",children:","}),t,Object(o.jsx)("span",{className:"awsui-util-hide",children:"validation errors"})]}):null}},2870:function(e,t,n){"use strict";n.d(t,"a",(function(){return O}));var a=n(2),o=n(171),r=n(46),i=n(0),s=n(351),c=n(61),l=n(922),u=n(136),d=n(2665),b=n(52),p=n(2871),f=n(195),j=n(2671),h=n(2678),m=(n(2769),n(2699)),g=n(1);function O(){var e=Object(s.a)(),t=Object(r.a)().values,n=Object(i.useContext)(h.a).replace,O=Object(m.a)(p.a),v=Object(a.a)(O,3),y=v[0],x=v[2],S=Object(j.b)().isResourcePanelAndPanelLayoutEnabled,k="VISUAL_MODE"===t.jobConfig.jobMode,C=Object(d.b)((function(e){return{showRestoreAlert:e.showRestoreAlert,setShowRestoreAlert:e.setShowRestoreAlert}}),u.shallow),E=C.showRestoreAlert,w=C.setShowRestoreAlert,I=Object(f.c)("glue__alert",{visible:E}),T=Object(i.useCallback)((function(){Object(b.e)(b.d.CLICK,"UnsavedChangesAlert","Remove"),x(),w(!1)}),[x,w]),M=Object(i.useCallback)((function(){Object(b.e)(b.d.CLICK,"UnsavedChangesAlert","Restore"),y&&(n(y),x(),w(!1))}),[n,x,w,y]);return Object(i.useEffect)((function(){S&&E&&k&&Object(l.b)("Unsaved job found",{description:"We found an unsaved job, do you wish to restore it?",duration:1/0,action:{label:"Restore",onClick:M}})}),[E,S,M,k]),k?S?null:Object(g.jsx)("div",{className:I,"aria-live":"assertive","aria-atomic":"true",children:E&&Object(g.jsx)(o.default,{statusIconAriaLabel:"Info icon, unsaved job found",onButtonClick:M,onDismiss:T,header:Object(g.jsx)(c.a,{id:"jobs.edit.draftDetected.header",defaultMessage:"Unsaved job found",description:"Title of the alert displayed when a previous unsaved draft is detected."}),buttonText:Object(g.jsx)(c.a,{id:"jobs.edit.draftDetected.button",defaultMessage:"Restore",description:"Title of the button to restore a previously unsaved draft."}),dismissible:!0,visible:E,dismissAriaLabel:e.formatMessage({id:"jobs.edit.draftDetected.dismiss",defaultMessage:"Dismiss restore dag alert",description:"Button to dismiss the alert displayed when a previous unsaved draft is detected."}),children:Object(g.jsx)(c.a,{id:"jobs.edit.draftDetected.content",defaultMessage:"We found an unsaved job, do you wish to restore it?",description:"Content of the alert displayed when a previous unsaved draft is detected."})})}):null}},2871:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var a="glue-studio-temporary"},2872:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var a=function(e){return function(e){return"DataSource"===e.classification&&"DBB"===e.type&&!1===e.isCatalog||"DataSource"===e.classification&&("RDS"===e.type||"MySQL"===e.type||"Redshift"===e.type||"PostgresSQL"===e.type||"OracleSQL"===e.type||"SQLServer"===e.type)&&!1===e.isCatalog}(e)||function(e){return!(!e||"Transform"!==e.classification)&&-1!==["Union","DropNullFields","Aggregate","Merge"].indexOf(e.type)}(e)||function(e){return!(!e||"DataSource"!==e.classification)&&("Kafka"===e.type||"Kinesis"===e.type)&&!1===e.isCatalog}(e)}},2882:function(e,t,n){"use strict";n.d(t,"a",(function(){return Ht}));var a=n(3),o=n(2),r=n(103),i=n(82),s=n(553),c=n(233),l=n(99),u=n(46),d=n(0),b=n.n(d),p=n(61),f=n(41),j=n(2665),h=n(52),m=n(30),g=n(124),O=n(195),v=n(1108),y=n(849),x=n(310),S=n(24),k=n(10),C=n.n(k),E=n(2717),w=function(){var e=Object(u.a)(),t=e.values,n=e.setValues,o=Object(E.d)(),r=o.pullFromRepository,i=o.pushToRepository,s=Object(d.useCallback)((function(){var e=document.createElement("input");e.setAttribute("accept","application/JSON"),e.setAttribute("type","file"),e.style.setProperty("display","none"),e.addEventListener("change",function(){var t=Object(S.a)(C.a.mark((function t(a){var o,r,i,s;return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!((o=a.target.files)&&o.length>0)){t.next=8;break}return r=o[0],t.next=5,r.text();case 5:i=t.sent,s=JSON.parse(i),n(s);case 8:e.remove();case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),e.addEventListener("blur",(function(){e.remove()})),document.body.appendChild(e),e.click()}),[n]);return{handleDownload:Object(d.useCallback)((function(){var e=function(e){return Object(a.a)(Object(a.a)({},e),{hasBeenSaved:!1,jobConfig:Object(a.a)(Object(a.a)({},e.jobConfig),{lastModified:void 0})})}(t);Object(O.j)("".concat(e.jobConfig.name,".json"),e,"text/plain")}),[t]),handleUpload:s,pullFromRepository:r,pushToRepository:i}},I=n(2732),T=n(402),M=n(1),N=function(){return Object(M.jsx)(p.a,{id:"pushToRepo.alert.vcs",defaultMessage:"Please configure version control details for the job using the {tab} tab before attempting to push to a repository. Make sure that a {vcs}, {repo} and a {branch} is selected.",values:{tab:Object(M.jsx)("strong",{children:"Version Control"}),vcs:Object(M.jsx)("strong",{children:"version control system"}),repo:Object(M.jsx)("strong",{children:"repository"}),branch:Object(M.jsx)("strong",{children:"branch"})}})},L=function(){return Object(M.jsx)(p.a,{id:"pushToRepo.alert.repo",defaultMessage:"Cannot push to repository because a {repo} has not been selected. Please select a repository using the {tab} tab.",values:{repo:Object(M.jsx)("strong",{children:"repository"}),tab:Object(M.jsx)("strong",{children:"Version Control"})}})},R=function(){return Object(M.jsx)(p.a,{id:"pushToRepo.alert.branch",defaultMessage:"Cannot push to repository because a {branch} has not been selected. Please select a repository using the {tab} tab.",values:{branch:Object(M.jsx)("strong",{children:"branch"}),tab:Object(M.jsx)("strong",{children:"Version Control"})}})},D=function(e){var t=e.sourceControlDetails;return Object(M.jsx)(p.a,{id:"pushToRepo.confirm",defaultMessage:"Are you sure you want to push your job to {repo} using {target}. This operation will create a new commit in the repository using the latest job that is saved in AWS Glue.",values:{repo:Object(M.jsx)("strong",{children:Object(I.c)(t.Provider)}),target:Object(M.jsxs)("strong",{children:[t.Repository,"/",t.Branch]})}})},A=function(e){var t=e.sourceControlDetails;return Object(M.jsx)(p.a,{id:"pushToRepo.confirm",defaultMessage:"Are you sure you want to pull from {repo} using {target}. This operation will take the latest commit from the repository and update your job in AWS Glue.",values:{repo:Object(M.jsx)("strong",{children:Object(I.c)(t.Provider)}),target:Object(M.jsxs)("strong",{children:[t.Repository,"/",t.Branch]})}})},_=function(e){var t=e.sourceControlDetails;return void 0===t||"NONE"===t.Provider?Object(M.jsx)(N,{}):t.Repository?t.Branch?Object(M.jsx)(D,{sourceControlDetails:t}):Object(M.jsx)(R,{}):Object(M.jsx)(L,{})},P=function(e){var t=e.sourceControlDetails;return void 0===t||"NONE"===t.Provider?Object(M.jsx)(N,{}):t.Repository?t.Branch?Object(M.jsx)(A,{sourceControlDetails:t}):Object(M.jsx)(R,{}):Object(M.jsx)(L,{})},U=function(e){var t=e.details,n=e.jobName;return t&&"NONE"!==t.Provider&&t.Repository&&t.Branch?Object(M.jsxs)(T.a,{columns:6,variant:"text-grid",children:[Object(M.jsxs)("div",{children:[Object(M.jsx)(r.default,{variant:"awsui-key-label",children:"Version control system"}),Object(M.jsx)("div",{children:Object(I.c)(t.Provider)})]}),Object(M.jsxs)("div",{children:[Object(M.jsx)(r.default,{variant:"awsui-key-label",children:"Repository"}),Object(M.jsx)("div",{children:t.Repository})]}),Object(M.jsxs)("div",{children:[Object(M.jsx)(r.default,{variant:"awsui-key-label",children:"Branch"}),Object(M.jsx)("div",{children:t.Branch})]}),Object(M.jsxs)("div",{children:[Object(M.jsx)(r.default,{variant:"awsui-key-label",children:"Folder"}),Object(M.jsx)("div",{children:t.Folder||n})]})]}):null},G=n(171),F=function(e){var t=e.job,n=t.name,a=t.sourceControlDetails,o=e.onDismiss,s=w().pullFromRepository,c=Object(d.useCallback)((function(){a&&(Object(h.e)(h.d.CLICK,"VersionControl","PullFromRepositoryConfirm",null===a||void 0===a?void 0:a.Provider),s(n,a)),o()}),[s,n,a,o]);return Object(M.jsx)(x.default,{onDismiss:e.onDismiss,visible:e.isVisible,size:"medium",header:Object(M.jsx)(p.a,{id:"PullFromRepositoryModal.action.header",defaultMessage:"Pull from repository"}),footer:Object(M.jsx)(r.default,{float:"right",children:Object(M.jsxs)(l.default,{direction:"horizontal",size:"xs",children:[Object(M.jsx)(i.default,{formAction:"none",variant:"link",onClick:e.onDismiss,children:Object(M.jsx)(p.a,{id:"PullFromRepositoryModal.action.cancel",defaultMessage:"Cancel"})}),Object(M.jsx)(i.default,{formAction:"none",variant:"primary",onClick:c,disabled:void 0===(null===a||void 0===a?void 0:a.Provider)||"NONE"===(null===a||void 0===a?void 0:a.Provider)||[a.Repository,a.Branch].some((function(e){return void 0===e})),children:Object(M.jsx)(p.a,{id:"PullFromRepositoryModal.action.confirm",defaultMessage:"Confirm"})})]})}),children:Object(M.jsxs)(l.default,{size:"xxl",children:[Object(M.jsx)(U,{details:a,jobName:n}),Object(M.jsx)(G.default,{type:"warning",children:Object(M.jsx)(P,{sourceControlDetails:a})})]})})},B=function(e){var t=e.job,n=t.name,a=t.sourceControlDetails,o=e.onDismiss,s=w().pushToRepository,c=Object(d.useCallback)((function(){a&&(Object(h.e)(h.d.CLICK,"VersionControl","PushToRepositoryConfirm",null===a||void 0===a?void 0:a.Provider),s(n,a)),o()}),[s,n,a,o]);return Object(M.jsx)(x.default,{onDismiss:e.onDismiss,visible:e.isVisible,size:"medium",header:Object(M.jsx)(p.a,{id:"PushToRepositoryModal.action.header",defaultMessage:"Push to repository"}),footer:Object(M.jsx)(r.default,{float:"right",children:Object(M.jsxs)(l.default,{direction:"horizontal",size:"xs",children:[Object(M.jsx)(i.default,{formAction:"none",variant:"link",onClick:e.onDismiss,children:Object(M.jsx)(p.a,{id:"PushToRepositoryModal.action.cancel",defaultMessage:"Cancel"})}),Object(M.jsx)(i.default,{formAction:"none",variant:"primary",onClick:c,disabled:!e.hasBeenSaved||void 0===(null===a||void 0===a?void 0:a.Provider)||"NONE"===(null===a||void 0===a?void 0:a.Provider)||[a.Repository,a.Branch].some((function(e){return void 0===e})),children:Object(M.jsx)(p.a,{id:"PushToRepositoryModal.action.confirm",defaultMessage:"Confirm"})})]})}),children:Object(M.jsxs)(l.default,{size:"xxl",children:[Object(M.jsx)(U,{details:a,jobName:n}),Object(M.jsxs)(G.default,{type:"warning",children:[!e.hasBeenSaved&&Object(M.jsx)(p.a,{id:"pushToRepoUnsaved",defaultMessage:"Since you are authoring a new AWS Glue job, please save the job first and retry. Once a job is saved, subsequent pushes to repository {requirement} a save.",values:{requirement:Object(M.jsx)("strong",{children:"will not require"})}}),e.hasBeenSaved&&Object(M.jsx)(_,{sourceControlDetails:a})]})]})})},q=(n(2952),n(351)),J=function(){var e,t,n,a=Object(u.a)(),r=a.values,i=r.jobConfig.name,s=r.hasBeenSaved,l=a.errors,b=a.touched,p=a.setFieldValue,f=Object(d.useState)(i),j=Object(o.a)(f,2),h=j[0],m=j[1],g=Object(q.a)(),v=Object(d.useRef)(null),y=Object(d.useState)("0px"),x=Object(o.a)(y,2),S=x[0],k=x[1],C=null===l||void 0===l||null===(e=l.jobConfig)||void 0===e||null===(t=e.name)||void 0===t?void 0:t.props,E=Object(O.c)("glue__editable-title",{error:!!C&&!(null===b||void 0===b||null===(n=b.jobConfig)||void 0===n||!n.name)});return Object(d.useEffect)((function(){m(i)}),[m,i]),Object(d.useEffect)((function(){var e,t=null===v||void 0===v||null===(e=v.current)||void 0===e?void 0:e.offsetWidth;k("".concat(t?t+10:10,"px"))}),[v,h]),s?Object(M.jsx)("h2",{children:i}):Object(M.jsxs)("span",{children:[Object(M.jsx)("input",{name:"jobConfig.name",className:E,"aria-label":C?g.formatMessage(C):"Job Title","aria-invalid":!!C,style:{width:S},onBlur:function(e){var t=e.target.value;p("jobConfig.name",t)},onChange:function(e){var t=e.target.value;m(t)},value:h}),Object(M.jsx)("span",{className:"glue__editable-icon-container",role:"img","aria-hidden":!0,children:Object(M.jsx)(c.a,{name:"edit"})}),Object(M.jsx)("h2",{className:"glue__editable-hidden-title",ref:v,"aria-hidden":!0,children:h})]})},V=n(2671),W=n(891),z=n(5),H=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={};return Object.keys(e).forEach((function(t){var o=e[t];if(!(!1===Boolean(o))){var r=t.startsWith("--"),i=t.startsWith("--enable")?o.toString():o;if(r){var s=Object(z.a)({},t,i),c=n.Arguments||{},l=Object(a.a)(Object(a.a)({},c),s);n.Arguments=l}else n[t]=i}})),n.Arguments=Object(a.a)(Object(a.a)({},n.Arguments),t.Arguments||{}),n},K=n(50),Q=n(354),Y=function(e){return Object(M.jsx)(Q.a,{expanded:e.expanded,onChange:function(t){var n=t.detail;return e.onCollapseChange(e.index,n.expanded)},header:e.header,children:e.children})},X=n(550),Z=n(74),$=[{label:"Enable",value:"job-bookmark-enable"},{label:"Pause",value:"job-bookmark-pause"},{label:"Disable",value:"job-bookmark-disable"}],ee=Z.a.JobBookmarkOption,te=function(e){var t=Object(u.a)().values,n=$.find((function(e){return e.value===t.jobConfig.bookmark}))||$[0],a=b.a.useState(n),r=Object(o.a)(a,2),i=r[0],s=r[1],c=e.onChange,l=b.a.useCallback((function(e){var t=Object(z.a)({},ee,e.value);c(t),s(e)}),[c]);return Object(M.jsx)(X.a,{selectedOption:i,filteringType:"auto",triggerVariant:"option",options:$,onChange:function(e){var t=e.detail;l(t.selectedOption)}})},ne=n(400),ae=n(2681),oe=Z.a.EnableMetrics,re=function(e){var t=Object(u.a)().values,n=e.onChange,a=Object(ae.e)(oe,!!t.jobConfig.metrics,n),o=a.value,r=a.handleChange;return Object(M.jsx)(ne.a,{checked:o,onChange:function(e){var t=e.detail;return r(t.checked)},children:"Job metrics"})},ie=Z.a.EnableContinuousCloudwatchLog,se=function(e){var t=Object(u.a)().values,n=e.onChange,a=Object(ae.e)(ie,!!t.jobConfig.logging,n),o=a.value,r=a.handleChange;return Object(M.jsx)(ne.a,{checked:o,onChange:function(e){var t=e.detail;return r(t.checked)},children:"Continuous logging"})},ce=function(e){var t=Object(u.a)().values,n=e.onChange,a=Object(d.useState)(t.jobConfig.spark||!1),r=Object(o.a)(a,2),i=r[0],s=r[1],c=Object(ae.f)(n).updateFlags,l=Object(d.useCallback)((function(e){var t=e.detail.checked;s(t),c(!1,!!t)}),[c,s]);return Object(M.jsx)(ne.a,{checked:i,onChange:l,children:ae.b})},le=n(282),ue=n(137),de=ue.e.sparkPath,be=function(e){var t=Object(u.a)().values.jobConfig.sparkPath||"",n=e.onChange,a=Object(ae.e)(de,t,n),o=a.value,r=a.handleChange;return Object(M.jsx)(le.a,{value:o,autoComplete:!1,onChange:function(e){var t=e.detail;return r(t.value)}})},pe=Z.a.ExtraPyFiles,fe=function(e){var t=Object(u.a)().values.jobConfig.pythonPath||"",n=e.onChange,a=Object(ae.e)(pe,t,n),o=a.value,r=a.handleChange;return Object(M.jsx)(le.a,{value:o,autoComplete:!1,onChange:function(e){var t=e.detail;return r(t.value)}})},je=Z.a.ExtraFiles,he=function(e){var t=Object(u.a)().values.jobConfig.referencedPath||"",n=e.onChange,a=Object(ae.e)(je,t,n),o=a.value,r=a.handleChange;return Object(M.jsx)(le.a,{value:o,autoComplete:!1,onChange:function(e){var t=e.detail;return r(t.value)}})},me=Z.a.ExtraJars,ge=function(e){var t=Object(u.a)().values.jobConfig.dependentPath||"",n=e.onChange,a=Object(ae.e)(me,t,n),o=a.value,r=a.handleChange;return Object(M.jsx)(le.a,{value:o,autoComplete:!1,onChange:function(e){var t=e.detail;return r(t.value)}})},Oe=n(8),ve=n(914),ye=Z.a.SecurityConfiguration,xe={label:"None",value:"none"},Se=function(e){return{label:e.Name,value:e.Name}},ke=function(e){var t=Object(u.a)().values,n=e.onChange,a=Object(ve.a)(),r=[xe].concat(Object(Oe.a)(a.map(Se))),i=r.find((function(e){return e.label===t.jobConfig.security}))||xe,s=b.a.useState(i),c=Object(o.a)(s,2),l=c[0],d=c[1],p=b.a.useCallback((function(e){var t=Object(z.a)({},ye,e.value);n(t),d(e)}),[n]);return Object(M.jsx)(X.a,{selectedOption:l,filteringType:"auto",triggerVariant:"option",options:r,onChange:function(e){var t=e.detail;p(t.selectedOption)}})},Ce=Z.a.EncryptionType,Ee=function(e){var t=Object(u.a)().values,n=b.a.useState(!!t.jobConfig.serverEncryption),a=Object(o.a)(n,2),r=a[0],i=a[1],s=e.onChange,c=b.a.useCallback((function(e){var t=Object(z.a)({},Ce,e?"sse-s3":"");i(e),s(t)}),[s]);return Object(M.jsx)(ne.a,{checked:r,onChange:function(e){var t=e.detail;c(t.checked)},children:"Server-side encryption"})},we=n(2801),Ie=Z.a.WorkerType,Te=function(e){var t,n=Object(u.a)().values,r=Object(d.useMemo)((function(){return Object(we.c)(n.jobConfig).map((function(e){return Object(a.a)(Object(a.a)({},e),{},{value:e.id})}))}),[n.jobConfig]),i=r.find((function(e){return e.id===n.jobConfig.workerType}))||r[0],s=b.a.useState(i),c=Object(o.a)(s,2),l=c[0],p=c[1],f=e.onChange,j=b.a.useCallback((function(t){var a,o,r,i=(r={},Object(z.a)(r,Ie,t.value),Object(z.a)(r,Z.a.NumberOfWorkers,(null===(a=e.updatedJobParameters)||void 0===a?void 0:a.NumberOfWorkers)||(null===(o=n.jobConfig.numberOfWorkers)||void 0===o?void 0:o.toString())),r);f(i),p(t)}),[n.jobConfig.numberOfWorkers,f,null===(t=e.updatedJobParameters)||void 0===t?void 0:t.NumberOfWorkers]);return Object(M.jsx)(X.a,{selectedOption:l,filteringType:"auto",triggerVariant:"option",options:r,onChange:function(e){var t=e.detail;j(t.selectedOption)}})},Me=Z.a.NumberOfWorkers,Ne=Z.a.WorkerType,Le=function(e){var t,n=Object(u.a)().values,a="".concat(n.jobConfig.numberOfWorkers||"10"),o=e.onChange,r=Object(d.useCallback)((function(t){var a,o;return o={},Object(z.a)(o,Me,t),Object(z.a)(o,Ne,(null===(a=e.updatedJobParameters)||void 0===a?void 0:a.WorkerType)||n.jobConfig.workerType),o}),[n.jobConfig.workerType,null===(t=e.updatedJobParameters)||void 0===t?void 0:t.WorkerType]),i=Object(ae.e)(Me,a,o,r),s=i.value,c=i.handleChange;return Object(M.jsx)(le.a,{type:"number",value:s,onChange:function(e){var t=e.detail;return c(t.value)}})},Re=Z.a.Timeout,De=function(e){var t=Object(u.a)().values,n="".concat(t.jobConfig.timeout||"2880"),a=e.onChange,o=Object(ae.e)(Re,n,a),r=o.value,i=o.handleChange;return Object(M.jsx)(le.a,{type:"number",value:r,onChange:function(e){var t=e.detail;return i(t.value)}})},Ae=Z.a.DelayNotificationThreshold,_e=function(e){var t=Object(u.a)().values,n=e.onChange,a="".concat(t.jobConfig.delay||""),o=Object(ae.e)(Ae,a,n,(function(e){return{NotificationProperty:Object(z.a)({},Ae,e)}})),r=o.value,i=o.handleChange;return Object(M.jsx)(le.a,{type:"number",value:r,onChange:function(e){var t=e.detail;return i(t.value)}})},Pe=n(29),Ue=(Z.a.EnableJobQueuing,function(e){var t=b.a.useState({}),n=Object(o.a)(t,2),r=n[0],i=n[1],s=b.a.useCallback((function(t){var n=Object(a.a)(Object(a.a)({},r),t);i(n),e(n)}),[r,i,e]);return{value:r,handleChange:s}}),Ge=function(e){var t=Ue(e.onChange).handleChange;return Object(M.jsx)(Y,{index:e.index,header:e.header,onCollapseChange:e.onCollapseChange,expanded:e.expanded,children:Object(M.jsx)(K.default,{description:"Specifies how AWS Glue processes job bookmark when the job runs. It can remember previously processed data (Enable), update state information (Pause), or ignore state information (Disable).",label:"Job bookmark",children:Object(M.jsx)(te,{onChange:t})})})},Fe=n(311),Be=n(2819),qe=function(e){var t=Object(u.a)().values,n=e.onChange,a=Object(d.useState)(t.jobConfig.sparkConfiguration||null),r=Object(o.a)(a,2),i=r[0],s=r[1],c=Object(ae.f)(n).updateFlags,l=Object(d.useCallback)((function(e){var t=e.detail.value;s(t),"both"===t?c(!0,!0):"legacy"===t?c(!0,!1):c(!1,!0)}),[c,s]);return Object(M.jsx)(Fe.default,{value:i,items:Be.a,onChange:l})},Je=Z.a.EnableObservabilityMetrics,Ve=function(e){var t=Object(u.a)().values,n=e.onChange,a=Object(ae.e)(Je,!!t.jobConfig.observabilityMetrics,n),o=a.value,r=a.handleChange;return Object(M.jsx)(ne.a,{checked:o,onChange:function(e){var t=e.detail;r(t.checked),Object(Pe.captureCustomAnalytics)(Pe.PanoramaEventType.CLICK,"JobObservabilityMetricsCheckbox",t.checked?"ObservabilityMetricsEnabled":"ObservabilityMetricsDisabled")},children:"Job observability metrics"})},We=function(e){var t=Ue(e.onChange),n=t.handleChange,a=t.value,r=Object(u.a)().values,i=Object(d.useMemo)((function(){return Object(ue.g)(r.jobConfig.command)}),[r.jobConfig.command]),s=Object(d.useState)(r.jobConfig.spark||!1),c=Object(o.a)(s,2),b=c[0],p=c[1],f=Object(d.useMemo)((function(){return m.a.isEnabled("feature-spark-ui")}),[]);return Object(d.useEffect)((function(){var e="false"===a[Z.a.SparkUIStandardPath]&&"false"===a[Z.a.SparkUILegacyPath];b&&e?p(!1):b||e||p(!0)}),[b,p,a]),Object(M.jsx)(Y,{index:e.index,header:e.header,onCollapseChange:e.onCollapseChange,expanded:e.expanded,children:Object(M.jsxs)(l.default,{direction:"vertical",size:"l",children:[Object(M.jsx)(K.default,{constraintText:"Enable the creation of CloudWatch metrics when this job runs.",children:Object(M.jsx)(re,{onChange:n})}),m.a.isEnabled("feature-monitoring-resource-usage")&&Object(M.jsx)(K.default,{constraintText:"Enable the creation of additional observability CloudWatch metrics when this job runs.",children:Object(M.jsx)(Ve,{onChange:n})}),Object(M.jsx)(K.default,{constraintText:"Enable logs in CloudWatch.",children:Object(M.jsx)(se,{onChange:n})}),i&&Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)(K.default,{constraintText:ae.a,children:Object(M.jsx)(ce,{onChange:n})}),b&&Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)(K.default,{label:ae.d,children:Object(M.jsx)(be,{onChange:n})}),f&&Object(M.jsx)(K.default,{label:ae.c,children:Object(M.jsx)(qe,{onChange:n})})]})]})]})})},ze=n(206),He=function(e){var t=Ue(e.onChange),n=t.handleChange,a=t.value,o=Object(u.a)().values.jobConfig.command===ze.a.glueray;return Object(M.jsx)(Y,{index:e.index,header:e.header,onCollapseChange:e.onCollapseChange,expanded:e.expanded,children:Object(M.jsxs)(l.default,{direction:"vertical",size:"l",children:[Object(M.jsx)(K.default,{label:"Security configuration",description:"Defines the encryption options of the ETL job.",constraintText:"The security configuration specifies how the data at the Amazon S3 target is encrypted: no encryption, server-side encryption with AWS KMS-managed keys (SSE-KMS), or Amazon S3-managed encryption keys (SSE-S3). Changing the security configuration will not change the Amazon S3 encryption settings of the ETL script.",children:Object(M.jsx)(ke,{onChange:n})}),!o&&Object(M.jsx)(K.default,{constraintText:"Enables Amazon S3-managed encryption of the data at the target (SSE-S3). Ignored if a security configuration is specified.",children:Object(M.jsx)(Ee,{onChange:n})}),Object(M.jsx)(K.default,{label:"Worker type",description:"Set the type of predefined worker that is allocated when a job runs.",children:Object(M.jsx)(Te,{onChange:n,updatedJobParameters:a})}),Object(M.jsx)(K.default,{label:"Number of workers",constraintText:"The maximum number of workers you can define are 299 for G.1X, and 149 for G.2X.",children:Object(M.jsx)(Le,{onChange:n,updatedJobParameters:a})}),Object(M.jsx)(K.default,{label:"Job timeout (minutes)",description:"Set the execution time limit in minutes.",children:Object(M.jsx)(De,{onChange:n})}),Object(M.jsx)(K.default,{label:"Delay notification threshold (minutes)",description:"Set a delay threshold in minutes. If the job runs longer than the specified time Glue will send a delay notification via CloudWatch.",children:Object(M.jsx)(_e,{onChange:n})})]})})},Ke=function(e){var t=Ue(e.onChange).handleChange,n=Object(u.a)().values.jobConfig.command===ze.a.glueray;return Object(M.jsx)(Y,{index:e.index,header:e.header,onCollapseChange:e.onCollapseChange,expanded:e.expanded,children:Object(M.jsxs)(l.default,{direction:"vertical",size:"l",children:[!n&&Object(M.jsx)(K.default,{label:"Python library path",children:Object(M.jsx)(fe,{onChange:t})}),Object(M.jsx)(K.default,{label:"Dependent jars path",children:Object(M.jsx)(ge,{onChange:t})}),Object(M.jsx)(K.default,{label:"Referenced files path",children:Object(M.jsx)(he,{onChange:t})})]})})},Qe=n(883),Ye=function(e){return{key:e.key,value:e.value}},Xe=function(e){var t=Object(u.a)().values,n=b.a.useState(t.jobConfig.jobParameters.map(Ye)),r=Object(o.a)(n,2),i=r[0],s=r[1],c=e.onChange,l=Object(d.useCallback)((function(){var e=[].concat(Object(Oe.a)(i),[{key:"",value:""}]);s(e)}),[i,s]),p=Object(d.useCallback)((function(e){var t=e.detail.itemIndex,n=Object(Oe.a)(i);n.splice(t,1),s(n)}),[i,s]),f=Object(d.useCallback)((function(e,t,n){return function(o){var r=o.detail.value,l=Object(Oe.a)(i),u=Object(a.a)({},t);u[e]=r,l.splice(n,1,u);var d=l.filter((function(e){return!!e.key})).map((function(e){return e.key.startsWith("--")?e:function(e){return{key:"--".concat(e.key),value:e.value}}(e)})),b=Object.fromEntries(d.map(Object.values));s(l),c(b)}}),[i,s,c]);return Object(M.jsx)(Y,{index:e.index,header:e.header,onCollapseChange:e.onCollapseChange,expanded:e.expanded,children:Object(M.jsx)(Qe.a,{onAddButtonClick:l,onRemoveButtonClick:p,items:i,addButtonText:"Add new parameter",definition:[{label:"Key",control:function(e,t){return Object(M.jsx)(le.a,{value:e.key,placeholder:"Enter key",onChange:f("key",e,t),autoFocus:!0})},errorText:function(e,t){if(e.key.includes(" "))return"Parameter keys cannot contain spaces"}},{label:"Value",control:function(e,t){return Object(M.jsx)(le.a,{value:e.value,placeholder:"Enter value",onChange:f("value",e,t)})}}],removeButtonText:"Remove",empty:"No items associated with the resource."})})},Ze=0,$e=1,et=2,tt=3,nt=4,at="Advanced properties",ot="Monitoring options",rt="Security configuration",it="Script libraries",st="Job parameters",ct=function(){return Object(M.jsx)(r.default,{variant:"p",children:"Review and override parameter values, as needed, before running this job. Changes affect this run only. Edit a job to change default parameter values."})},lt=function(e){var t=e.jobName;return Object(M.jsxs)(G.default,{type:"warning",children:["Only job ",Object(M.jsx)("strong",{children:t})," is run. Jobs dependent on the completion of job ",Object(M.jsx)("strong",{children:t})," ","will not be run. To run a job and trigger dependent jobs, define an on-demand trigger."]})},ut=function(e){var t=Object(u.a)().values,n=Object(d.useState)(Array(5).fill(!1)),s=Object(o.a)(n,2),c=s[0],p=s[1],f=b.a.useState({}),j=Object(o.a)(f,2),h=j[0],m=j[1],g=b.a.useCallback((function(){p(Array(5).fill(!1))}),[p]),O=b.a.useCallback((function(e){var t=Array(5).fill(!1);t[e]=!0,p(t)}),[p]),v=b.a.useCallback((function(e,t){g(),t&&O(e)}),[O,g]),y=b.a.useCallback((function(e){var t=Object(a.a)(Object(a.a)({},h),e);m(t)}),[h,m]);return Object(M.jsx)(x.default,{onDismiss:e.onDismiss,visible:e.isVisible,size:"large",footer:Object(M.jsx)(r.default,{float:"right",children:Object(M.jsxs)(l.default,{direction:"horizontal",size:"xs",children:[Object(M.jsx)(i.default,{formAction:"none",variant:"link",onClick:e.onDismiss,children:"Cancel"}),Object(M.jsx)(i.default,{formAction:"none",variant:"primary",onClick:function(){return e.onConfirm(h)},children:"Run job"})]})}),header:"Run parameters (optional)",children:Object(M.jsxs)(l.default,{direction:"vertical",size:"l",children:[Object(M.jsx)(ct,{}),Object(M.jsx)(lt,{jobName:t.jobConfig.name}),Object(M.jsx)(Ge,{header:at,index:Ze,expanded:c[Ze],onCollapseChange:v,onChange:y}),Object(M.jsx)(We,{header:ot,index:$e,expanded:c[$e],onCollapseChange:v,onChange:y}),Object(M.jsx)(He,{header:rt,index:et,expanded:c[et],onCollapseChange:v,onChange:y}),Object(M.jsx)(Ke,{header:it,index:tt,expanded:c[tt],onCollapseChange:v,onChange:y}),Object(M.jsx)(Xe,{header:st,index:nt,expanded:c[nt],onCollapseChange:v,onChange:y})]})})},dt=n(898),bt=n(2678),pt=n(2757),ft=n(2661),jt=n(136),ht=n(76),mt=n(14),gt=n(2767);function Ot(e){return vt.apply(this,arguments)}function vt(){return(vt=Object(S.a)(C.a.mark((function e(t){var n,a,o;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(window.crypto){e.next=2;break}return e.abrupt("return","");case 2:return n=(new TextEncoder).encode(t),e.next=5,crypto.subtle.digest("SHA-256",n);case 5:return a=e.sent,o=Array.from(new Uint8Array(a)),e.abrupt("return",o.map((function(e){return e.toString(16).padStart(2,"0")})).join(""));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function yt(e){return xt.apply(this,arguments)}function xt(){return(xt=Object(S.a)(C.a.mark((function e(t){var n,a,o,r,i,s,c,l;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=t.bucket,r=t.dir,i=t.resourceId,s={Bucket:o,Prefix:r+i},e.next=4,ht.s.listObjectsV2(s).promise();case 4:if(0!==(null===(c=e.sent)||void 0===c||null===(n=c.Contents)||void 0===n?void 0:n.length)){e.next=7;break}return e.abrupt("return");case 7:return l={Bucket:o,Delete:{Objects:[]}},null===c||void 0===c||null===(a=c.Contents)||void 0===a||a.forEach((function(e){var t=e.Key;l.Delete.Objects.push({Key:t})})),e.next=11,ht.s.deleteObjects(l).promise();case 11:if(!c.IsTruncated){e.next=14;break}return e.next=14,yt({bucket:o,dir:r,resourceId:i});case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function St(){return mt.b||Object(Pe.isLocalhost)()?Object(M.jsx)(Et,{}):null}function kt(){return(kt=Object(S.a)(C.a.mark((function e(t){var n;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.substring(t.lastIndexOf("/")+1).replace(new RegExp("(?<!^)[.].*","g"),""),e.t0=n+"_",e.next=4,Ot(t);case 4:return e.t1=e.sent,e.abrupt("return",e.t0+e.t1);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ct=function(e){return Object(ft.a)(Object(a.a)({mutationKey:["deleteObjects"],mutationFn:function(e){return yt(e)}},e))};function Et(){var e,t=Ct(),n=t.mutateAsync,a=t.isLoading,r=Object(j.b)((function(e){return{selectedJobRun:e.selectedJobRun}}),jt.shallow).selectedJobRun,i=(null===r||void 0===r?void 0:r.Id)||"",c=null===r||void 0===r||null===(e=r.ExecutionArguments)||void 0===e?void 0:e[ue.e.sparkPath],l="".concat(i).concat((null===r||void 0===r?void 0:r.JobRunState)===gt.a.RUNNING?".inprogress":""),u="".concat(c).concat(l),p=Object(d.useState)(""),f=Object(o.a)(p,2),h=f[0],m=f[1];Object(d.useEffect)((function(){null!==u&&void 0!==u&&u.trim()&&function(e){return kt.apply(this,arguments)}(u).then((function(e){m(e)}))}),[m,u]);var g=Pe.S3LocationLinkUtils.getS3BucketKey(c),O=g.bucket,v=g.key,y=void 0===v?"":v,x="".concat(y).concat(l),S=Object(d.useCallback)((function(){y&&h&&n({bucket:O,dir:y,resourceId:h})}),[n,h,O,y]),k=Object(d.useState)(!1),C=Object(o.a)(k,2),E=C[0],w=C[1],I=Object(d.useCallback)((function(){r?(w(!0),ht.s.getObject({Bucket:O,Key:x},(function(e,t){if(w(!1),e||!t.Body)return alert("Couldn't fetch file"),void console.error(e);var n=new Blob([t.Body],{type:t.ContentType}),a=document.createElement("a");a.href=window.URL.createObjectURL(n),a.download=l,a.click()}))):alert("No job run selected. Go to 'Runs' tab.")}),[w,r,x,l,O]),T=[{id:"sparkUI",text:"Spark UI",items:r?[{id:wt.SPARK_UI_DELETE_PARSED_OUTPUT,text:"Delete parsed output",disabled:a},{id:wt.SPARK_UI_DOWNLOAD_LOG,text:"Download log",disabled:E},{id:wt.SPARK_UI_VIEW_LOG,text:"View log file in S3",href:Object(Pe.getS3ViewHref)("".concat(c).concat(l)),external:!0},{id:wt.SPARK_UI_VIEW_PARSED_OUTPUT,text:"View parsed output in S3",href:Object(Pe.getS3ViewHref)("".concat(c).concat(h,"/output/")),external:!0}]:[{id:"no job run selected",text:"(no job run selected)",disabled:!0}]}],N=Object(d.useCallback)((function(e){e===wt.SPARK_UI_DELETE_PARSED_OUTPUT?S():e===wt.SPARK_UI_DOWNLOAD_LOG&&I()}),[S,I]);return Object(M.jsx)(b.a.Fragment,{children:Object(M.jsx)(s.a,{items:T,onItemClick:function(e){var t=e.detail;return N(t.id)},children:"Dev Utils"})})}var wt={SPARK_UI_DELETE_PARSED_OUTPUT:"sparkUIDeleteParsedOutput",SPARK_UI_DOWNLOAD_LOG:"sparkUIDownloadLog",SPARK_UI_VIEW_LOG:"sparkUiViewLog",SPARK_UI_VIEW_PARSED_OUTPUT:"sparkUiViewParsedOutput"},It=n(2771),Tt=n(2840);function Mt(){var e=Object(It.a)().status;return"NOTEBOOK_MODE"===Object(u.a)().values.jobConfig.jobMode&&"RUNNING"===e?Object(M.jsx)(Nt,{}):null}function Nt(){var e=Object(d.useContext)(bt.a).emitNotebookEvent,t=Object(d.useCallback)((function(){e(Tt.a.downloadNotebook)}),[e]);return Object(M.jsx)(i.default,{formAction:"none",onClick:t,children:"Download Notebook"})}var Lt=n(153),Rt=n(559);function Dt(){return m.a.isEnabled("feature-gluestudio-notebook")?Object(M.jsx)(At,{}):null}function At(){var e=Object(Rt.a)(!1),t=e.notebookId,n=e.terminate,a=Object(d.useCallback)((function(){Object(h.e)(h.d.CLICK,"VisualEditor","TerminateNotebookServer",1),Lt.b.addEvent({context:"NotebookStopInvoked",message:"Notebook ".concat(t," terminate explicitly invoked")}),n()}),[t,n]);return Object(M.jsx)(M.Fragment,{children:t&&Object(M.jsx)(i.default,{id:"visual.editor.header.end-notebook-server.button",formAction:"none",onClick:a,children:Object(M.jsx)(p.a,{id:"visual.editor.header.end-notebook-server.button-text",defaultMessage:"Stop notebook",description:"End datapreview session button text"})})})}var _t=n(2764);n(2867);function Pt(){return mt.b||Object(Pe.isLocalhost)()?Object(M.jsx)(Ut,{}):null}function Ut(){var e=Object(u.a)(),t=e.setFieldValue,n=e.values.dag,a=Object(d.useState)(!1),s=Object(o.a)(a,2),c=s[0],p=s[1],f=Object(d.useState)(""),j=Object(o.a)(f,2),h=j[0],m=j[1],g=Object(d.useCallback)((function(){p(!1),t("dag",JSON.parse(h))}),[p,t,h]);return Object(M.jsxs)(b.a.Fragment,{children:[Object(M.jsx)(i.default,{formAction:"none",onClick:function(){return p(!0)},children:"Load JSON"}),Object(M.jsx)(x.default,{onDismiss:function(){return p(!1)},visible:c,closeAriaLabel:"Close modal",size:"large",footer:Object(M.jsx)(r.default,{float:"right",children:Object(M.jsxs)(l.default,{direction:"horizontal",size:"xs",children:[Object(M.jsx)(i.default,{formAction:"none",onClick:function(){return m(JSON.stringify(n,null,2))},children:"Populate from graph"}),Object(M.jsx)(i.default,{formAction:"none",variant:"link",onClick:function(){return p(!1)},children:"Cancel"}),Object(M.jsx)(i.default,{formAction:"none",variant:"primary",onClick:g,children:"Load"})]})}),header:"Load DAG JSON",children:Object(M.jsx)("div",{className:"glue__json-loader",children:Object(M.jsx)(_t.a,{mode:"json",value:h,onChange:function(e){return m(e)},jobScriptEditor:!1,enableBasicAutocompletion:!1,enableLiveAutocompletion:!1,enableSnippets:!1,highlightActiveLine:!1})})})]})}n(2954);var Gt=n(48),Ft=n(2721),Bt=n(2710);var qt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return Object.values(e).reduce((function(e,n){if("AmazonRedshift"===n.type&&t.length){var a=t.find((function(e){var t;return e.Name===(null===(t=n.data.connection)||void 0===t?void 0:t.value)}));if(a){var o=Object(Bt.i)(a),r="".concat(n.type,"-").concat(null!==o&&void 0!==o&&o.serverless?"serverless-":"").concat(n.classification);e.add(r)}}else if(["DataSink","DataSource"].includes(n.classification)){var i;e.add("".concat(null!==(i=n.connectionType)&&void 0!==i?i:n.type,"-").concat(n.classification))}return e}),new Set)},Jt=n(972),Vt={id:"graph.toolbar.try-new-ui.button",defaultMessage:"Try new UI",description:"Try New UI button label for the graph action's toolbar."},Wt=function(){var e=Object(V.b)(),t=e.isResourcePanelEnabled,n=e.toggleLegacyToolbar,o=Object(u.a)().values.jobConfig.jobMode;return m.a.isEnabled("feature-resource-panel-slider")&&"VISUAL_MODE"===o?Object(M.jsx)(r.default,{padding:"xxs",children:Object(M.jsx)(l.default,{direction:"horizontal",size:"xs",children:Object(M.jsx)(Jt.a,{onChange:n,checked:t,children:Object(M.jsx)(p.a,Object(a.a)({},Vt))})})}):null},zt=function(e){var t=e.onClick,n=e.disabled,a=Object(j.b)((function(e){return e})).saving;return Object(M.jsx)(i.default,{formAction:"submit",onClick:t,disabled:n,loading:a,children:Object(M.jsx)(p.a,{id:"visual.editor.header.save.button",defaultMessage:"Save",description:"Save job button text."})})};function Ht(e){var t,n=e.onJobRun,b=Object(u.a)(),x=b.values,S=b.touched,k=b.submitForm,C=b.isValid,E=x.jobConfig,I=x.hasBeenSaved,T=Object(Gt.a)("script"),N=Object(o.a)(T,2)[1].touched,L=Object(Gt.a)("notebook"),R=Object(o.a)(L,2)[1].touched,D=!!Object.keys(S).length,A=Object(d.useContext)(bt.a),_=A.dagless,P=A.canUndo,U=Object(g.a)(!1).pushNotification,G=Object(dt.a)(),q=Object(o.a)(G,2),z=q[0],K=q[1].status,Q=Object(d.useState)(!1),Y=Object(o.a)(Q,2),X=Y[0],Z=Y[1],$=Object(d.useState)(!1),ee=Object(o.a)($,2),te=ee[0],ne=ee[1],ae=Object(d.useState)(!1),oe=Object(o.a)(ae,2),re=oe[0],ie=oe[1],se=Object(d.useState)(!1),ce=Object(o.a)(se,2),le=ce[0],ue=ce[1],de=Object(d.useState)(!1),be=Object(o.a)(de,2),pe=be[0],fe=be[1],je=Object(d.useMemo)((function(){return[x.jobConfig.name]}),[x.jobConfig.name]),he=m.a.isEnabled("feature-job-run-parameters"),me=m.a.isEnabled("feature-datapreview-v2"),ge=Object(f.h)(),Oe=w(),ve=Oe.handleDownload,ye=Oe.handleUpload,xe=Object(V.b)(),Se=xe.isResourcePanelAndPanelLayoutEnabled,ke=xe.trackResourcePanelUsage,Ce=function(){var e=Object(u.a)().values,t=e.dag,n=void 0===t?{}:t,a=e.jobConfig.name,o=Object(d.useMemo)((function(){return Object.values(n).some((function(e){return"AmazonRedshift"===e.type}))}),[n]),r=Object(Ft.e)(o).data,i=void 0===r?[]:r,s=Object(d.useContext)(bt.a).dagless;return Object(d.useCallback)((function(e){if(!s)for(var t=qt(n,i),o=0,r=Array.from(t);o<r.length;o++){var c=r[o];Object(Pe.captureCustomAnalytics)(Pe.PanoramaEventType.CLICK,e,c,a)}}),[n,s,a,i])}(),Ee=Object(O.c)("glue__header-actions",{overflow:Se}),we=Object(d.useMemo)((function(){var e,t;return m.a.isEnabled("feature-devops")?[{id:"runOptions",text:"Run",items:[{id:"runWithParams",text:"Run with parameters",disabled:!x.hasBeenSaved}]},{id:"jobOptions",text:"Job",items:[{id:"delete",text:"Delete"},{id:"resetJobBookmark",text:"Reset bookmark"},{id:"download",text:"Download"},{id:"upload",text:"Upload"}]},{id:"sourceOptions",text:"Version control",items:[{id:"pushToRepository",text:"Push to repository",disabled:"NOTEBOOK_MODE"===(null===(e=x.jobConfig)||void 0===e?void 0:e.jobMode)&&!m.a.isEnabled("feature-ntbk-sourcecontrol-support")},{id:"pullFromRepository",text:"Pull from repository",disabled:"NOTEBOOK_MODE"===(null===(t=x.jobConfig)||void 0===t?void 0:t.jobMode)&&!m.a.isEnabled("feature-ntbk-sourcecontrol-support")}]}]:[{text:"Run with parameters",id:"runWithParams",disabled:!x.hasBeenSaved},{text:"Reset job bookmark",id:"resetJobBookmark"}]}),[x.hasBeenSaved,null===(t=x.jobConfig)||void 0===t?void 0:t.jobMode]),Ie=Object(d.useMemo)((function(){return E.etlAutoScaling?{Arguments:{"--enable-auto-scaling":"true"}}:{}}),[E.etlAutoScaling]);Object(d.useEffect)((function(){"error"!==K&&"success"!==K||n()}),[K,n]);var Te=Object(d.useMemo)((function(){if(!I)return!1;switch(E.jobMode){case"DEVELOPER_MODE":return!1===N;case"NOTEBOOK_MODE":return m.a.isEnabled("feature-ntbk-disable-save-while-loading")&&!1===R;default:return!1}}),[E.jobMode,I,N,R]),Me=Object(d.useCallback)((function(e){e&&(ge.push("/jobs"),U(Object(y.c)()))}),[ge,U]),Ne=Object(d.useCallback)((function(){k(),C&&(Object(h.e)(h.d.CLICK,"VisualEditor","SaveButton",_?"dagless":"withDag"),Ce("VisualEditor:ManualJobSaveDagNodeTypes")),ke(),Object(h.f)(x.dag||{})}),[k,_,C,ke,x.dag,Ce]),Le=Object(d.useCallback)((function(){return Z(!1)}),[Z]),Re=Object(d.useCallback)((function(){ne(!1)}),[ne]),De=Object(d.useCallback)((function(e){ne(!1);var t=H(e,Ie);z(Object(a.a)({JobName:x.jobConfig.name},t))}),[ne,Ie,x.jobConfig.name,z]),Ae=Object(d.useCallback)((function(){ie(!1)}),[ie]),_e=Object(d.useCallback)((function(e){switch(e){case"runWithParams":ne(!0);break;case"resetJobBookmark":ie(!0);break;case"delete":Z(!0);break;case"download":ve(),Object(h.e)(h.d.CLICK,"VisualEditor","Download",1);break;case"upload":ye(),Object(h.e)(h.d.CLICK,"VisualEditor","Upload",1);break;case"pushToRepository":ue(!0),Object(h.e)(h.d.CLICK,"VisualEditor","PushToRepository",1);break;case"pullFromRepository":fe(!0),Object(h.e)(h.d.CLICK,"VisualEditor","PullFromRepository",1)}}),[ve,ye]),Ue=Object(d.useCallback)((function(){return Object(M.jsx)(i.default,{formAction:"none",onClick:function(){return Z(!0)},disabled:!x.hasBeenSaved,children:Object(M.jsx)(p.a,{id:"visual.editor.header.delete.button",defaultMessage:"Delete",description:"Delete job button text."})})}),[x.hasBeenSaved]),Ge=Object(j.b)((function(e){return e.isRecipeAuthoringModeEnabled})),Fe=Object(d.useCallback)((function(){return Object(M.jsx)(i.default,{formAction:"none",variant:"primary",onClick:function(){z(Object(a.a)({JobName:x.jobConfig.name},Ie)),Object(h.e)(h.d.CLICK,"VisualEditor","RunButton",_?"dagless":"withDag"),Ce("VisualEditor:ManualJobRunDagNodeTypes")},disabled:!x.hasBeenSaved||Ge,children:Object(M.jsx)(p.a,{id:"visual.editor.header.run.button",defaultMessage:"Run",description:"Run job button text."})})}),[Ce,_,Ie,z,x.hasBeenSaved,x.jobConfig.name,Ge]),Be=Object(d.useCallback)((function(){return he?Object(M.jsx)(s.a,{items:we,onItemClick:function(e){var t=e.detail;return _e(t.id)},disabled:Ge,children:"Actions"}):null}),[_e,we,he,Ge]),qe=Object(d.useCallback)((function(){return x.jobConfig.lastModified?Object(M.jsx)(r.default,{color:"text-status-inactive",variant:"p",children:Object(M.jsxs)("small",{children:["Last modified on ",new Date(x.jobConfig.lastModified).toLocaleString()]})}):null}),[x.jobConfig.lastModified]),Je=Object(d.useCallback)((function(){return!x.hasBeenSaved&&D&&P?Object(M.jsx)(r.default,{color:"text-status-error",variant:"p",children:Object(M.jsxs)("small",{className:"awsui-util-status-negative",children:[Object(M.jsx)(c.a,{name:"status-warning"})," Job has not been saved"]})}):null}),[P,D,x.hasBeenSaved]),Ve=Object(d.useCallback)((function(){return X?Object(M.jsx)(v.a,{isOpen:X,jobNames:je,onCancel:Le,onDeleteComplete:Me}):null}),[je,Le,Me,X]),We=Object(d.useCallback)((function(){return te?Object(M.jsx)(ut,{isVisible:te,onConfirm:De,onDismiss:Re}):null}),[Re,De,te]),ze=Object(d.useCallback)((function(){return re?Object(M.jsx)(W.a,{jobName:E.name,type:"reset",isVisible:re,onDismiss:Ae}):null}),[E.name,Ae,re]),He=Object(d.useCallback)((function(){return le?Object(M.jsx)(B,{isVisible:le,onDismiss:function(){return ue(!1)},job:E,hasBeenSaved:x.hasBeenSaved}):null}),[E,le,x.hasBeenSaved]),Ke=Object(d.useCallback)((function(){return pe?Object(M.jsx)(F,{isVisible:pe,onDismiss:function(){return fe(!1)},job:E}):null}),[E,pe]);return Object(M.jsxs)("div",{className:"glue__graph-title-container",children:[Object(M.jsx)(J,{}),Object(M.jsx)("div",{className:Ee,children:Object(M.jsxs)(l.default,{direction:"horizontal",size:"s",children:[Object(M.jsx)(Je,{}),Object(M.jsx)(qe,{}),!m.a.isEnabled("feature-deprecate-old-ui")&&Object(M.jsx)(Wt,{}),Object(M.jsx)(Dt,{}),!me&&Object(M.jsx)(pt.a,{}),Object(M.jsx)(Pt,{}),Object(M.jsx)(St,{}),Object(M.jsx)(Mt,{}),Object(M.jsx)(Be,{}),m.a.isEnabled("feature-devops")?null:Object(M.jsx)(Ue,{}),Object(M.jsx)(zt,{onClick:Ne,disabled:Te||Ge}),Object(M.jsx)(Fe,{}),Object(M.jsx)(Ve,{}),Object(M.jsx)(We,{}),Object(M.jsx)(ze,{}),Object(M.jsx)(He,{}),Object(M.jsx)(Ke,{})]})})]})}},2884:function(e,t,n){"use strict";n.d(t,"a",(function(){return Ve}));var a=n(5),o=n(8),r=n(3),i=n(99),s=n(171),c=n(2622),l=n(46),u=n(0),d=n(61),b=n(41),p=n(104),f=n(2665),j=n(52),h=n(30),m=n(195),g=n(403),O=n(2819),v=n(377),y=n(2782),x=n(1),S=Object(u.createContext)({notebook:y.a,pushNotebookQuery:function(){}});function k(e){var t=e.children;return"NOTEBOOK_MODE"===e.jobMode?Object(x.jsx)(C,{children:t}):Object(x.jsx)(x.Fragment,{children:t})}function C(e){var t=e.children,n=Object(v.b)().getQueryData(["notebookState"]),a=Object(y.c)(n);return Object(x.jsx)(S.Provider,{value:a,children:t})}var E=n(970),w=n(29),I=n(2671),T=(n(2955),n(2693)),M=Object(p.a)((function(){return Promise.all([n.e(0),n.e(4),n.e(32)]).then(n.bind(null,3007))})),N=Object(p.a)((function(){return Promise.all([n.e(0),n.e(4),n.e(33)]).then(n.bind(null,2993))})),L=Object(p.a)((function(){return n.e(31).then(n.bind(null,2994))})),R=function(e){var t=e.forceJobRunsRefresh,n=h.a.isEnabled("feature-job-runs-table-view"),a=h.a.isEnabled("feature-job-runs-toggle"),o=Object(T.a)(),r=Object(I.b)().isJobMonitoringUpdatesAndPanelLayoutEnabled,s=Object(f.b)((function(e){return e})),c=s.isJobRunsTableView,l=s.setIsJobRunsTableView,d=Object(u.useCallback)((function(e){Object(w.captureCustomAnalytics)(w.PanoramaEventType.CLICK,"RunContainerToggle",e.toString()),l(e)}),[l]),b=n&&a?Object(x.jsxs)(i.default,{size:"s",direction:"horizontal",children:[Object(x.jsx)("div",{className:"run-container__divider"}),Object(x.jsx)(E.a,{selectedId:c.toString(),onChange:function(e){var t=e.detail;return d("false"!==t.selectedId)},label:"Default segmented control",options:[{text:o.actions.ctaToggleTableView,id:"true"},{text:o.actions.ctaCardTableView,id:"false"}]})]}):Object(x.jsx)(x.Fragment,{});return Object(x.jsx)(i.default,{direction:"vertical",size:"m",children:c&&r?Object(x.jsx)(N,{headerContent:b,forceJobRunsRefresh:t}):c?Object(x.jsx)(M,{headerContent:b,forceJobRunsRefresh:t}):Object(x.jsx)(L,{headerContent:b,forceJobRunsRefresh:t})})},D=function(e){var t=e.forceJobRunsRefresh,n=Object(I.b)().isResourcePanelAndPanelLayoutEnabled,a=Object(m.c)("glue__run-details-container",{scrollable:n});return Object(x.jsx)("div",{className:a,children:Object(x.jsx)(R,{forceJobRunsRefresh:t})})},A=n(2),_=n(97),P=n(881),U=n(48),G=n(76);function F(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=Object(_.c)(G.f,"listBuckets"),n=Object(A.a)(t,2),a=n[0],r=n[1],i=(r.response||{}).Buckets,s=void 0===i?[]:i,c=Object(_.c)(G.f,"listObjectsV2"),l=Object(A.a)(c,2),d=l[0],b=l[1],p=b.response||{},f=p.CommonPrefixes,j=void 0===f?[]:f,h=p.BucketName,m=void 0===h?"":h,g=p.ObjectSummaries,O=void 0===g?[]:g,v=j.map((function(e){var t=e.split("/"),n=t[t.length-2];return{ID:"".concat(m,"/").concat(e),Key:n,BucketName:m,IsFolder:!0}}));e||v.push.apply(v,Object(o.a)(O.filter((function(e){var t=e.Key;return!(null!==t&&void 0!==t&&t.endsWith("/"))})).map((function(e){var t=e.Key,n=void 0===t?"":t;return{ID:"".concat(m,"/").concat(n),Key:n,BucketName:m,IsFolder:!1}}))));var y=[r.status,b.status].includes("loading"),x="error"===r.status?r.errorMessage:"error"===b.status?b.errorMessage:void 0,S=Object(u.useState)("buckets"),k=Object(A.a)(S,2),C=k[0],E=k[1],w=Object(u.useCallback)((function(e){var t=e.split("/"),n="",a="";if(t.length>2){n=t[2];for(var o=3;o<t.length;o++)t[o]&&(a+=t[o]+"/")}return[n,a]}),[]),I=Object(u.useCallback)((function(){E("buckets"),a()}),[a,E]),T=Object(u.useCallback)((function(e){var t=w(e),n=Object(A.a)(t,2),a={BucketName:n[0],Delimiter:"/",MaxKeys:1e3,Prefix:n[1]};E("objects"),d(a)}),[w,E,d]);return{loading:y,buckets:s,objects:v,getBucketList:I,splitPath:w,getObjectList:T,currentItemsType:C,errorMessage:x}}var B=n(2724),q=n(206);var J=Object(u.createContext)({touched:!1,formikScript:"",status:"init",errorMessage:void 0});function V(e){var t=e.children;return"DEVELOPER_MODE"===e.jobMode?Object(x.jsx)(W,{children:t}):Object(x.jsx)(x.Fragment,{children:t})}function W(e){var t=e.children,n=function(){var e=Object(l.a)().values.hasBeenSaved,t=Object(b.k)({path:"/editor/clone/*"}),n=Object(u.useContext)(P.a),a=n.userScript,o=void 0===a?{}:a,r=n.setUserScript,i=o.content,s=Object(l.a)().values,c=s.jobConfig,d=s.originalScriptName,p=s.originalScriptLocation,f=Object(U.a)("script"),j=Object(A.a)(f,3),h=j[0].value,m=j[1].touched,g=j[2],O=g.setTouched,v=g.setValue,y=(0,F().splitPath)(t?p:c.scriptLocation),x=Object(A.a)(y,2),S=x[0],k=x[1],C=t?"".concat(k).concat(d):"".concat(k).concat(c.scriptName),E=Object(B.c)(s),w=Object(A.a)(E,2),I=w[0].Script,T=w[1],M=Object(_.b)({Bucket:S,Key:C,ResponseCacheControl:"no-cache"}),N=Object(A.a)(M,1)[0],L=Object(_.d)(G.s,"getObject",{Body:void 0},N),R=Object(A.a)(L,2),D=R[0].Body,J=R[1],V=null===D||void 0===D?void 0:D.toString("utf-8");return Object(u.useEffect)((function(){i&&(v(i),r(void 0),O(!0))}),[i,r,v,O]),Object(u.useEffect)((function(){e||"success"!==T.status||m||t||void 0!==i||(O(!0),c.command!==q.a.pythonshell&&c.command!==q.a.glueray&&v(I))}),[T.status,c.command,I,e,m,t,v,O,i]),Object(u.useEffect)((function(){!e&&!t||"success"!==J.status||m||void 0!==i||(v(V),O(!0))}),[J.status,e,V,m,t,O,v,i]),{touched:m,formikScript:h,status:J.status,errorMessage:"error"===J.status?J.errorMessage:void 0}}();return Object(x.jsx)(J.Provider,{value:n,children:t})}var z=n(82),H=n(351),K=n(2872),Q=n(761),Y=n(14),X=n(124),Z=n(876),$=n(615),ee=n(2667),te=n(146),ne=n(629),ae=n(2764),oe=function(){var e=Object(u.useContext)(J),t=e.touched,n=e.formikScript,a=e.status,o=e.errorMessage,r=Object(u.useMemo)((function(){return[{type:"success",loading:!0,content:Object(x.jsx)(d.a,{id:"script.editor.dagless.flash",defaultMessage:"Retrieving script",description:"Flash message loading script message for jobs without a DAG."})}]}),[]);if(t)return Object(x.jsx)(ae.a,{className:"glue__code-snippet",value:n});switch(a){case"loading":return Object(x.jsx)("div",{className:"awsui-util-p-m",children:Object(x.jsx)(ne.a,{"data-e2e":"retrievingScriptFlash",items:r})});case"success":return Object(x.jsx)(ae.a,{className:"glue__code-snippet",value:n});case"error":return Object(x.jsx)(s.default,{type:"error",header:"Error retrieving script",children:o});default:return Object(x.jsx)(s.default,{header:"No Script Available",children:Object(x.jsx)(d.a,{id:"script.editor.dagless.alert",defaultMessage:"No script available to display. Please make sure you have configured and saved a job in order to view the generated script.",description:"Alert message content for jobs without a DAG."})})}},re=n(2749),ie=function(){var e,t=null===(e=document.querySelector(".glue__script-editor-content"))||void 0===e?void 0:e.scrollHeight;if(t)return Math.round(t/(re.c+5))},se=function(){var e,t=Object(l.a)().values,n=Object(B.c)(t),a=Object(A.a)(n,2),o=a[0].Script,r=void 0===o?"":o,i=a[1],c="error"===i.status&&["AlreadyExistsException","ValidationException","AccessDeniedException","InvalidInputException"].includes((null===(e=i.reason)||void 0===e?void 0:e.code)||"")?i.errorMessage:"An error occurred while generating the script for your job. In the Script tab, try toggling on the Classic script generator. Note that the Classic script generator does not support all AWS Glue Studio features. For further assistance, please contact support.",b=Object(u.useMemo)((function(){return[{type:"success",loading:!0,content:Object(x.jsx)(d.a,{id:"script.editor.default.flash",defaultMessage:"Generating script",description:"Flash message loading script message for jobs with a DAG."})}]}),[]);switch(i.status){case"loading":return Object(x.jsx)("div",{className:"awsui-util-p-m",children:Object(x.jsx)(ne.a,{items:b})});case"success":return Object(x.jsx)(re.a,{maxLines:ie(),className:"glue__code-snippet",value:r,readOnly:!0});case"error":return Object(x.jsx)(s.default,{type:"error",header:"Error generating the script",children:2===Object(ee.c)(t.dag)?Object(x.jsx)(d.a,{id:"script.editor.default.alert.codegenV2",defaultMessage:c,description:"Alert message content for jobs with a DAG in codegen v2."}):i.errorMessage});default:return Object(x.jsx)(s.default,{header:"No Script Available",children:Object(x.jsx)(d.a,{id:"script.editor.default.alert",defaultMessage:"No script available to display. Please make sure you have configured and saved a job in order to view the generated script.",description:"Alert message content for jobs with a DAG."})})}},ce=n(103),le=n(559),ue=n(207),de=function(e){var t=e.status,n=e.role,a=e.serviceStatus,o=e.instanceStatus,r=e.onAlertClick,i=a.some((function(e){return"loading"===e}))&&!a.every((function(e){return"loading"===e})),c=Object(le.a)().terminate;return a.includes("error")?null:Object(x.jsxs)(x.Fragment,{children:[("CANCELING"===o||"CANCELED"===o)&&Object(x.jsx)(s.default,{type:"info",header:Object(x.jsx)(d.a,{id:"notebook.messages.loading.header",defaultMessage:"Notebook is stopped",description:"Header for the alert when the notebook was stopped."}),action:Object(x.jsx)(z.default,{formAction:"none",onClick:r,children:"Start"}),children:Object(x.jsx)(d.a,{id:"notebook.messages.loading.content",defaultMessage:"Your notebook has been stopped. In order to load a notebook you must start a new notebook.",description:"Content for the alert when the notebook is being loaded."})}),(i||"PROVISIONING"===t)&&Object(x.jsxs)(s.default,{type:"info",header:Object(x.jsx)(d.a,{id:"notebook.messages.loading.header",defaultMessage:"Starting notebook",description:"Header for the alert when the notebook is being loaded."}),children:[Object(x.jsx)(ue.a,{size:"normal"}),Object(x.jsx)(d.a,{id:"notebook.messages.loading.content",defaultMessage:"Starting a notebook using role {role}",description:"Content for the alert when the notebook is being loaded.",values:{role:n}})]}),"FAILED"===t&&Object(x.jsx)(s.default,{type:"error",buttonText:"Retry",onButtonClick:function(){return c()},header:Object(x.jsx)(d.a,{id:"notebook.messages.error.header",defaultMessage:"There was an issue starting your notebook",description:"Header for the alert when the notebook is being loaded."}),children:Object(x.jsx)(d.a,{id:"notebook.messages.error.content",defaultMessage:"Glue Studio encountered an issue when trying to start your notebook. Please try starting your notebook again by clicking on retry. If issue persists please contact AWS cloud support.",description:"Content for the alert when the notebook is being loaded."})})]})},be=function(e){var t=e.serviceStatus,n=e.serviceErrors,a=t.some((function(e){return"error"===e}));return Object(x.jsx)(x.Fragment,{children:a&&n.filter((function(e){return!!e.error})).map((function(e,t){var n=e.error,a=e.retry;return Object(x.jsx)(s.default,{buttonText:Object(x.jsx)(d.a,{id:"notebook.messages.error.retry",defaultMessage:"Retry",description:"Retry button text."}),onButtonClick:a,header:Object(x.jsx)(d.a,{id:"notebook.messages.error.header",defaultMessage:"Failed to start notebook",description:"Header for the alert when the notebook failed to load."}),type:"error",children:null===n||void 0===n?void 0:n.message},t)}))})},pe=n(2771),fe=function(e){var t=e.script,n=e.jobMode,a=Object(pe.a)(),o=a.status,r=a.role,i=a.serviceStatus,s=Object(le.a)().data,c=(s=void 0===s?{}:s).notebookInstanceStatus;return"NOTEBOOK_MODE"!==n?null:Object(x.jsxs)(x.Fragment,{children:["RUNNING"!==o&&Object(x.jsx)(ce.default,{margin:{vertical:"m",horizontal:"m"},children:Object(x.jsx)(de,{role:r,status:o,serviceStatus:i,instanceStatus:c})}),"RUNNING"===o&&Object(x.jsx)(re.a,{className:"glue__code-snippet",value:t,readOnly:!0,maxLines:ie()})]})};n(2956);var je=function(){var e=Object(l.a)().values.script,t=void 0===e?"":e,n=function(){var e=Object(l.a)(),t=e.values,n=t.dag,a=t.jobConfig,o=e.setFieldValue,r=e.setTouched,i=a.jobMode,s=a.scriptLocation,c=a.scriptName,d=F().splitPath,b=Object(u.useState)(!1),p=Object(A.a)(b,2),f=p[0],m=p[1],g=d(s),O=Object(A.a)(g,2),v=O[0],y=O[1],x="https://".concat(Y.c,".").concat(Object(w.getPartitionedBaseUrl)(!0),"/s3/buckets/").concat(v,"/").concat(y).concat(c,"?region=").concat(Y.c),S=Object(u.useCallback)((function(){return m(!0)}),[m]),k=Object(u.useCallback)((function(){window.open(x,"_blank","noopener,noreferrer")}),[x]),C=Object(u.useCallback)((function(){return m(!1)}),[m]),E=Object(u.useCallback)((function(){m(!1),o("jobConfig.jobMode","DEVELOPER_MODE"),h.a.isEnabled("feature-transform-databrew-recipe")&&Object(ee.g)(n).has("Recipe")&&(o("jobConfig.pythonPath",Object(Q.b)(a.pythonPath)),o("jobConfig.dependentPath",Object(Q.a)(a.dependentPath)));var e=Object(Z.n)(n,a);e!==a.jobParameters&&o("jobConfig.jobParameters",e),Object(j.e)(j.d.CLICK,"scriptEditor",null,"ConvertFromVisual")}),[o,m,n,a]),I=Object(u.useState)(1===Object(ee.c)(n)),T=Object(A.a)(I,2),M=T[0],N=T[1],L=Object(u.useCallback)((function(e){var t=e.detail.checked;Object(ee.m)(n,t?1:2),r(n,!0),N(t),Object(j.e)(j.d.CLICK,"scriptEditor",t?1:2,"codegen-toggle")}),[n,r,N]),R=Object(X.a)(!0).pushNotification,D=Object(H.a)();return Object(u.useEffect)((function(){2!==Object(ee.c)(n)&&Object.values(n||{}).some((function(e){return Object(K.a)(e)}))&&R({type:"error",content:D.formatMessage({id:"visual.editor.codegenV2.unsupportedTransform.scriptEditor",defaultMessage:"Some nodes in your job are not supported by the classic script generator. Either remove those nodes from your job, or turn off the classic code generator in the top right side of the Script tab.",description:"Error message for when a codegen v2 dependent node is in the dag when codegen version is at 1."}),dismissLabel:""})}),[n,R,M,D]),{handleEditScriptClick:S,handleDownloadScriptClick:k,handleCancel:C,handleConfirm:E,handleToggle:L,jobMode:i,openModal:f,setOpenModal:m,checked:M}}(),a=n.handleEditScriptClick,o=n.handleDownloadScriptClick,r=n.handleCancel,s=n.handleConfirm,c=n.jobMode,b=n.openModal;return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)($.a,{isOpen:b,onConfirm:s,onCancel:r,useFriction:!1,ctaMessage:Object(x.jsx)(d.a,{id:"script.editor.modal.confirm",defaultMessage:"Confirm",description:"Script editor heading title."}),confirmMessage:Object(x.jsx)(d.a,{id:"script.editor.modal.message",defaultMessage:"Unlocking the job script will convert your job from visual mode to script-only mode. This action cannot be undone. To keep a copy of the visual-mode job, clone the job on the Jobs page of Glue Studio.",description:"Script editor heading title."}),header:Object(x.jsx)(d.a,{id:"script.editor.modal.title",defaultMessage:"Edit script",description:"Script editor heading title."})}),Object(x.jsxs)("div",{className:"glue__script-editor-container awsui-util-container awsui-util-no-gutters",children:[Object(x.jsx)("div",{className:"awsui-util-container-header",children:Object(x.jsxs)("div",{className:"awsui-util-action-stripe",children:[Object(x.jsx)("div",{className:"awsui-util-action-stripe-title",children:Object(x.jsx)("h2",{className:"awsui-util-d-ib",children:Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(d.a,{id:"script.editor.title",defaultMessage:"Script {lockedLegend}",description:"Script editor heading title.",values:{lockedLegend:"VISUAL_MODE"===c?"(Locked)":""}})," ",Object(x.jsx)(d.a,{id:"script.editor.title.linkAriaLabel",defaultMessage:"More information for 'Script {lockedLegend}' (shows in sidebar).",description:"Info panel link aria label for the script editor heading title.",values:{lockedLegend:"VISUAL_MODE"===c?"(Locked)":""},children:function(e){return Object(x.jsx)(te.a,{contentKey:"edit-job-script-tab-hp",linkAriaLabel:e})}})]})})}),Object(x.jsx)("div",{className:"awsui-util-action-stripe-group",children:"VISUAL_MODE"===c&&h.a.isEnabled("feature-developer-mode")&&Object(x.jsx)(x.Fragment,{children:Object(x.jsxs)(i.default,{direction:"horizontal",size:"xs",children:[Object(x.jsx)(z.default,{formAction:"none",iconAlign:"left",iconName:"download",onClick:o,children:Object(x.jsx)(d.a,{id:"script.editor.button.download",defaultMessage:"Download script",description:"Script editor heading title."})}),Object(x.jsx)(z.default,{formAction:"none",onClick:a,children:Object(x.jsx)(d.a,{id:"cript.editor.button.edit",defaultMessage:"Edit script",description:"Script editor heading title."})})]})})})]})}),Object(x.jsxs)("div",{className:"glue__script-editor-content",role:"region","aria-live":"polite",children:["VISUAL_MODE"===c&&Object(x.jsx)(se,{}),"DEVELOPER_MODE"===c&&Object(x.jsx)(oe,{}),Object(x.jsx)(fe,{script:t,jobMode:c})]})]})]})},he=n(2869),me=n(2606),ge=n(153),Oe=n(2678),ve=n(210),ye=n(752),xe=function(e,t){var n=e.lastIndexOf(".");if(-1===n)return e;var a=e.substring(n+1);return t.includes(a)?e.substring(0,n):e},Se=(n(2957),function(e){var t=e.jobName,n=e.src,a=Object(u.useRef)(null),o=Object(u.useContext)(S),i=o.notebook,s=o.pushNotebookQuery,c=Object(u.useContext)(Oe.a).onNotebookEvent,d=Object(pe.a)().notebookId,p=Object(b.k)({path:"/editor/clone/*"}),f=Object(l.a)().values.hasBeenSaved,j=Object(U.a)("notebook"),g=Object(A.a)(j,3),O=g[1].touched,v=g[2].setTouched,y=f||!!p,k=function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]&&arguments[0],a=Object(l.a)().values,o=a.jobConfig,i=o.scriptLocation,s=o.name,c=a.originalScriptName,u=a.originalScriptLocation,d=Object(b.k)({path:"/editor/clone/*"}),p=d?u:i,f=xe(d?c:s,["ipynb","py"]),j=p.split("/"),h=Object(ve.a)(j),m=h[2],g=h.slice(3),O="".concat(g.join("/").replace("scripts/",""),"notebooks/").concat(f,".ipynb"),v=Object(ye.a)(Object(r.a)(Object(r.a)({queryKey:["getObject",s],queryFn:function(){return G.s.getObject({Bucket:m,Key:O,ResponseCacheControl:"no-cache"}).promise()}},{retry:0,cacheTime:0,staleTime:0}),{},{enabled:!!m&&!!O&&n}));return Object(r.a)({model:null===(e=v.data)||void 0===e||null===(t=e.Body)||void 0===t?void 0:t.toString()},v)}(y),C=k.model,E=k.refetch,w=Object(u.useCallback)((function(){var e=(i||{}).model;Object(m.j)("".concat(t,".ipynb"),e)}),[t,i]),I=Object(u.useContext)(P.a),T=I.notebookKey,M=I.setNotebookKey,N=Object(u.useCallback)((function(){return M((function(e){return e+1}))}),[M]),L=Object(u.useMemo)((function(){var e;return h.a.isEnabled("feature-ntbk-notebookid-in-domain")?null===Y.e||void 0===Y.e||null===(e=Y.e.getCustomContext("notebookDataPlaneWildCardEndpoint"))||void 0===e?void 0:e.replace("*",d):""}),[d]),R=h.a.isEnabled("feature-ntbk-notebookid-in-domain")?L||"*":(null===Y.e||void 0===Y.e?void 0:Y.e.getCustomContext("notebookDataPlaneEndpoint"))||"*",D=Object(u.useCallback)((function(e,t){var n,o,r={type:e,payload:t};null===a||void 0===a||null===(n=a.current)||void 0===n||null===(o=n.contentWindow)||void 0===o||o.postMessage(r,R)}),[a,R]),_=Object(u.useCallback)((function(){var e={model:JSON.stringify(null===i||void 0===i?void 0:i.model),source:null===i||void 0===i?void 0:i.source,region:Y.c,stage:Y.d};D(me.a.NotebookInitialize,{notebookData:e})}),[i,D]),F=Object(u.useCallback)((function(e){var t=JSON.parse(e.payload);s(t)}),[s]),B=Object(u.useCallback)((function(e){var n=JSON.parse(e.payload).model;Object(m.j)("".concat(t,".ipynb"),n)}),[t]);return Object(u.useEffect)((function(){return c(w)}),[w,c]),Object(u.useEffect)((function(){var e=function(e){if(ge.b.addEvent({context:e.data.type,message:JSON.stringify({origin:e.origin,type:e.type,event:e})}),h.a.isEnabled("feature-ntbk-notebookid-in-domain")){if(e.origin!==L)return}else if(!me.b.test(e.origin))return;var t=e.data;switch(t.type){case me.a.NotebookStarted:return void _();case me.a.NotebookChange:return void F(t);case me.a.NotebookResponse:return void B(t);case me.a.NotebookRetry:return void N();default:return}};return window.addEventListener("message",e),function(){window.removeEventListener("message",e)}}),[a,F,_,D,B,N,L]),Object(u.useEffect)((function(){y&&E()}),[]),Object(u.useEffect)((function(){!O&&C&&(v(!0),s({model:C,source:""}))}),[C,O,s,v]),Object(x.jsx)("iframe",{sandbox:"allow-scripts allow-same-origin allow-popups",ref:a,title:"Notebook Container",className:"glue__iframe-container",src:n},T)}),ke=function(e){return Y.j?"https://".concat(Y.d,"-").concat(Y.c,".notebookauthproxy.gluestudio.a2z.org.cn/").concat(e):h.a.isEnabled("feature-ntbk-notebookid-in-domain")?"".concat(((null===Y.e||void 0===Y.e?void 0:Y.e.getCustomContext("notebookDataPlaneWildCardEndpoint"))||"").replace("*",e),"/").concat(e):"https://".concat(Y.d,"-").concat(Y.c,".notebookauthproxy.gluestudio.aws.dev/").concat(e)},Ce="doc/workspaces/auto-k/tree/Untitled.ipynb",Ee=function(e){var t=e.baseRoute,n=void 0===t?"lab":t,a=e.notebookId,o=e.role,r=void 0===o?"":o,i=e.authToken,s=void 0===i?"":i,c=e.userId,l=void 0===c?"":c,u=new URLSearchParams;return u.set("roleArn",r),u.set("authToken",s),u.set("userId",l),"".concat(ke(a),"/").concat(n,"?").concat(decodeURIComponent("".concat(u.toString())))},we=function(){var e=!!h.a.isEnabled("feature-local-notebook"),t=Object(pe.a)(),n=t.notebookName,a=t.role,o=t.status,i=t.notebookId,s=t.authToken,c=t.userId,l=t.serviceStatus,d=t.serviceErrors,b=t.startNotebook,p=Object(v.b)(),f=Object(le.a)().data,j=(f=void 0===f?{}:f).notebookInstanceStatus,g=function(e){return"".concat(ke(e),"/").concat(Ce)}(i),O=Ee({baseRoute:Ce,notebookId:i,role:a,authToken:s,userId:c}),y=Ee({notebookId:i,role:a,authToken:s,userId:c}),S=Object(U.a)("notebook"),k=Object(A.a)(S,3)[2].setTouched,C=Object(u.useState)(!1),E=Object(A.a)(C,2),w=E[0],I=E[1],T=Object(u.useState)(),M=Object(A.a)(T,2),N=M[0],L=M[1],R=Object(m.b)({"awsui-util-p-l":!0,"glue__notebook-tab":!0,"glue__notebook-tab--no-notebook":!n});Object(u.useEffect)((function(){"RUNNING"!==o||e||L(g)}),[L,g,o,e]),Object(u.useEffect)((function(){i||I(!1)}),[i]),Object(u.useEffect)((function(){e&&L("http://127.0.0.1:8888/doc/workspaces/auto-k/tree/Untitled.ipynb")}),[e]);var D={jobName:n,src:Y.b?O:N,role:a};Object(u.useEffect)((function(){i||"CANCELING"===j||b()}),[b,i,j]);var _=Object(u.useCallback)((function(){k(!1),b().then((function(){["terminateNotebook","terminateInteractiveSession"].forEach((function(e){p.resetQueries([e]),p.invalidateQueries([e])}))}))}),[p,b,k]),P=Object(u.useCallback)((function(){Y.b?setTimeout((function(){return I(!0)}),12e4):I(!0)}),[]);return Object(x.jsxs)("div",{className:R,children:[e&&!!N&&Object(x.jsx)(Se,Object(r.a)({},D)),!e&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(de,{role:a,status:o,serviceStatus:l,instanceStatus:j,onAlertClick:_}),Object(x.jsx)(be,{serviceStatus:l,serviceErrors:d}),"RUNNING"===o&&!!N&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(Ie,{src:y,loaded:w,onLoad:P}),w&&Object(x.jsx)(Se,Object(r.a)({},D))]})]})]})},Ie=function(e){var t=e.src,n=e.onLoad,a={sandbox:e.loaded?"":"allow-scripts",loading:"eager"};return Object(x.jsx)("iframe",Object(r.a)({"data-analytics-type":"notebookIFrame","data-analytics":"VisualEditor","data-analytics-render":!0,onLoad:n,hidden:!0,tabIndex:-1,title:"Notebook Container",src:t},a))},Te=(n(2958),n(24)),Me=n(10),Ne=n.n(Me),Le=n(414),Re=function(e){var t=e.containerRef,n=e.selectedTabId,a=Object(u.useState)({}),o=Object(A.a)(a,2),r=o[0],i=o[1],s=Object(Le.b)(),c=s.toolsOpen,l=s.navigationOpen;return Object(u.useEffect)((function(){var e,n=document.querySelector(".glue__graph-t2--details");function a(){return o.apply(this,arguments)}function o(){return(o=Object(Te.a)(Ne.a.mark((function n(){return Ne.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:e&&window.cancelAnimationFrame(e),e=window.requestAnimationFrame(Object(Te.a)(Ne.a.mark((function e(){var n,a,o,r,s;return Ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null===t||void 0===t?void 0:t.current,a=document.querySelector(".awsui-tabs-content-wrapper"),e.next=4,Object(m.a)(a);case 4:if(o=e.sent,n&&o){for(s in r={},o)r[s]="".concat(o[s],"px");i(r)}case 6:case"end":return e.stop()}}),e)}))));case 2:case"end":return n.stop()}}),n)})))).apply(this,arguments)}a();var r=new MutationObserver((function(){a()}));return n&&r.observe(n,{attributes:!0,childList:!0,subtree:!0}),window.addEventListener("resize",a),function(){window.removeEventListener("resize",a),r.disconnect()}}),[t,n,c,l]),r};function De(e){var t=e.selectedTabId,n=e.jobMode,a=Object(u.useRef)(null),o=Re({containerRef:a,selectedTabId:t}),r=t===w.TabsIds.Notebook?0:-1,i=Object(m.c)("glue__notebook-container-pseudo-tab",{hidden:t===w.TabsIds.Notebook&&!a.current||t!==w.TabsIds.Notebook});return Object(x.jsx)(x.Fragment,{children:"NOTEBOOK_MODE"===n&&Object(x.jsx)("div",{className:i,style:o,ref:a,tabIndex:r,children:Object(x.jsx)(we,{})})})}function Ae(e){var t=e.selectedTabId,n=e.jobMode,a=Object(u.useRef)(null),o=Re({containerRef:a,selectedTabId:t}),i=function(e,t){return"".concat(Number(null===e||void 0===e?void 0:e.substring(0,e.length-2))+t,"px")},s=Object(r.a)(Object(r.a)({},o),{},{top:i(o.top,20),left:i(o.left,20)});return Object(x.jsx)(x.Fragment,{children:"NOTEBOOK_MODE"===n&&t===w.TabsIds.Notebook&&Object(x.jsx)("div",{style:s,ref:a,className:"glue__pseudo-spinner",tabIndex:-1,children:Object(x.jsx)(ue.a,{})})})}var _e=n(2711),Pe=n(136),Ue=Object(p.a)((function(){return Promise.all([n.e(0),n.e(1),n.e(18)]).then(n.bind(null,2997))})),Ge=Object(p.a)((function(){return Promise.all([n.e(0),n.e(27)]).then(n.bind(null,3004))})),Fe=Object(p.a)((function(){return n.e(34).then(n.bind(null,3001))})),Be=Object(p.a)((function(){return n.e(14).then(n.bind(null,3003))})),qe=Object(p.a)((function(){return n.e(15).then(n.bind(null,2999))})),Je=function(e,t,n){return{label:e,id:t,content:function(){return Object(x.jsx)(g.a,{ErrorContent:function(t){return Object(x.jsxs)(s.default,{type:"error",children:["Unable to render tab ",e,".",Object(x.jsx)("pre",{children:JSON.stringify(t)})]})},children:n()})},disabled:arguments.length>3&&void 0!==arguments[3]&&arguments[3]}};function Ve(e){var t,n=e.forceJobRunsRefresh,s=e.showNodeDetails,p=void 0===s||s,g=Object(l.a)(),v=g.values,y=v.hasBeenSaved,S=v.jobConfig.jobMode,C=g.errors,E=g.touched,I=Object(b.h)(),T=Object(b.j)(),M=T.tabId,N=T.jobName,L=I.location.pathname,R=Object(_e.a)(L),A=R.matchingRoute,_=R.replaceRouteParam,P=Object(f.b)((function(e){return{setActiveTabId:e.setActiveTabId,setSelectedObservation:e.setSelectedObservation}}),Pe.shallow),U=P.setActiveTabId,G=P.setSelectedObservation;Object(u.useEffect)((function(){var e=N?{jobName:encodeURIComponent(N)}:{};U(M),M||"VISUAL_MODE"!==S?M||"DEVELOPER_MODE"!==S?M||"NOTEBOOK_MODE"!==S||I.replace(_(A,Object(r.a)({tabId:w.TabsIds.Notebook},e))):I.replace(_(A,Object(r.a)({tabId:w.TabsIds.Script},e))):I.replace(_(A,Object(r.a)({tabId:w.TabsIds.Graph},e)))}),[I,N,A,S,_,M,U]);var F=null===C||void 0===C?void 0:C.jobConfig,B=null===E||void 0===E?void 0:E.jobConfig,q=Object(u.useMemo)((function(){return F&&B?Object.keys(F).filter((function(e){return e in B})).length:0}),[F,B]),J=null===C||void 0===C?void 0:C.dag,W=null===E||void 0===E?void 0:E.dag,z=Object(u.useMemo)((function(){return J&&W?Object.keys(J).filter((function(e){return e in W})).length:0}),[J,W]),H=Object(u.useMemo)((function(){var e=[Je(Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(d.a,{id:"visual.editor.tabs.details",defaultMessage:"Job details",description:"Title for the tab containing a job's detailed configuration."}),Object(x.jsx)(he.a,{errors:q})]}),w.TabsIds.Details,(function(){return Object(x.jsx)(O.c,{})})),Je(Object(x.jsx)(d.a,{id:"visual.editor.tabs.runs",defaultMessage:"Runs",description:"Title for the tab containing a job's run history."}),w.TabsIds.Run,(function(){return Object(x.jsx)(D,{forceJobRunsRefresh:n})}),!y)];return[].concat(Object(o.a)("VISUAL_MODE"!==S?[]:[Je(Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(d.a,{id:"visual.editor.tabs.graph",defaultMessage:"Visual",description:"Title for the tab containing a job's visual representation."}),Object(x.jsx)(he.a,{errors:z})]}),w.TabsIds.Graph,(function(){return Object(x.jsx)(Ue,{showNodeDetails:p})}))]),Object(o.a)("NOTEBOOK_MODE"!==S?[]:[Je(Object(x.jsx)(d.a,{id:"visual.editor.tabs.notebook",defaultMessage:"Notebook",description:"Title for the tab containing a job's notebook."}),w.TabsIds.Notebook,(function(){return Object(x.jsx)(x.Fragment,{})}))]),[Je(Object(x.jsx)(d.a,{id:"visual.editor.tabs.script",defaultMessage:"Script",description:"Title for the tab containing a job's script."}),w.TabsIds.Script,(function(){return Object(x.jsx)(je,{})}))],e,Object(o.a)(h.a.isEnabled("feature-transform-dq")?[Je(h.a.isEnabled("feature-dq-observations")?Object(x.jsxs)(i.default,{direction:"horizontal",size:"xxs",children:[Object(x.jsx)(d.a,{id:"visual.editor.tabs.dataquality.observations",defaultMessage:"Data quality",description:"Title for the tab containing the DQ info"}),Object(x.jsx)("span",{children:"-"},"dq-updated-dash"),Object(x.jsx)("em",{children:Object(x.jsx)(d.a,{id:"visual.editor.tabs.dataquality.updated",defaultMessage:"updated",description:"tag for updated dq tab"})})]}):Object(x.jsx)(d.a,{id:"visual.editor.tabs.dataquality",defaultMessage:"Data quality",description:"Title for the tab containing the DQ info"}),w.TabsIds.DataQuality,(function(){return h.a.isEnabled("feature-dq-observations")?Object(x.jsx)(qe,{}):Object(x.jsx)(Be,{})}))]:[]),Object(o.a)(h.a.isEnabled("feature-job-scheduling")?[Je(Object(x.jsx)(d.a,{id:"visual.editor.tabs.schedule",defaultMessage:"Schedules",description:"Title for the tab containing a job's schedules."}),w.TabsIds.Schedule,(function(){return Object(x.jsx)(Ge,{})}),!y)]:[]),Object(o.a)(h.a.isEnabled("feature-devops")?[Je(Object(x.jsx)(x.Fragment,{children:Object(x.jsx)(d.a,{id:"visual.editor.tabs.versionControl",defaultMessage:"Version Control",description:"Title for the tab containing a job's version control details."})}),w.TabsIds.VersionControl,(function(){return Object(x.jsx)(Fe,{})}))]:[]))}),[q,y,S,z,n,p]),K=Object(u.useCallback)((function(e){var t=e.detail.activeTabId;G(void 0);var n=N?{jobName:encodeURIComponent(N)}:{};I.push(_(A,Object(r.a)({tabId:t},n))),Object(j.e)(j.d.CLICK,"node-detail-panel-tab-change",null,t)}),[I,N,A,_,G]),Q=Object(m.b)((t={"glue__visual-editor-tabs":!0},Object(a.a)(t,"glue__visual-editor-tabs--".concat(M),!0),Object(a.a)(t,"glue__visual-editor-tabs--visual-mode","VISUAL_MODE"===S),Object(a.a)(t,"glue__visual-editor-tabs--notebook-mode","NOTEBOOK_MODE"===S),t));return Object(x.jsx)(V,{jobMode:S,children:Object(x.jsxs)(k,{jobMode:S,children:[Object(x.jsx)(c.a,{className:Q,tabs:H,activeTabId:M,onChange:K}),Object(x.jsx)(Ae,{jobMode:S,selectedTabId:M}),Object(x.jsx)(De,{jobMode:S,selectedTabId:M})]})})}},2885:function(e,t,n){"use strict";n.d(t,"a",(function(){return z}));var a=n(3),o=n(24),r=n(2),i=n(210),s=n(10),c=n.n(s),l=n(0),u=n(687),d=n(97),b=n(914),p={"SSE-KMS":"aws:kms","SSE-S3":"AES256"},f=function(e){return p[e]},j=n(124),h=n(76),m=n(30),g=n(2698),O=n(2667);var v=n(137),y=n(876),x=n(2779),S=n(8),k=n(95),C=function(e){if("DataSource"===e.classification&&!0===e.isCatalog){if("MySQL"===e.type||"OracleSQL"===e.type||"SQLServer"===e.type||"PostgresSQL"===e.type||"Catalog"===e.type)return{tableName:e.table,databaseName:e.database};if("S3"===e.type&&(e.isCatalog||!e.format))return{tableName:e.table,databaseName:e.database}}else if("DataSink"===e.classification&&"Catalog"===e.type)return{tableName:e.table,databaseName:e.database}};function E(e,t){return e.concat(t)}var w=function(){var e=Object(d.c)(k.a,"getTable"),t=Object(r.a)(e,1)[0];return Object(l.useCallback)(function(){var e=Object(o.a)(c.a.mark((function e(n){var a,o,r,i,s,l;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=new Map,e.t0=c.a.keys(n);case 2:if((e.t1=e.t0()).done){e.next=12;break}if(o=e.t1.value,r=n[o],i=C(r)){e.next=8;break}return e.abrupt("continue",2);case 8:s=E(i.tableName,i.databaseName),a.set(s,i),e.next=2;break;case 12:return e.next=14,Promise.all(Object(S.a)(a.values()).map((function(e){return t({Name:e.tableName.valueOf(),DatabaseName:e.databaseName.valueOf()})})));case 14:return l=e.sent,e.abrupt("return",l.reduce((function(e,t){var n,a,o,r;null!==t&&void 0!==t&&null!==(n=t.Table)&&void 0!==n&&n.DatabaseName&&(null!==t&&void 0!==t&&null!==(a=t.Table)&&void 0!==a&&null!==(o=a.StorageDescriptor)&&void 0!==o&&o.Location&&/^s3[an]?.*\/\//.test(t.Table.StorageDescriptor.Location)&&e.set(E(t.Table.Name,t.Table.DatabaseName),"S3BACKED"),"GOVERNED"===(null===t||void 0===t||null===(r=t.Table)||void 0===r?void 0:r.TableType)&&e.set(E(t.Table.Name,t.Table.DatabaseName),"GOVERNED"));return e}),new Map));case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[t])};function I(e,t){var n=Object(g.b)(e),a={},o={};return Object.keys(n).forEach((function(e,r){var i=n[e],s=e.toString();if("DataSource"!==i.classification||"S3"!==i.type||!i.isCatalog&&i.format)if("DataSink"===i.classification&&"Catalog"===i.type){var c=t.get(E(i.table,i.database));"S3BACKED"===c?a[s]=!0:"GOVERNED"===c?o[s]=!0:(a[s]=!1,o[s]=!1)}else a[s]=!1,o[s]=!1;else{var l=t.get(E(i.table,i.database));"S3BACKED"===l?a[s]=!0:"GOVERNED"===l?o[s]=!0:(a[s]=!1,o[s]=!1)}return r})),{s3Backed:a,governedBacked:o}}var T=n(2780),M=n(2754),N=n(52),L=n(74),R=n(761),D=function(e){var t=Object.assign({},e);for(var n in t)t[n].sqlQuery&&"string"===typeof t[n].sqlQuery&&(t[n].sqlQuery=t[n].sqlQuery.trim());return t},A=n(900),_=n(2896);var P=n(61),U=n(58),G=n(757),F=function(e){var t=e.securityConfigEncryption,n=e.serverEncryption;return t?Object(a.a)(Object(a.a)({},t.kmsKeyArn&&{SSEKMSKeyId:t.kmsKeyArn}),{},{ServerSideEncryption:t.serverSideEncryption}):n?{ServerSideEncryption:"AES256"}:{}},B=n(2724),q=n(1),J={"x-amz-expected-bucket-owner":U.b.accountId};var V={"x-amz-expected-bucket-owner":U.b.accountId};var W=n(2665);function z(e,t){var n,s,p=function(e){var t,n=Object(d.c)(h.f,"getJob"),s=Object(i.a)(n),u=s[0],b=s.slice(1),p=Object(d.c)(h.f,e?"createJob":"updateJob"),f=Object(i.a)(p),j=f[0],S=f.slice(1),k=Object(l.useState)(),C=Object(r.a)(k,2),E=C[0],P=C[1],U=m.a.isEnabled("feature-use-dag-api"),G=Object(x.a)(),F=Object(r.a)(G,2),B=F[0],q=F[1],J=Object(_.b)().networkConnectionOptions,V=Object(T.a)(),W=V.isFeatureEnabled,z=V.getDynamicTransformsFromCache,H=w(),K=Object(l.useCallback)(function(){var t=Object(o.a)(c.a.mark((function t(n){var a,o,r,i,s,l,d,b,p,f,h,x,S,k,C,E,w,T,_,G,F,q,V,K;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=n.jobConfig,i=n.dag,s=void 0===i?{}:i,l=r.jobMode,d=r.pythonPath,b=r.jobParameters,p=r.dependentPath,f=U&&"VISUAL_MODE"===l&&0!==Object.keys(s).length,e||f){t.next=9;break}return t.t0=P,t.next=7,u({JobName:r.name});case 7:t.t1=t.sent,(0,t.t0)(t.t1);case 9:return t.next=11,B(s,l);case 11:if(h=t.sent,!f){t.next=18;break}return t.next=15,H(s);case 15:t.t2=t.sent,t.next=19;break;case 18:t.t2=new Map;case 19:if(x=t.t2,S=I(s,x),k=S.s3Backed,C=S.governedBacked,E=JSON.stringify(Object(g.b)(m.a.isEnabled("feature-node-name")?Object(O.a)(Object(O.b)(s)):2===Object(O.c)(s)?Object(O.m)(s):s)),w=null!==(a=null===(o=b.find((function(e){return e.key===L.a.ExtraPyFiles})))||void 0===o?void 0:o.value)&&void 0!==a?a:"",T=Object(A.a)(null!==d&&void 0!==d?d:"",w).join(","),_=Object(A.a)(null!==p&&void 0!==p?p:"").join(","),G=new Map,"VISUAL_MODE"===r.jobMode&&(W&&(F=z(),T=Object(M.a)({dag:s,dynamicTransforms:F,pythonPath:d,extraPyFilesJobArgument:w}),Object(M.b)(F,s)),q=Object(O.g)(s),m.a.isEnabled("feature-transform-databrew-recipe")&&q.has("Recipe")&&(T=Object(R.b)(T),_=Object(R.a)(_)),q.has("SqlCode")&&(s=D(s)),y.b&&Object.values(s).forEach((function(e){"format"in e&&y.a.includes(e.format)&&G.set(e.format,(G.get(e.format)||0)+1)}))),(V=Array.from(G.keys())).length&&V.forEach((function(e){Object(N.e)(N.d.SAVE,"DataLakeFormats:SaveJobWithDataLakeFormat:"+e,G.get(e))})),K={jobConfig:r,connectionsList:h,codegenConfigDag:E,s3Backed:k,governedBacked:C,dataLakeFormats:V,pythonPathToUpdate:T,dependentPathUpdate:_,networkConnectionOptions:J},!e){t.next=34;break}return t.abrupt("return",j(Object(v.b)(K)));case 34:return t.abrupt("return",j(Object(v.c)(K)));case 35:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),[e,u,j,B,H,U,W,z,J]),Q=Object(d.e)(b,q,S),Y=Object(r.a)(Q,2),X=Y[0],Z=Y[1],$=Object(d.c)(h.f,"deleteJob"),ee=Object(r.a)($,1)[0],te=Object(d.c)(h.f,"updateJob"),ne=Object(r.a)(te,1)[0];"init"!==S[0].status&&(t="JobName"in S[0].params?S[0].params.JobName:S[0].params.Name);var ae=Object(l.useCallback)((function(){if(t){if(e)return ee({JobName:t});if(E){var n,a,o,r,i,s,c,l,u,d=Object(v.a)(E),b=Object(v.c)({jobConfig:d,connectionsList:null!==(n=null===(a=E.Job)||void 0===a||null===(o=a.Connections)||void 0===o?void 0:o.Connections)&&void 0!==n?n:[],pythonPathToUpdate:null!==(r=null===(i=E.Job)||void 0===i||null===(s=i.DefaultArguments)||void 0===s?void 0:s[L.a.ExtraPyFiles])&&void 0!==r?r:"",dependentPathUpdate:null!==(c=null===(l=E.Job)||void 0===l||null===(u=l.DefaultArguments)||void 0===u?void 0:u[L.a.ExtraJars])&&void 0!==c?c:""});return ne(b)}}}),[e,t,E,ee,ne]);return[K,X,Object(a.a)(Object(a.a)({},Z),{},{rollbackJobConfig:ae})]}(e),S=Object(i.a)(p),k=S[0],C=S.slice(1),E=function(e){var t=Object(d.c)(h.f,"getDag"),n=Object(i.a)(t),s=n[0],u=n.slice(1),b=Object(d.c)(h.f,e?"createDag":"updateDag"),p=Object(i.a)(b),f=p[0],j=p.slice(1),v=Object(l.useState)(),y=Object(r.a)(v,2),x=y[0],S=y[1],k=Object(l.useCallback)(function(){var t=Object(o.a)(c.a.mark((function t(n){var a,o;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=6;break}return t.next=3,s({JobName:n.jobConfig.name});case 3:a=t.sent,o=a.Dag,S(o);case 6:return Object(O.n)(n.dag),t.abrupt("return",f({Dag:JSON.stringify(Object(g.b)(m.a.isEnabled("feature-node-name")?Object(O.a)(Object(O.b)(n.dag)):2===Object(O.c)(n.dag)?Object(O.m)(n.dag,1):n.dag)),JobName:n.jobConfig.name}));case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),[e,s,f]),C=Object(d.e)(u,j),E=Object(r.a)(C,2),w=E[0],I=E[1],T=Object(d.c)(h.f,"deleteDag"),M=Object(r.a)(T,1)[0],N=Object(d.c)(h.f,"updateDag"),L=Object(r.a)(N,1)[0],R="init"!==j[0].status&&j[0].params.JobName,D=Object(l.useCallback)((function(){if(R){if(e)return M({JobName:R});if(x)return L({Dag:x,JobName:R})}}),[e,R,x,M,L]);return[k,w,Object(a.a)(Object(a.a)({},I),{},{rollbackDag:D})]}(e),U=Object(i.a)(E),z=U[0],H=U.slice(1),K=function(){var e=Object(d.c)(h.f,"createScript"),t=Object(i.a)(e),n=t[0],o=t.slice(1),s=Object(d.c)(h.s,"headBucket",J),c=Object(i.a)(s),u=c[0],b=c.slice(1),p=Object(d.c)(h.s,"createBucket"),f=Object(i.a)(p),g=f[0],O=f.slice(1),v=Object(d.c)(h.s,"putPublicAccessBlock"),y=Object(r.a)(v,1)[0],x=Object(j.a)().pushNotification,S=Object(d.c)(h.s,"putObject"),k=Object(i.a)(S),C=k[0],E=k.slice(1),w=b[1].reset,I=O[1].reset,T=Object(l.useCallback)((function(e){var t=e.dag,o=e.jobConfig,s=e.script,c=o.jobMode,l=(o.language||"python").split("-")[0].toUpperCase(),d=o.scriptLocation.split("/"),b=Object(i.a)(d),p=b[2],f=b.slice(3),j="".concat(f.join("/")).concat(o.scriptName),h="DEVELOPER_MODE"===c||"NOTEBOOK_MODE"===c?Promise.resolve({Script:s}):n({Dag:JSON.stringify(Object(B.b)(t)),Language:l.toUpperCase()}),O=u({Bucket:p}).then((function(){return I()})).catch((function(e){if(404===(null===e||void 0===e?void 0:e.statusCode))return w(),g({Bucket:p}).then((function(){m.a.isEnabled("feature-s3-block-public-access")&&y({Bucket:p,PublicAccessBlockConfiguration:{BlockPublicAcls:!0,BlockPublicPolicy:!0,IgnorePublicAcls:!0,RestrictPublicBuckets:!0}}).catch((function(){x({type:"error",header:Object(q.jsx)(P.a,{id:"notification.s3pba.failed.header",defaultMessage:"Failed to set bucket {Bucket} with Block Public Access on. ",values:{Bucket:p},description:"Header text for the notification when setting public access block for newly created bucket fails"}),content:Object(q.jsx)(P.a,{id:"notification.s3pba.failed.content",defaultMessage:"Please check your permissions on s3:PutBucketPublicAccessBlock and visit S3 to set Public Access Block to on for the newly created bucket: https://docs.aws.amazon.com/AmazonS3/latest/userguide/access-control-block-public-access.html",description:"Content text for the notification when setting public access block for newly created bucket fails"}),dismissLabel:"dismiss",overloadedNotification:!0})}))}));if(403!==(null===e||void 0===e?void 0:e.statusCode)||"s3://".concat(p)===G.e)throw e;w()})).then((function(){}));return Promise.all([h,O]).then((function(e){var t=Object(r.a)(e,1)[0].Script;return C(Object(a.a)({Bucket:p,Key:j,Body:t||""},F(o)))}))}),[n,u,I,w,g,C,y,x]),M=Object(d.e)(o,b,O,E),N=Object(r.a)(M,2);return[T,N[0],N[1]]}(),Q=Object(i.a)(K),Y=Q[0],X=Q.slice(1),Z=function(){var e=Object(d.c)(h.s,"headBucket",V),t=Object(i.a)(e),n=t[0],s=t.slice(1),u=Object(d.c)(h.s,"createBucket"),b=Object(i.a)(u),p=b[0],f=b.slice(1),g=Object(d.c)(h.s,"putPublicAccessBlock"),O=Object(r.a)(g,1)[0],v=Object(j.a)().pushNotification,y=Object(d.c)(h.s,"putObject"),x=Object(i.a)(y),S=x[0],k=x.slice(1),C=s[1].reset,E=f[1].reset,w=Object(l.useCallback)(function(){var e=Object(o.a)(c.a.mark((function e(t){var o,s,l,u,d,b,f,j,h,g,y,x,k;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=t.jobConfig,s=t.notebook,l=o.scriptLocation.split("/"),u=Object(i.a)(l),d=u[2],b=u.slice(3),f="".concat(b.join("/").replace("scripts/",""),"notebooks/").concat(o.name,".ipynb"),j=Promise.resolve({Notebook:s}),h=n({Bucket:d}).then((function(){return E()})).catch((function(e){if(404===(null===e||void 0===e?void 0:e.statusCode))return C(),p({Bucket:d}).then((function(){m.a.isEnabled("feature-s3-block-public-access")&&O({Bucket:d,PublicAccessBlockConfiguration:{BlockPublicAcls:!0,BlockPublicPolicy:!0,IgnorePublicAcls:!0,RestrictPublicBuckets:!0}}).catch((function(){v({type:"error",header:Object(q.jsx)(P.a,{id:"notification.s3pba.failed.header",defaultMessage:"Failed to set bucket {Bucket} with Block Public Access on. ",values:{Bucket:d},description:"Header text for the notification when setting public access block for newly created bucket fails"}),content:Object(q.jsx)(P.a,{id:"notification.s3pba.failed.content",defaultMessage:"Please check your permissions on s3:PutBucketPublicAccessBlock and visit S3 to set Public Access Block to on for the newly created bucket: https://docs.aws.amazon.com/AmazonS3/latest/userguide/access-control-block-public-access.html",description:"Content text for the notification when setting public access block for newly created bucket fails"}),dismissLabel:"dismiss",overloadedNotification:!0})}))}));if(403!==(null===e||void 0===e?void 0:e.statusCode)||"s3://".concat(d)===G.e)throw e;C()})).then((function(){})),e.next=7,Promise.all([j,h]);case 7:return g=e.sent,y=Object(r.a)(g,1),x=y[0].Notebook,k=JSON.stringify(x),e.next=13,S(Object(a.a)({Bucket:d,Key:f,Body:k},F(o)));case 13:return e.abrupt("return",e.sent);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[n,E,C,p,S,O,v]),I=Object(d.e)(s,f,k),T=Object(r.a)(I,2);return[w,T[0],T[1]]}(),$=Object(i.a)(Z),ee=$[0],te=$.slice(1),ne=Object(j.a)().pushNotification,ae=Object(l.useState)(),oe=Object(r.a)(ae,2),re=oe[0],ie=oe[1],se=m.a.isEnabled("feature-use-dag-api"),ce=se&&"VISUAL_MODE"===t,le=Object(b.a)(),ue=Object(W.b)((function(e){return e})),de=ue.setSaving,be=Object(l.useCallback)(function(){var e=Object(o.a)(c.a.mark((function e(t){var n,a,o,r,i,s,l,u,d,b,p,j,h;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(de(!0),o=le.find((function(e){return e.Name===t.jobConfig.security})),null!==(r=null===o||void 0===o||null===(n=o.EncryptionConfiguration)||void 0===n||null===(a=n.S3Encryption)||void 0===a?void 0:a[0])&&void 0!==r&&r.S3EncryptionMode?t.jobConfig.securityConfigEncryption={kmsKeyArn:r.KmsKeyArn,serverSideEncryption:f(r.S3EncryptionMode)}:delete t.jobConfig.securityConfigEncryption,i=t.jobConfig,"VISUAL_MODE"!==(s=i.jobMode)||!se||!t.dag||0===Object.keys(t.dag).length){e.next=9;break}return l=k(t),e.abrupt("return",Promise.all([l]));case 9:if("NOTEBOOK_MODE"!==s){e.next=22;break}return u=k(t),e.prev=11,e.next=14,u;case 14:return d=Y(t),b=ee(t),e.abrupt("return",Promise.all([u,b,d]));case 19:return e.prev=19,e.t0=e.catch(11),e.abrupt("return",Promise.all([u]));case 22:if(p=Y(t),j=k(t),"DEVELOPER_MODE"!==s){e.next=26;break}return e.abrupt("return",Promise.all([j,p]));case 26:return h=z(t),e.abrupt("return",Promise.all([j,h,p]));case 28:case"end":return e.stop()}}),e,null,[[11,19]])})));return function(t){return e.apply(this,arguments)}}(),[k,z,Y,ee,se,le,de]),pe=Object(d.e)(X,te,C,H),fe=Object(r.a)(pe,2),je=fe[0],he=fe[1],me=Object(r.a)(C,2),ge=me[0],Oe=me[1].rollbackJobConfig,ve=Object(r.a)(H,2),ye=ve[0],xe=ve[1].rollbackDag,Se="init"===ye.status?void 0:ye,ke="init"===ge.status?void 0:ge,Ce=(null===ke||void 0===ke||null===(n=ke.params)||void 0===n?void 0:n.Name)||(null===ke||void 0===ke||null===(s=ke.params)||void 0===s?void 0:s.JobName),Ee="createDag"===(null===Se||void 0===Se?void 0:Se.methodName)?"create":"update";return Object(l.useEffect)((function(){"success"===je.status&&ie((new Date).toLocaleString())}),[je.status]),Object(l.useEffect)((function(){"error"!==je.status||"success"!==ge.status||ce||Oe()}),[Oe,ge.status,je.status,ce]),Object(l.useEffect)((function(){"error"!==je.status||"success"!==ye.status||ce||xe()}),[xe,ye.status,je.status,ce]),Object(l.useEffect)((function(){if(Ce)switch(je.status){case"success":return ne(Object(u.c)(Ee,Ce));case"error":return ne(Object(u.a)(Ee,je.errorMessage));case"loading":return ne(Object(u.b)(Ee,Ce))}}),[Ce,Ee,ne,je]),[be,je,Object(a.a)(Object(a.a)({},he),{},{lastSaved:re})]}},2886:function(e,t,n){"use strict";n.d(t,"a",(function(){return ae}));var a,o,r=n(5),i=n(3),s=n(2),c=n(889),l=n(46),u=n(0),d=n(351),b=n(136),p=n(2665),f=n(52),j=n(2671),h=n(2678),m=n(2818),g=["title","titleId"];function O(){return O=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},O.apply(this,arguments)}function v(e,t){if(null==e)return{};var n,a,o=function(e,t){if(null==e)return{};var n,a,o={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function y(e,t){var n=e.title,r=e.titleId,i=v(e,g);return u.createElement("svg",O({width:"14px",height:"14px",viewBox:"0 0 14 14",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",ref:t,"aria-labelledby":r},i),void 0===n?u.createElement("title",{id:r},"Expand"):n?u.createElement("title",{id:r},n):null,a||(a=u.createElement("defs",null,u.createElement("path",{d:"M7,1 L7,3 L4.415,3 L8,6.585 L11.584,3 L9,3 L9,1 L15,1 L15,7 L13,7 L13,4.414 L9.415,8 L13,11.585 L13,9 L15,9 L15,15 L9,15 L9,13 L11.585,13 L8,9.415 L4.414,13 L7,13 L7,15 L1,15 L1,9 L3,9 L3,11.584 L6.585,8 L3,4.415 L3,7 L1,7 L1,1 L7,1 Z",id:"expand-path"}))),o||(o=u.createElement("g",{stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd"},u.createElement("g",{transform:"translate(-339.000000, -162.000000)"},u.createElement("g",{transform:"translate(338.000000, 161.000000)"},u.createElement("mask",{fill:"white"},u.createElement("use",{xlinkHref:"#expand-path"})),u.createElement("use",{className:"glue__icon-fill",fill:"#545B64",xlinkHref:"#expand-path"}))))))}var x,S,k=u.forwardRef(y),C=(n.p,["title","titleId"]);function E(){return E=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},E.apply(this,arguments)}function w(e,t){if(null==e)return{};var n,a,o=function(e,t){if(null==e)return{};var n,a,o={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function I(e,t){var n=e.title,a=e.titleId,o=w(e,C);return u.createElement("svg",E({width:"14px",height:"14px",viewBox:"0 0 14 14",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",ref:t,"aria-labelledby":a},o),void 0===n?u.createElement("title",{id:a},"Collapse"):n?u.createElement("title",{id:a},n):null,x||(x=u.createElement("defs",null,u.createElement("path",{d:"M14,1 C14.5522847,1 15,1.44771525 15,2 L15,14 C15,14.5522847 14.5522847,15 14,15 L2,15 C1.44771525,15 1,14.5522847 1,14 L1,2 C1,1.44771525 1.44771525,1 2,1 L14,1 Z M13,3 L3,3 L3,13 L13,13 L13,3 Z M12,7 L12,12 L4,12 L4,7 L12,7 Z",id:"collapse-path"}))),S||(S=u.createElement("g",{stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd"},u.createElement("g",{transform:"translate(-339.000000, -228.000000)"},u.createElement("g",{transform:"translate(338.000000, 227.000000)"},u.createElement("mask",{fill:"white"},u.createElement("use",{xlinkHref:"#collapse-path"})),u.createElement("use",{className:"glue__icon-fill",fill:"#545B64",transform:"translate(8.000000, 8.000000) rotate(270.000000) translate(-8.000000, -8.000000) ",xlinkHref:"#collapse-path"}))))))}var T=u.forwardRef(I);n.p,n(2948);var M=n(99),N=n(61),L=n(42),R=n(1212),D=n(50),A=n(195),_=n(2667),P=(n(2949),n(57)),U=n(1),G=["validations"],F=["ApplyMapping","SelectFields","DropFields","SplitFields"];function B(e){return!Object(_.k)(e)||Object(u.isValidElement)(e)}var q=function(e){var t,n=e.descriptor,a=e.fieldsPath,o=Object(l.a)(),r=o.getFieldMeta,c=o.values,u=c.dag,d=void 0===u?{}:u,b=c.jobConfig,p=d[a.split(".")[1]],f=Object(A.c)("glue__no-container-padding",{"auto-height":"Filter"===p.type});if(F.includes(p.type)){var j=n.fields[0],h="".concat(a,".").concat(j.name);return Object(U.jsx)("div",{className:f,children:Object(U.jsx)(j.component,{node:p,name:h,editable:!0})})}return Object(U.jsx)(R.a,{children:Object(U.jsx)("div",{"data-awsui-column-layout-root":"true",children:null===(t=n.fields)||void 0===t?void 0:t.map((function(e,t){var n=!e.name,o=n?a:"".concat(a,".").concat(e.name),c=e.validations,l=Object(L.a)(e,G),u=r(o),d=u.error,f=u.touched;if(e.condition&&!e.condition(o,p,b))return null;if(d&&n){var j=Object.values(d);d=Object(s.a)(j,1)[0]}return e.component===P.a?Object(U.jsx)(P.a,{name:o,node:p,label:l.label,description:l.description,editable:!0},t):Object(U.jsx)("div",{className:e.wrapperClass,children:Object(U.jsx)(D.default,Object(i.a)(Object(i.a)({stretch:!0},l),{},{errorText:f&&c&&B(d)&&!e.internalValidations?d:null,children:Object(U.jsx)(e.component,{name:o,node:p,editable:!0})}))},t)}))})})},J=n(403),V=n(401),W=n(48),z=n(901);function H(e){var t=e.name,n=Object(_.e)(t),a=Object(W.a)(t),o=Object(s.a)(a,3),r=o[0].value,c=o[1],d=c.error,b=c.touched,p=o[2],f=p.setValue,j=p.setTouched,h=Object(l.a)().values.dag,m=void 0===h?{}:h,g=Object(u.useMemo)((function(){return Object.entries(m).reduce((function(e,t){var a=Object(s.a)(t,2),o=a[0],r=a[1],i=Object(s.a)(e,3),c=i[0],l=i[1],u=i[2];if(n!==o){var d={label:r.name,value:o,description:"".concat(r.type," - ").concat(r.classification)};switch(r.classification){case"DataSink":break;case"DataSource":c.options.push(d);break;case"Transform":l.options.push(d);break;default:u.options.push(d)}}return e}),[{label:"Data sources",options:[]},{label:"Transforms",options:[]},{label:"Unclassified nodes",options:[]}])}),[m,n]),O=Object(u.useMemo)((function(){var e=Object.values(g).map((function(e){return e.options})).flat(1),t=r.map((function(t){return e.find((function(e){return e.value===t}))}));return{selectedOptions:t}}),[r,g]),v=Object(u.useCallback)((function(e){var t=e.detail.selectedOptions.map((function(e){return e.value}));f(t),j(!0)}),[f,j]),y=Object(z.a)("parent node");return Object(U.jsx)(V.a,Object(i.a)(Object(i.a)(Object(i.a)({},y),O),{},{options:g,filteringType:"auto",onChange:v,invalid:!!d&&b,deselectAriaLabel:function(e){return"Remove ".concat(e.label)}}))}n(2950);var K=n(2901);function Q(e){var t,n,a,o,r=e.selectedNodeId,i="dag.".concat(r),s=Object(l.a)(),c=s.values.dag,u=void 0===c?{}:c,d=s.errors,b=s.touched,f=u[r],j=null===(t=u[f.inputs[0]])||void 0===t?void 0:t.type,h=K.b.includes(j)&&"SelectFromCollection"===(null===f||void 0===f?void 0:f.type),m=!(null===(n=b.dag)||void 0===n||!n[r])?null===(a=d.dag)||void 0===a||null===(o=a[r])||void 0===o?void 0:o.inputs:null;return Object(p.b)((function(e){return e.isRecipeAuthoringModeEnabled}))?null:Object(U.jsx)("div",{className:"glue__node-properties-container",children:Object(U.jsxs)(M.default,{size:"m",children:[Object(U.jsx)(D.default,{label:Object(U.jsx)(N.a,{id:"job.edit.nodeProperties.nameInput.label",defaultMessage:"Name",description:"Label for the form field allowing to change a node's name in the DAG."}),stretch:!0,children:Object(U.jsx)(P.p,{name:"".concat(i,".name"),"aria-label":"Node name",placeholder:"Node name",editable:!h})}),"DataSource"!==f.classification&&!h&&Object(U.jsx)(D.default,{label:Object(U.jsx)(N.a,{id:"job.edit.nodeProperties.parentSelector.label",defaultMessage:"Node parents",description:"Label for the form field allowing to select the parents for a node in the DAG."}),description:Object(U.jsx)(N.a,{id:"job.edit.nodeProperties.parentSelector.description",defaultMessage:"Choose which nodes will provide inputs for this one.",description:"Description for the form field allowing to select the parents for a node in the DAG."}),stretch:!0,errorText:m,children:Object(U.jsx)(H,{name:"".concat(i,".inputs"),editable:!0})})]})})}var Y=n(2869),X=n(2823),Z=n(2834),$=n(2890),ee=n(2821);var te=function(e,t){var n;if(["ConnectorDataSource","ConnectorDataTarget"].includes(null!==(n=null===e||void 0===e?void 0:e.type)&&void 0!==n?n:"")){var a="DataSource"===(null===e||void 0===e?void 0:e.classification)?"Data source":"Data sink";return"".concat(a," properties - ").concat(null===e||void 0===e?void 0:e.name)}return t},ne=n(30);function ae(e){var t=e.form,n=Object(l.a)(),a=n.values,o=a.dag,g=a.jobConfig,O=n.setTouched,v=Object(d.a)(),y=Object(u.useContext)(h.a).onTabEvent,x=Object(j.b)().isResourcePanelAndPanelLayoutEnabled,S=ne.a.isEnabled("feature-datapreview-v2"),C=Object(p.b)((function(e){return{isSchemaEditorVisible:e.isSchemaEditorVisible,setIsSchemaEditorVisible:e.setIsSchemaEditorVisible,isDetailPanelExpanded:e.isDetailPanelExpanded,setIsDetailPanelExpanded:e.setIsDetailPanelExpanded,selectedNodeId:e.selectedNodeId,setHorizontalLayout:e.setHorizontalLayout}}),b.shallow),E=C.setIsSchemaEditorVisible,w=C.isDetailPanelExpanded,I=C.setIsDetailPanelExpanded,L=C.selectedNodeId,R=C.setHorizontalLayout,D=L?"dag.".concat(L):void 0,A=L?o[L].type:void 0,P=L?o[L]:void 0,G=function(e){var t,n,a=Object(l.a)(),o=a.errors,r=a.touched,i=e?null===o||void 0===o||null===(t=o.dag)||void 0===t?void 0:t[e]:void 0,c=!(!e||null===r||void 0===r||null===(n=r.dag)||void 0===n||!n[e]),d=Object(u.useMemo)((function(){if(!c)return[0,0];var e=0,t=i?Object.keys(i).length:0;return null!==i&&void 0!==i&&i.type&&e++,null!==i&&void 0!==i&&i.inputs&&e++,[e,t-e]}),[i,c]),b=Object(s.a)(d,2);return[b[0],b[1]]}(L),F=Object(s.a)(G,2),B=F[0],V=F[1],W="".concat(A,"-tab"),z=Object(u.useState)(W),H=Object(s.a)(z,2),K=H[0],ae=H[1],oe=Object(u.useCallback)((function(e){if(ae(e),Object(f.e)(f.d.CLICK,"node-detail-panel-tab-change","user-initiated tab change",e),"data-preview-tab"===e){var t=Object.keys(o).reduce((function(e,t){return Object(i.a)(Object(i.a)({},e),{},Object(r.a)({},t,!0))}),{});O({dag:t},!0)}}),[o,O]);Object(u.useEffect)((function(){"Empty"===A&&ae("nodeProperties")}),[A,ae]),Object(u.useEffect)((function(){A&&ae(W)}),[A,ae,W]);var re=Object(u.useCallback)((function(e){"ExplorerEditButtonClicked"===e?(E(!0),I(!0)):(E(!1),I(!1))}),[E,I]),ie=Object(u.useCallback)((function(){ae("output-schema-tab"),I(!0),E(!0)}),[ae,E,I]);Object(u.useEffect)((function(){return y(ie)}),[y,ie]);var se=Object(u.useMemo)((function(){return function(e){var t,n=e.selectedNode,a=e.selectedNodeType,o=e.selectedNodeId,r=e.nbNodePropsErrors,i=e.nbOtherErrors,s=e.form,c=e.expanded,l=e.fieldsPath,u=e.handleEvents,d=e.isResourcePanelAndPanelLayoutEnabled,b=void 0!==d&&d,p=e.isDataPreviewV2Enabled,f=void 0!==p&&p,j=[],h=n&&Object(_.f)(n);return o&&l?("Empty"!==a&&(t=c&&"CustomCode"===a?Object(U.jsx)(J.a,{children:Object(U.jsx)(Z.a,{nodeId:o,largeNodeDetail:!0,children:Object(U.jsxs)(M.default,{size:"m",children:[Object(U.jsx)(Q,{selectedNodeId:o}),Object(U.jsx)(q,{descriptor:s,fieldsPath:l})]})})}):Object(U.jsx)(J.a,{children:Object(U.jsxs)(M.default,{size:"m",children:[Object(U.jsx)(Q,{selectedNodeId:o}),Object(U.jsx)(q,{descriptor:s,fieldsPath:l})]})}),j.push({id:"".concat(a,"-tab"),label:Object(U.jsxs)(U.Fragment,{children:[te(n,null===h||void 0===h?void 0:h.form.title)," ",Object(U.jsx)(Y.a,{errors:i||r})]}),content:t}),b||j.push({id:"output-schema-tab",label:Object(U.jsx)(N.a,{id:"jobs.edit.node.tabs.outputSchema.label",defaultMessage:"Output schema",description:"Header for the tab containing the output schema of a node."}),content:Object(U.jsx)(J.a,{children:Object(U.jsx)($.a,{handleEvents:u})})}),b||j.push({id:"data-preview-tab",label:Object(U.jsx)(N.a,{id:"jobs.edit.node.tabs.data-preview.label",defaultMessage:"Data preview",description:"Tab label for data preview in the detail panel view."}),content:Object(U.jsx)(J.a,{children:Object(U.jsxs)(U.Fragment,{children:[!f&&Object(U.jsx)(X.default,{selectedNodeId:o}),f&&Object(U.jsx)(ee.default,{selectedNodeId:o})]})})})),j):j}({selectedNode:P,selectedNodeType:A,selectedNodeId:L,jobHasRole:!!g.role,nbNodePropsErrors:B,nbOtherErrors:V,form:t,expanded:w,fieldsPath:D,handleEvents:re,isResourcePanelAndPanelLayoutEnabled:x,isDataPreviewV2Enabled:S})}),[P,A,L,g.role,B,V,t,w,D,re,x,S]),ce=v.formatMessage({id:"jobs.edit.node.detail.expand",defaultMessage:"Expand sidebar",description:"Label for button to expand the sidebar containing a node's detail."}),le=v.formatMessage({id:"jobs.edit.node.detail.collapse",defaultMessage:"Collapse sidebar",description:"Label for button to collapse the sidebar containing a node's detail."});return Object(U.jsx)(U.Fragment,{children:t&&Object(U.jsxs)(U.Fragment,{children:[Object(U.jsx)("button",{"aria-label":w?le:ce,className:"glue__expand-button",type:"button",onClick:function(){var e=!w,t=e?[0,100]:[100-m.c,m.c];R(t),I(e)},children:w?Object(U.jsx)(T,{}):Object(U.jsx)(k,{})}),Object(U.jsx)(c.a,{className:"glue__sidebar-container",tabs:se,onChange:function(e){var t=e.detail.activeTabId;return oe(t)},activeTabId:K,variant:"container"})]})})}},2896:function(e,t,n){"use strict";n.d(t,"a",(function(){return h})),n.d(t,"b",(function(){return m}));var a=n(8),o=n(2),r=n(2784),i=n(2779),s=n(3),c=n(24),l=n(10),u=n.n(l),d=n(0),b=n(2745),p=n(76),f=n(97),j=n(884),h={label:"None",id:"none",description:""},m=function(e){var t=function(){var e=Object(f.c)(p.f,"getConnection"),t=Object(o.a)(e,2),n=t[0],a=t[1].status,r=Object(f.c)(p.h,"describeSubnets"),i=Object(o.a)(r,2),l=i[0],h=i[1].status,m=Object(j.c)(),g=Object(d.useCallback)(function(){var e=Object(c.a)(u.a.mark((function e(t){var a,o,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=[],o=function(){var e=Object(c.a)(u.a.mark((function e(t){var o,r,i,c,d,b;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n({Name:t,HidePassword:!0});case 3:return o=e.sent,r=(null===o||void 0===o?void 0:o.Connection)||{},i=r.PhysicalConnectionRequirements,c=(i=void 0===i?{}:i).SubnetId,d=void 0===c?"":c,e.next=9,l({Filters:[{Name:"subnet-id",Values:d?[d]:[]}]});case 9:b=e.sent,a.push(Object(s.a)(Object(s.a)({},o),{},{vpcInfo:b})),e.next=15;break;case 13:e.prev=13,e.t0=e.catch(0);case 15:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}(),e.next=4,Object(b.a)(t,o);case 4:return r=a.filter((function(e){var t=e.Connection;return Object(j.a)(t,m)})),e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[m,n,l]);return[g,{connectionCallStatus:a,subnetCallStatus:h}]}(),n=Object(o.a)(t,2),l=n[0],m=n[1],g=m.connectionCallStatus,O=m.subnetCallStatus,v=Object(r.a)(),y=v.connectorList.networkConnections,x=v.unfilteredList,S=v.status,k=v.refresh,C=Object(i.a)(),E=Object(o.a)(C,2),w=E[0],I=E[1],T=Object(o.a)(I,1)[0].status,M="success"===S||"error"===S,N="loading"===g||"loading"===O||"loading"===T,L=Object(a.a)(e?x:y).sort((function(e,t){var n=e.Name,a=void 0===n?"":n,o=t.Name,r=void 0===o?"":o;return(null===a||void 0===a?void 0:a.toLocaleUpperCase())<(null===r||void 0===r?void 0:r.toLocaleUpperCase())?-1:(null===a||void 0===a?void 0:a.toLocaleUpperCase())>(null===r||void 0===r?void 0:r.toLocaleUpperCase())?1:0})),R=[h].concat(Object(a.a)(L.map((function(e){return{id:e.Name||"",label:e.Name||"",value:e.Name||"",description:e.Description||"No description available.",connectionType:e.ConnectionType}})))),D=R.map((function(e){return{label:e.label,description:e.description,value:e.id,connectionType:e.connectionType}}));return{connectionList:L,refresh:k,getAllConnectionsByName:l,networkConnectionOptions:R,networkConnectionOptionsMultiSelect:D,networkConnectionsLoaded:M,tableLoading:N,buildConnectionsListFromDag:w,status:S}}},2944:function(e,t,n){},2945:function(e,t,n){},2946:function(e,t,n){e.exports={Icon:"Icon_Icon__3qirt"}},2947:function(e,t,n){e.exports={ResizeHandleOuter:"ResizeHandle_ResizeHandleOuter__3anxs",ResizeHandleInner:"ResizeHandle_ResizeHandleInner__1-pL6",HorizontalIcon:"ResizeHandle_HorizontalIcon__2K0gY",VerticalIcon:"ResizeHandle_VerticalIcon__2-xOW"}},2948:function(e,t,n){},2949:function(e,t,n){},2950:function(e,t,n){},2951:function(e,t,n){},2952:function(e,t,n){},2953:function(e,t,n){},2954:function(e,t,n){},2955:function(e,t,n){},2956:function(e,t,n){},2957:function(e,t,n){},2958:function(e,t,n){},2959:function(e,t,n){}}]);
//# sourceMappingURL=VisualEditor.js.map