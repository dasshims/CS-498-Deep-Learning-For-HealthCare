(this["webpackJsonp@amzn/amazon-glue-frontend-asset-server"]=this["webpackJsonp@amzn/amazon-glue-frontend-asset-server"]||[]).push([[33],{2777:function(e,t,n){"use strict";n.d(t,"b",(function(){return j})),n.d(t,"a",(function(){return O}));var a=n(42),c=n(2),o=n(3),r=n(0),u=n(41),i=n(29),b=n(2695),s=n(2778),l=n(2694),d=["data","refetch","hasNextPage","status"];function j(e){var t=Object(u.j)().jobName,n=Object(r.useState)(new Date),b=Object(c.a)(n,2),l=b[0],j=b[1],O=Object(s.b)(Object(i.safeDecode)(t||""),l,e),f=O.data,v=void 0===f?[]:f,m=O.refetch,p=(O.hasNextPage,O.status),h=Object(a.a)(O,d),R=Object(r.useCallback)((function(){j(new Date),m()}),[m]),g=Object(r.useMemo)((function(){return Object(o.a)(Object(o.a)({},h),{},{status:p,refetch:R})}),[h,R,p]);return{queryHook:Object(r.useMemo)((function(){return function(){return Object(o.a)(Object(o.a)({},g),{},{tableData:v})}}),[g,v]),fieldsFromAPI:g,tableData:v}}var O=function(e,t){var n=Object(l.b)(t);return null===e||void 0===e?void 0:e.map((function(e){var t=null===n||void 0===n?void 0:n.get((null===e||void 0===e?void 0:e.Id)||"");return Object(o.a)(Object(o.a)({},e),{WorkerUtilization:null===t||void 0===t?void 0:t[b.f],Skewness:null===t||void 0===t?void 0:t[b.e]})}))}},2778:function(e,t,n){"use strict";n.d(t,"a",(function(){return m})),n.d(t,"b",(function(){return p}));var a=n(3),c=n(24),o=n(10),r=n.n(o),u=n(874),i=n(0),b=n(309),s=n(252),l=n(30),d=n(2694),j=n(2777),O=n(2665),f=n(29),v=n(95),m=200,p=function(e,t,n){var o=Object(O.b)((function(e){return e.observabilityMetricsVisible})),p=o?f.DEFAULT_TABLE_PAGE_SIZE:m,h=Object(u.a)(["getJobRuns",e,o],function(){var u=Object(c.a)(r.a.mark((function c(u){var i,b,s,O,f;return r.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return i=u.pageParam,b=void 0===i?void 0:i,c.next=3,v.a.getJobRuns({JobName:e,MaxResults:p,NextToken:b}).promise();case 3:return s=c.sent,O=l.a.isEnabled("feature-monitoring-resource-usage")&&o&&!n,c.next=7,Object(d.a)({isEnabled:O,jobRuns:s.JobRuns||[],maxDateRange:t});case 7:return f=c.sent,c.abrupt("return",Object(a.a)(Object(a.a)({},s),{},{JobRuns:O?Object(j.a)(s.JobRuns||[],f):s.JobRuns}));case 9:case"end":return c.stop()}}),c)})));return function(e){return u.apply(this,arguments)}}(),{getNextPageParam:function(e,t){if(!(t.length>=2e3/p))return e.NextToken},refetchOnWindowFocus:!1,refetchInterval:s.d,retry:0}),R=Object(b.a)(h,"JobRuns"),g=Object(i.useMemo)((function(){return R.map((function(e){return Object(a.a)(Object(a.a)({},e),e.ExecutionArguments)}))||[]}),[R]);return Object(a.a)(Object(a.a)({},h),{},{data:g})}},2993:function(e,t,n){"use strict";n.r(t);var a=n(5),c=n(2),o=n(82),r=n(29),u=n(0),i=n(2585),b=n(41),s=n(136),l=n(2665),d=n(396),j=n(195),O=n(2868),f=n.n(O),v=n(2675),m=n(2876),p=n(558),h=n(2783),R=n(2693),g=n(2877),x=(n(2878),n(2687)),C=n(62),J=n(2777),S=n(232),A=n(1);t.default=function(e){var t,n=e.forceJobRunsRefresh,O=e.headerContent,P=Object(b.h)(),y=Object(R.a)(),k=Object(r.useSplitPanelTools)().setHeaderContent,E=Object(l.b)((function(e){return e.observabilityMetricsVisible})),I=Object(S.a)(E),T=Object(u.useCallback)((function(e){return"".concat(e.JobName," run started on ").concat(e.StartedOn," (Run ").concat(e.Id,")")}),[]),w=Object(l.b)((function(e){return{selectedJobRun:e.selectedJobRun,setSelectedJobRun:e.setSelectedJobRun,expandAll:e.expandAll}}),s.shallow),N=w.selectedJobRun,D=w.setSelectedJobRun,_=w.expandAll,F=Object(J.b)(n),L=F.queryHook,M=F.fieldsFromAPI,z=M.isFetching,V=M.isFetched,K=M.isRefetching,G=M.refetch,H=M.status,U=F.tableData,q=Object(h.a)(U),W=Object(g.a)(U),B=Object(u.useCallback)((function(e){var t=Object(c.a)(e,1)[0],n=void 0===t?{}:t;k(Object(v.c)(new Date(n.StartedOn).toISOString(),!0)),Object(r.captureCustomAnalytics)(r.PanoramaEventType.CLICK,"RunTable","SplitPanelOpen"),D(n)}),[k,D]),Z=Object(u.useCallback)((function(){return Object(r.captureCustomAnalytics)(r.PanoramaEventType.CLICK,"RunTable","View Run Details")}),[]),Q=Object(u.useCallback)((function(){return Object(r.captureCustomAnalytics)(r.PanoramaEventType.CLICK,"RunTable","JobStopped")}),[]),X=Object(R.b)(),Y=Object(j.b)({"glue__graph-editor":!0,"glue__graph-editor--panel-layout":!0}),$=Object(j.b)((t={},Object(a.a)(t,f.a.PanelRow,!0),Object(a.a)(t,f.a.PanelRowScroll,!0),t));return Object(u.useEffect)((function(){!I&&E&&(D(void 0),G()),n&&G()}),[n,G,E,I,D]),Object(u.useEffect)((function(){var e=function(e){Object(C.unstable_batchedUpdates)((function(){D(e),B([e]),_({xPos:void 0,yPos:void 0})}))};if(!U.length||N||z){if(U.length&&N){var t=U.find((function(e){return e.Id===N.Id}));t&&e(t)}}else e(Object(c.a)(U,1)[0])}),[_,z,U,B,N,D]),Object(A.jsx)("div",{className:Y,children:Object(A.jsx)(i.b,{className:f.a.PanelGroup,direction:"vertical",children:Object(A.jsxs)(i.a,{className:$,children:[Object(A.jsx)(m.a,{columnDefinition:W,createSelectedAriaLabel:T,filteringProperties:q,infoLinkContentKey:"job-run-details-hp",selected:N,onSelectionChange:B,queryHook:L,tableActions:Object(A.jsxs)(A.Fragment,{children:[N&&Object(A.jsx)(o.default,{variant:"normal",formAction:"none",onClick:function(){P.push("/job/".concat(Object(d.a)(N.JobName),"/run/").concat(N.Id)),Z()},children:y.actions.ctaViewDetails}),Object(A.jsx)(x.b,{jobName:null===N||void 0===N?void 0:N.JobName,jobRunId:null===N||void 0===N?void 0:N.Id,jobRunState:null===N||void 0===N?void 0:N.JobRunState,onActionComplete:Q}),Object(A.jsx)(A.Fragment,{children:O})]}),pageSize:r.DEFAULT_TABLE_PAGE_SIZE,tableKey:"RunsTable",defaultVisibleColumns:["JobRunState","Attempt","StartedOn","CompletedOn","ExecutionTime","MaxCapacity","WorkerType","GlueVersion"],onRefresh:G}),Object(A.jsx)(p.a,{fetched:V&&!K,i18nStrings:X,status:H})]})})})}}}]);
//# sourceMappingURL=UpdatedRunTable.js.map